/**
 * taurus-serv-cuenta - v1.8.0-build.12 - 2017-06-27
 * Copyright (c) 2017 
 */

function formatearFecha($filter,fecha,formato){if(angular.isUndefined(fecha)||null===fecha)return"";var fechaFormateada="number"==typeof fecha?$filter("date")(new Date(fecha),formato,"UTC"):$filter("date")(fecha,formato);return fechaFormateada=fechaFormateada.toUpperCase(),fechaFormateada=fechaFormateada.replace(/\./g,"")}function getAllKeys(objectKeys,prefix){var keys=[],listKeysLevel=Object.keys(objectKeys);if(listKeysLevel.length>0)for(var i=0,key=listKeysLevel[i++];key&&i<=listKeysLevel.length;){var innerFields=objectKeys[key];"boolean"==typeof innerFields?keys.push(null==prefix?key:prefix+"#"+key):0===Object.keys(innerFields).length?keys.push(null==prefix?innerFields:prefix+"#"+innerFields):keys=keys.concat(getAllKeys(innerFields,null==prefix?key:prefix+"#"+key)),key=listKeysLevel[i++]}return keys}function getValue(item,key){var value=null;if(key){for(var keys=key.split("#"),itemObject=item,i=0,keyAct=null;keys&&keys.length>0&&itemObject&&i<keys.length;)keyAct=keys[i],itemObject=itemObject[keyAct],i++;value=itemObject}return value}function checkEmptyValues(items,expect,fields){if(angular.isUndefined(items)||angular.isUndefined(expect)||angular.isUndefined(fields))return!0;var fieldsKeys=Object.keys(fields);return""===expect||0===fieldsKeys.length||JSON.stringify(fields).indexOf("true")<0?!0:!1}function processAmount(amount,currencySymbol,fractionSize,suffixSymbol,pattern,$filter,$locale){var formats=$locale.NUMBER_FORMATS;if(!angular.isNumber(amount))return"";angular.isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),angular.isUndefined(pattern)&&(pattern=formats.PATTERNS[1]);var isNegative=0>amount;fractionSize=angular.isUndefined(fractionSize)?formats.DEFAULT_PRECISION:fractionSize,amount=Math.abs(amount);var number=$filter("number")(amount,fractionSize),parts=populateParts(isNegative,pattern,suffixSymbol,number,currencySymbol);return parts.join("").replace(/\u00A4/g,"")}function populateParts(isNegative,pattern,suffixSymbol,number,currencySymbol){var parts=[];return parts.push(isNegative?pattern.negPre:pattern.posPre),parts.push(suffixSymbol?number:currencySymbol),parts.push(suffixSymbol?currencySymbol:number),parts.push(isNegative?pattern.negSuf:pattern.posSuf),parts}function pad(num,size){for(var s=num+"";s.length<size;)s="0"+s;return s}angular.module("bchui-contrast.views",["bchui/directive/contrast/view/view.html"]),angular.module("bchui/directive/contrast/view/view.html",[]).run(["$templateCache",function(a){a.put("bchui/directive/contrast/view/view.html",'<input type="range" ng-model="percentage">')}]),function(){angular.module("bchui-contrast",["bchui-contrast.views"])}(),function(){function a(a){window.bchuiContrast={},angular.forEach(a.colors,function(a){window.bchuiContrast[a]={selectors:{}}}),angular.forEach(document.styleSheets,function(c,d){var e=c.cssRules;angular.forEach(e,function(c,e){var f=c.selectorText;angular.forEach(c.style,function(g){var h=a.attributes.indexOf(g),i=b(c.style[g]),j=a.colors.indexOf(i);if(h>=0&&j>=0){var k=window.bchuiContrast[i].selectors[f];angular.isUndefined(k)&&(k=[]),k.indexOf(a.attributes[h])<0&&k.push({name:a.attributes[h],style:d,rule:e}),window.bchuiContrast[i].selectors[f]=k}})})})}function b(a){return a&&(a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/g),a&&1===a.length&&(a=a[0].match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),a&&4===a.length))?c(a[1])+c(a[2])+c(a[3]):"NOT_COLOR"}function c(a){var b=isNaN(a)?"00":o[(a-a%16)/16]+o[a%16];return b}function d(a,b,c){var d="account"+a+b,e=localStorage[d];return e?e:c}function e(a,b,c){a&&b&&c&&(localStorage["account"+a+b]=c)}function f(a,b,c){var d,e=parseInt(a.substr(b,2),16),f=1+parseInt(c,10)/100;return d=f>0?parseInt(e/f,10).toString(16):e.toString(16),1===d.length?"0"+d:d}function g(a,b,c,d){angular.forEach(b.selectors,function(b,e){angular.forEach(b,function(b){var g=d*(a.reaction[e]?a.reaction[e]:1),i="#"+f(c,0,g)+f(c,2,g)+f(c,4,g);h(e,b,i)})})}function h(a,b,c){var d=document.styleSheets[b.style].cssRules[b.rule].style[b.name];p.indexOf(b.name)>-1?i(b.style,b.rule,b.name,d,c):j(b.style,b.rule,b.name,d,c)}function i(a,b,c,d,e){var f=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/g;e=d.replace(f,e),j(a,b,c,d,e)}function j(a,b,c,d,e){document.styleSheets[a].cssRules[b].style[c]=e}function k(a){window.bchuiContrast&&angular.forEach(window.bchuiContrast,function(b,c,d){g(a,b,c,a.percentage),e(a.userName,n,a.percentage)})}function l(b){b.userName=b.userName?b.userName:"anonymous",b.reaction=angular.isDefined(b.reaction)?b.reaction:{},b.percentage=b.percentage?b.percentage:0,b.percentage=d(b.userName,n,0),b.hasProfile=b.percentage>0,a(b),b.$watch("percentage",function(){k(b)})}function m(){return{restrict:"E",templateUrl:"bchui/directive/contrast/view/view.html",controller:["$scope",l],scope:{attributes:"=",colors:"=",userName:"=",hasProfile:"=",percentage:"=",reaction:"="}}}var n="percentage",o=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),p=["box-shadow","text-shadow"];angular.module("bchui-contrast").directive("bchuiContrast",m)}(),function(){angular.module("WebBancoChile.ngNumber",[])}(),angular.module("WebBancoChile.ngDate",[]).directive("ngDate",function($parse,$window,$filter){function isEmpty(value){return angular.isUndefined(value)||""===value||null===value||value!==value}function toString(value){return"string"==typeof value&&(value=parseDate(value)),$filter("date")(value,"dd/MM/yyyy")}function parseDate(value){value instanceof Date&&(value=toString(value));var re=/\d\d\/\d\d\/\d\d\d\d/g;return re.test(value)?new Date(value.substring(6),value.substring(3,5)-1,value.substring(0,2)):new Date(value)}function validator(scope,ngModel,attrs,moment){void 0!==attrs.ngdatemin&&(ngModel.$validators.ngDateMin=function(value){var v=value;return value instanceof Date||(v=parseDate(value)),isEmpty(value)||v>=$parse(attrs.ngdatemin)(scope)}),void 0!==attrs.ngdatemax&&(ngModel.$validators.ngDateMax=function(value){var v=value;return value instanceof Date||(v=parseDate(value)),isEmpty(value)||v<=$parse(attrs.ngdatemax)(scope)}),ngModel.$validators.ngDateValid=function(value){if(!(value instanceof Date)){var date=moment(toString(parseDate(value)),"DD/MM/YYYY");return isEmpty(value)||date&&date.isValid()}return!0}}function keypress(e){var re=/[0-9]|[\/]/g;return re.test(String.fromCharCode(e.keyCode))}function link(scope,element,attrs,ngModel){var moment=$window.moment;element.on("keypress",keypress),validator(scope,ngModel,attrs,moment),ngModel.$parsers.unshift(parseDate),ngModel.$formatters.unshift(toString)}function closeAllCalendars(obj){for(var claves=Object.keys(obj),i=0;i<claves.length;i++){var key=claves[i];obj[key]=!1}}var dateDirectiveController=function(){var vm=this;vm.datapickers={opened:{}},vm.dateOptions={startingDay:1,showWeeks:!1,daysOfWeekDisabled:[0,6]},vm.open=function($event,which,obj){if($event.preventDefault(),$event.stopPropagation(),angular.isDefined(obj)){var isOpen=obj[which];closeAllCalendars(obj),obj[which]=!isOpen}else vm.datapickers.opened[which]=!vm.datapickers.opened[which]},vm.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())}};return{require:"ngModel",restrict:"A",link:link,controller:dateDirectiveController,controllerAs:"vm_datapicker"}}),angular.module("WebBancoChile.ngEnter",[]).directive("ngEnter",function(){function link(scope,element,attrs){"submit"!==attrs.type&&element.on("keypress",function(event){13===event.keyCode?(event.preventDefault(),teclaEnter(scope,element,attrs)):(element.data().$ngModelController.$setUntouched(),scope.$digest())})}function next(element){var elementos=$("a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]").not('[tabindex=-1], [disabled], :hidden, [no-tabable="true"]');return elementos.index(element)+1<elementos.length?elementos[elementos.index(element)+1]:element}function teclaEnter(scope,element,attrs){!element.data().$ngModelController||element.data().$ngModelController.$valid?angular.isUndefined(attrs.ngEnter)||""===attrs.ngEnter||null==attrs.ngEnter?next($(this)).focus():scope.$apply(function(){scope.$eval(attrs.ngEnter,{$event:event})}):(element.data().$ngModelController.$setTouched(),scope.$digest())}return{restrict:"A",priority:1,link:link}}),angular.module("WebBancoChile.ngNumber").directive("ngNumber",function(){function keypress(e){var re=/[0-9]|\.|[\,]/g,key=String.fromCharCode(e.keyCode);return re.test(key)?void 0:(e.preventDefault(),!1)}function blur(e){if(188!==e.keyCode&&190!==e.keyCode)if(isEmpty(this.value)||""===e.currentTarget.attributes["ng-number"].nodeValue)isEmpty(this.value)||(this.value=toString(parseNumber(this.value)));else{var cantidadDecimales=JSON.parse(e.currentTarget.attributes["ng-number"].nodeValue).cantidadDecimales;maxLength=cantidadDecimales,this.value=toString(parseNumber(this.value));var s=this.value.replace(/\./g,"").split(",");isEmpty(s[1])||(this.value=toString(s[0])+","+strRightPad(s[1],"0",cantidadDecimales))}}function isEmpty(value){return angular.isUndefined(value)||""===value||null===value||value!==value}function parseNumber(n){var s=n.replace(/\./g,"").split(",");return isEmpty(s[1])?isNaN(parseInt(s[0],10))?0:parseInt(s[0],10):parseFloat(s[0]+"."+truncarDecimalesNumber(s[1]))}function toString(v){if(!isEmpty(v)){var value=v.toString(),n=value.split("."),r=n[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");return isEmpty(n[1])||(r+=","+n[1]),r}}function strRightPad(str,pad,length){for(var decimales="",c=str.length;length>c;c++)decimales+=pad;return str+decimales}function truncarDecimalesNumber(number){var truncado=number;return!isEmpty(maxLength)&&number.length>maxLength&&(truncado=number.substring(0,maxLength)),truncado}function validator(ngModel,attrs){void 0!==attrs.ngNumber&&""!==attrs.ngNumber&&(maxLength=JSON.parse(attrs.ngNumber).cantidadDecimales),void 0!==attrs.ngnumbermin&&(ngModel.$validators.ngNumberMin=function(value){return isEmpty(value)||parseFloat(value)>=parseFloat(attrs.ngnumbermin)}),void 0!==attrs.ngnumbermax&&(ngModel.$validators.ngNumberMax=function(value){return isEmpty(value)||parseFloat(value)<=parseFloat(attrs.ngnumbermax)})}function link(scope,element,attrs,ngModel){element.on("keypress",keypress),element.on("blur",blur),validator(ngModel,attrs),ngModel.$parsers.unshift(parseNumber),ngModel.$formatters.unshift(toString)}var maxLength="";return{restrict:"A",link:link,require:"ngModel"}}),function(){function onlyNumber(){return{restrict:"A",require:"ngModel",link:linkFn}}function linkFn(scope,element,attrs,ngModelCtrl){function fromUser(text){return ngModelCtrl.$setValidity("maxonlynumber",!0),ngModelCtrl.$setValidity("minonlynumber",!0),transformedInputValue=""!==text?validacion(attrs,ngModelCtrl,text):!1}var transformedInputValue;ngModelCtrl.$parsers.push(fromUser),element.on("focus",function(){ngModelCtrl.$setUntouched(),ngModelCtrl.$setValidity("maxonlynumber",!0),ngModelCtrl.$setValidity("minonlynumber",!0)}),element.on("blur",function(){ngModelCtrl.$setUntouched(),ngModelCtrl.$setPristine(),angular.isDefined(attrs.max)&&parseFloat(transformedInputValue)>parseFloat(attrs.max)&&ngModelCtrl.$setValidity("maxonlynumber",!1),angular.isDefined(attrs.min)&&parseFloat(transformedInputValue)<parseFloat(attrs.min)&&ngModelCtrl.$setValidity("minonlynumber",!1)})}function validacion(attrs,ngModelCtrl,text){if(text){var transformedInput=text.replace(/[^0-9]/g,"");return ngModelCtrl.$isEmpty(transformedInput)&&(ngModelCtrl.$setValidity("maxonlynumber",!0),ngModelCtrl.$setValidity("minonlynumber",!0)),transformedInput!==text&&(ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render()),transformedInput}return void 0}angular.module("WebBancoChile.onlyNumberDirective",[]).directive("onlyNumber",onlyNumber)}(),angular.module("WebBancoChile.ngRut",[]).directive("ngRut",function(){function link(scope,element,attrs,ngModel){function domFormat(value){value=isValid(value);var a=reset(value),r="";return""===a?ngModel.$setValidity("rut_no_valido",!0):(r=dotter(parseInt(a.substr(0,a.length-1),10)+"")+"-"+a.substr(a.length-1).toUpperCase(),ngModel.$setValidity("rut_no_valido",validate(a.substr(0,a.length-1),a.substr(a.length-1)))),r}function modelFormat(value){value=isValid(value);var n=reset(value);return parseInt(n.substr(0,n.length-1),10)+"-"+n.substr(n.length-1).toUpperCase()}function reset(value){return value.replace(/\./g,"").replace(/\-/g,"")}function dotter(value){return"NaN"===value||"0"===value?"":value.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function validate(n,r){var d=dv(n);return d===r.toUpperCase()}function dv(T){for(var M=0,S=1;T;T=Math.floor(T/10))S=(S+T%10*(9-M++%6))%11;return S?(S-1).toString():"K"}function isValid(s){if(s){var re=/[0-9]|[k]|[\.]|[-]/gi;return(s.match(re)||[""]).join("")}return""}element.bind("keyup",function(){this.value=domFormat(this.value)}),element.bind("blur",function(){this.value=domFormat(this.value)}),element.on("keypress",function(event){if(13!==event.keyCode){var c=String.fromCharCode(event.keyCode),re=/[0-9]|[k]|[K]|\.|[-]/g;return re.test(c)}this.value=domFormat(this.value)}),ngModel.$parsers.unshift(function(value){return value?modelFormat(value):value}),ngModel.$formatters.unshift(function(value){return value?domFormat(value):value})}return{require:"ngModel",restrict:"A",link:link}}),angular.module("WebBancoChile.showIfAuthorized",["WebBancoChile.perfilusuario","WebBancoChile.constants"]).directive("showIfAuthorized",function($window,PerfilUsuarioService){var vm=this;return vm.perfilusuario={},vm.init=function(){PerfilUsuarioService.perfilIsLoaded()&&(vm.perfilusuario=PerfilUsuarioService.getPerfilActual()),vm.permisos=vm.perfilusuario.permisos?vm.perfilusuario.permisos:[]},{restrict:"A",scope:{role:"@",roles:"="},controller:function($scope,$element){if(vm.init(),$scope.role&&""!==$scope.role&&-1===vm.permisos.indexOf($scope.role))$element.remove();else if($scope.roles&&$scope.roles.length>0){for(var tieneAlgunPermiso=!1,i=0;i<$scope.roles.length;i++)if(vm.permisos.indexOf($scope.roles[i])>-1)return void(tieneAlgunPermiso=!0);tieneAlgunPermiso||$element.remove()}}}});var app=angular.module("WebBancoChile.ngValidateKey",[]).directive("validatekey",function(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){var transformedInput=inputValue.replace(/[^Kk 0-9]/g,"").toUpperCase();return transformedInput!==inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),transformedInput})}}});!function(){function formatNumber($filter,$locale){function noComas(numero){var comas,decimales,entero,modelo,vista;return numero=-1===numero.toString().indexOf(".")?numero:numero.toString().replace(/\./g,""),decimales=-1===numero.toString().indexOf(",")?"":numero.toString().replace(/^-?\d+(?=\,)/,""),decimales=","===decimales?"":decimales,entero=numero.toString().replace(/(\,\d+)$/,""),comas=entero.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),modelo=decimales?""+entero+decimales.replace(/\,/g,"."):entero,vista=decimales?""+comas+decimales:comas,{modelo:modelo,vista:vista}}function validacionMaxDecimales(nroDecimales,formatNumberRound){var len,str=customNumero.modelo.toString(),decimales=str.split(".");if(decimales=decimales.length>1?decimales[1].length:0,nroDecimales=parseFloat(nroDecimales),decimales>=nroDecimales+1&&!formatNumberRound){var lenDecimales=decimales>nroDecimales?decimales-nroDecimales:nroDecimales-decimales;len=customNumero.modelo.length,customNumero.modelo=$filter("limitTo")(customNumero.modelo,len-lenDecimales),len=customNumero.vista.length,customNumero.vista=$filter("limitTo")(customNumero.vista,len-lenDecimales)}return customNumero}return{require:"ngModel",scope:{ngModel:"="},link:function(scope,element,attrs,ngModelCtrl){$locale.NUMBER_FORMATS.DECIMAL_SEP=",",$locale.NUMBER_FORMATS.GROUP_SEP=".",ngModelCtrl.$parsers.push(function(numero){return numero?(customNumero=noComas(numero),validacionMaxDecimales(attrs.formatNumber,attrs.formatNumberRound),numero=numero?numero.toString().replace(/[^0-9.,]/g,""):null,ngModelCtrl.$viewValue=customNumero.vista,ngModelCtrl.$render(),customNumero.modelo):void 0}),ngModelCtrl.$formatters.push(function(numero){if(numero&&"NaN"!==numero){if(numero=-1===numero.toString().indexOf(".")?numero:numero.toString().replace(/\./g,","),customNumero=noComas(numero),validacionMaxDecimales(attrs.formatNumber,attrs.formatNumberRound),numero=numero?numero.toString().replace(/[^0-9.,]/g,""):null,numero&&attrs.formatNumberRound){customNumero.vista=$filter("number")(customNumero.modelo,attrs.formatNumber);var mult=Math.pow(10,attrs.formatNumber);scope.ngModel=Math.round(customNumero.modelo*mult)/mult}else"NaN"===numero&&(customNumero.vista=null);return customNumero.vista}}),element.on("keydown",function(event){if(190===event.keyCode||110===event.keyCode||188===event.keyCode){var numberOf=event.target.value.split(",");return event.target.value=1===numberOf.length?event.target.value+",":event.target.value,!1}}),element.on("focus",function(){ngModelCtrl.$setUntouched(),ngModelCtrl.$setValidity("formatnumbermax",!0),ngModelCtrl.$setValidity("formatnumbermin",!0)}),element.on("blur",function(){if(ngModelCtrl.$setUntouched(),ngModelCtrl.$setPristine(),angular.isDefined(attrs.formatNumberMax)&&parseFloat(scope.ngModel)>parseFloat(attrs.formatNumberMax)&&ngModelCtrl.$setValidity("formatnumbermax",!1),angular.isDefined(attrs.formatNumberMin)&&parseFloat(scope.ngModel)<parseFloat(attrs.formatNumberMin)&&ngModelCtrl.$setValidity("formatnumbermin",!1),attrs.formatNumberRound&&customNumero){customNumero.vista=$filter("number")(scope.ngModel,attrs.formatNumber),ngModelCtrl.$viewValue=customNumero.vista,ngModelCtrl.$render();var mult=Math.pow(10,attrs.formatNumber);scope.ngModel=Math.round(scope.ngModel*mult)/mult}else customNumero&&attrs.stricFixed&&(scope.ngModel=parseFloat(scope.ngModel).toFixed(attrs.formatNumber),customNumero.vista=$filter("number")(scope.ngModel,attrs.formatNumber),ngModelCtrl.$viewValue=customNumero.vista,ngModelCtrl.$render())})}}}angular.module("WebBancoChile.formatNumDirective",[]).directive("formatNumber",formatNumber);var customNumero;formatNumber.$inject=["$filter","$locale"]}(),function(){angular.module("WebBancoChile.bloqueoCuentaLinea",["ui.router","ui.select","ui.bootstrap","ui.bootstrap.accordion","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.errorHandler"])}(),function(){angular.module("WebBancoChile.clickFocus",[])}(),function(){angular.module("WebBancoChile.blockView",["WebBancoChile.perfilusuario","WebBancoChile.constants"])}(),function(){angular.module("WebBancoChile.cajaDescargaDocumento",["ui.router","ui.bootstrap","ui.bootstrap.accordion"])}(),function(){angular.module("WebBancoChile.descargarPdf",[])}(),function(){angular.module("WebBancoChile.listaSucursalesDirective",["ui.router","ui.bootstrap","WebBancoChile.constants","WebBancoChile.errorHandler"])}(),function(){angular.module("WebBancoChile.listaItemsDirective",["ui.router","ui.bootstrap","WebBancoChile.constants","WebBancoChile.errorHandler"])}(),function(){angular.module("WebBancoChile.listaRegComCiuDirective",["ui.router","ui.bootstrap","WebBancoChile.constants","WebBancoChile.errorHandler"])}(),function(){angular.module("WebBancoChile.seleccionarTodos",[])}(),function(){angular.module("WebBancoChile.errorHandler",["oitozero.ngSweetAlert"])}(),function(){angular.module("WebBancoChile.fechaUtil",[])}(),angular.module("WebBancoChile.filters",["WebBancoChile.fechaUtil"]),function(){angular.module("WebBancoChile.alarmaEjecutivo",["ui.router","ui.select","ui.bootstrap","WebBancoChile.constants"])}(),function(){angular.module("WebBancoChile.headerInput",["ui.router","ui.bootstrap","bchui-contrast","WebBancoChile.alarmaEjecutivo","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.financiera","WebBancoChile.indicadoresFinancieros","WebBancoChile.infoCliente","WebBancoChile.infoFinancieraCliente","WebBancoChile.ngEnter","WebBancoChile.ngRut","WebBancoChile.perfilusuario","WebBancoChile.perfilEjecutivo","angular-click-outside"])}(),function(){angular.module("WebBancoChile.headerMenu",["ui.router","ui.bootstrap","bchui-contrast","WebBancoChile.alarmaEjecutivo","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.financiera","WebBancoChile.indicadoresFinancieros","WebBancoChile.infoCliente","WebBancoChile.infoFinancieraCliente","WebBancoChile.perfilEjecutivo","WebBancoChile.perfilusuario"])}(),function(){angular.module("WebBancoChile.financiera",["ui.router","ui.select","ui.bootstrap","ui.bootstrap.accordion","WebBancoChile.constants","WebBancoChile.infoFinancieraCliente"])}(),function(){angular.module("WebBancoChile.infoCliente",["ui.router","ui.select","ui.bootstrap","WebBancoChile.constants"])}(),function(){angular.module("WebBancoChile.infoFinancieraCliente",["ui.router","ui.select","ui.bootstrap","ui.bootstrap.accordion","WebBancoChile.constants"])}(),function(){angular.module("WebBancoChile.ordenNoPago.constant",[])}(),function(){angular.module("WebBancoChile.ordenNoPago.constant").constant("FORMATO",{EMAIL:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/}).constant("CFG_ONP",{CANAL:{BT:{NOMBRE:"Banca Telefónica",PERMISOS:["ROLE_EM_RAT_ONP_BT_EJECUTAR","ROLE_EM_REV_ONP_BT_EJECUTAR"]},SUC:{NOMBRE:"Sucursal",PERMISOS:["ROLE_EM_RAT_ONP_SUC_EJECUTAR","ROLE_EM_REV_ONP_SUC_EJECUTAR"]}},ESTADOS_CHEQUERAS:{ENTREGADA:"ENTREGADA"},ESTADOS_CHEQUE:{PROTESTED:"P",NO_USADO:"N",ONP:"S"},ESTADOS_ONP:{PROVISIONAL:"P",TEMPORARY:"T",PERMANENT:"M",REVOKE:"R"},MOTIVOS:{EMERGENCIAS:[{id:1,descripcion:"Robo"},{id:2,descripcion:"Hurto"},{id:3,descripcion:"Extravío"}],POSTVENTA:[{id:0,descripcion:"Sin motivo"},{id:1,descripcion:"Robo"},{id:2,descripcion:"Hurto"},{id:3,descripcion:"Extravío"},{id:4,descripcion:"Firma adulterada"},{id:5,descripcion:"Monto adulterado"},{id:6,descripcion:"Incumplimiento"},{id:7,descripcion:"Otras causales"},{id:8,descripcion:"Extravío interno"},{id:9,descripcion:"Orden judicial"}]},SOLICITANTES:{POR_DEFECTO:"Titular",TIPO:{TITULAR:{codigo:"LIB",descripcion:"Titular"},PORTADOR:{codigo:"POR",descripcion:"Portador"}}},PUBLICACIONES:[{codigo:1,descripcion:"La Tercera",diasPublicacion:3,costo:.85,moneda:"UF"},{codigo:2,descripcion:"El Mercurio",diasPublicacion:3,costo:.83,moneda:"UF"},{codigo:0,descripcion:"Sin publicación",diasPublicacion:0,costo:0,moneda:""}],TELEFONO_PREFIJOS:[{codigo:"0"},{codigo:"2"},{codigo:"9"}],JOURNAL:{OPERACION_INGONPCLI:"INGONPCLI",OPERACION_CONSULTA_CHEQUES:"CONSCCHCLI",OPERACION_CONSULTA_CHEQUERAS:"CONSCHCLI",OPERACION_REVOCACION_ONP:"REVONPCLI",OPERACION_RATIFICACION_ONP:"RATONPCLI",ID_FUNCIONALIDAD:"ONP",NOMBRE_FUNCIONALIDAD:"ORDEN DE NO PAGO",COD_TRX_CHEQUES:"CDNCHQ"}}).constant("URL_ONP",{OBTENER_CHEQUERAS:"/cheques-gestion/cheques/obtenerChequerasByFiltro",OBTENER_CHEQUES:"/cheques-gestion/cheques/obtenerChequesPorRango",CURSAR_ONP:"/cheques-gestion/cheques/cursarOrdenNoPago",OBTENER_ONPS:"/cheques-gestion/cheques/obtenerOnp",REVOCAR_ONP:"/cheques-gestion/cheques/revocarRangosOnp",RATIFICAR_ONP:"/cheques-gestion/cheques/ratificarRangosOnp"}).constant("TABS_ONP_EMERGENCIAS",{CURSAR:{orden:0,heading:"Ingresar ONP",state:"emergencias.ordenNoPago.cursar",view:"cursar",active:!0,reload:!0,visible:!0,permisos:["INGRESAR_ONP"]},REVOCAR:{orden:1,heading:"Revocar ONP",state:"emergencias.ordenNoPago.revocar",view:"revocar",active:!1,reload:!0,visible:!0,permisos:["REVOCAR_ONP"]},RATIFICAR:{orden:2,heading:"Ratificar ONP",state:"emergencias.ordenNoPago.ratificar",view:"ratificar",active:!1,reload:!0,visible:!0,permisos:["RATIFICAR_ONP"]}}).constant("TABS_ONP_CHEQUES",{CURSAR:{orden:0,heading:"Ingresar ONP",state:"cursar",view:"cursar",active:!0,reload:!0,visible:!0,permisos:["INGRESAR_ONP"]},REVOCAR:{orden:1,heading:"Revocar ONP",state:"revocar",view:"revocar",active:!1,reload:!0,visible:!0,permisos:["REVOCAR_ONP"]},RATIFICAR:{orden:2,heading:"Ratificar ONP",state:"ratificar",view:"ratificar",active:!1,reload:!0,visible:!0,permisos:["RATIFICAR_ONP"]},MODIFICAR_MOTIVO:{orden:3,heading:"Modificar motivo de la ONP",state:"onp_modificar",view:"onp_modificar",active:!1,reload:!0,visible:!0,permisos:["MODIFICAR_MOTIVO_ONP"]}})}(),function(){angular.module("WebBancoChile.ordenNoPago",["ui.router","ui.router.state.events","ui.bootstrap","ui.select","WebBancoChile.ordenNoPago.constant","WebBancoChile.constants","WebBancoChile.infoCliente","WebBancoChile.sharesComponentes","WebBancoChile.ngPaginator","WebBancoChile.listaItemsDirective","WebBancoChile.listaRegComCiuDirective"])}(),function(){angular.module("WebBancoChile.sharesComponentes",[])}(),function(){angular.module("WebBancoChile.perfilEjecutivo",["ui.router","ui.select","ui.bootstrap","ui.bootstrap.accordion","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.perfilusuario"])}(),function(){angular.module("WebBancoChile.perfilusuario",["WebBancoChile.jwt"])}(),function(){angular.module("WebBancoChile.servCheques",["ngAnimate","ui.bootstrap","ui.bootstrap.modal","ui.router","ui.select","WebBancoChile.blockView","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.ngDate","WebBancoChile.ngEnter","WebBancoChile.ngPaginator","WebBancoChile.ngRut","WebBancoChile.orionTablas","WebBancoChile.descargarPdf","WebBancoChile.errorHandler","WebBancoChile.onlyNumberDirective","WebBancoChile.fechaUtil","WebBancoChile.ordenNoPago","angular-svg-round-progress","WebBancoChile.listaSucursalesDirective","WebBancoChile.servCuenta"])}(),function(){angular.module("WebBancoChile.servDocumentos",["ngAnimate","ui.bootstrap","ui.bootstrap.modal","ui.router","ui.select","WebBancoChile.blockView","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.ngDate","WebBancoChile.ngEnter","WebBancoChile.ngPaginator","WebBancoChile.ngRut","WebBancoChile.orionTablas","WebBancoChile.descargarPdf","WebBancoChile.errorHandler","WebBancoChile.onlyNumberDirective","WebBancoChile.fechaUtil","WebBancoChile.ordenNoPago","angular-svg-round-progress","WebBancoChile.cajaDescargaDocumento","WebBancoChile.servCuenta"])}(),function(){angular.module("WebBancoChile.servSaldosMvtosCuenta",["ngAnimate","ui.bootstrap","ui.bootstrap.modal","ui.router","ui.select","WebBancoChile.blockView","WebBancoChile.constants","WebBancoChile.filters","WebBancoChile.ngDate","WebBancoChile.ngEnter","WebBancoChile.ngPaginator","WebBancoChile.ngRut","WebBancoChile.orionTablas","WebBancoChile.descargarPdf","WebBancoChile.errorHandler","WebBancoChile.onlyNumberDirective","WebBancoChile.fechaUtil","WebBancoChile.ordenNoPago","angular-svg-round-progress","WebBancoChile.listaSucursalesDirective","WebBancoChile.servCuenta"])}(),function(){function bloqueoCtaCorrienteConfig($stateProvider){$stateProvider.state("bloqueo-cuenta-linea",{parent:"root",url:"/bloqueo-cuenta-linea",views:{"main@":{controller:"bloqueoCuentaLineaCtrl",templateUrl:"components/bloqueo-cuenta-linea/view/bloqueo-cuenta-linea_tpl.html",controllerAs:"vm"}},data:{pageTitle:"Bloqueo Cuenta Línea"}})}angular.module("WebBancoChile.bloqueoCuentaLinea").config(bloqueoCtaCorrienteConfig)}(),function(){function homeConfig($stateProvider){$stateProvider.state("not-found",{parent:"root",url:"/not-found",views:{"main@":{templateUrl:"commons/templates/header-input/not-found/not-found_tpl.html"}},data:{pageTitle:"HOME"}})}angular.module("WebBancoChile.headerInput").config(homeConfig)}(),function(){function financieraConfig($stateProvider){$stateProvider.state("inf-financiera",{views:{"financiera@":{controller:"financieraController",templateUrl:"commons/templates/info-financiera/info-financiera_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("inf-financiera.close",{views:{"financiera@":{}}}),$stateProvider.state("inf-financiera.info-sbif",{views:{info_financiera_tab_container:{controller:"infoSBIFController",templateUrl:"commons/templates/info-financiera/info-sbif/info-sbif_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("inf-financiera.info-financiera-resumen",{views:{info_financiera_tab_container:{controller:"infoFinancieraResumenController",templateUrl:"commons/templates/info-financiera/info-financiera-resumen/info-financiera-resumen_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("inf-financiera.info_ultimo_deposito",{views:{info_financiera_tab_container:{controller:"infoUltimoDepositoController",templateUrl:"commons/templates/info-financiera/info-ultimo-deposito/info-ultimo-deposito_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("home.inf-financiera",{views:{"financiera@":{controller:"financieraController",templateUrl:"commons/templates/info-financiera/info-financiera_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("home.inf-financiera.close",{views:{"financiera@":{}}}),$stateProvider.state("home.inf-financiera.info-sbif",{views:{info_financiera_tab_container:{controller:"infoSBIFController",templateUrl:"commons/templates/info-financiera/info-sbif/info-sbif_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("home.inf-financiera.info-financiera-resumen",{views:{info_financiera_tab_container:{controller:"infoFinancieraResumenController",templateUrl:"commons/templates/info-financiera/info-financiera-resumen/info-financiera-resumen_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("home.inf-financiera.info_ultimo_deposito",{views:{info_financiera_tab_container:{controller:"infoUltimoDepositoController",templateUrl:"commons/templates/info-financiera/info-ultimo-deposito/info-ultimo-deposito_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("simulacion_ingreso.inf-financiera",{views:{"financiera@":{controller:"financieraController",templateUrl:"commons/templates/info-financiera/info-financiera_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("simulacion_ingreso.inf-financiera.close",{views:{"financiera@":{}}}),$stateProvider.state("simulacion_ingreso.inf-financiera.info-sbif",{views:{info_financiera_tab_container:{controller:"infoSBIFController",templateUrl:"commons/templates/info-financiera/info-sbif/info-sbif_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("simulacion_ingreso.inf-financiera.info-financiera-resumen",{views:{info_financiera_tab_container:{controller:"infoFinancieraResumenController",templateUrl:"commons/templates/info-financiera/info-financiera-resumen/info-financiera-resumen_tpl.html",controllerAs:"vm"}}}),$stateProvider.state("simulacion_ingreso.inf-financiera.info_ultimo_deposito",{views:{info_financiera_tab_container:{controller:"infoUltimoDepositoController",templateUrl:"commons/templates/info-financiera/info-ultimo-deposito/info-ultimo-deposito_tpl.html",controllerAs:"vm"}}})}angular.module("WebBancoChile.financiera").config(financieraConfig)}(),function(){function onpConfig($stateProvider,TABS_ONP_EMERGENCIAS){$stateProvider.state("emergencias.ordenNoPago",{url:"/ordenNoPago",views:{onp:{controller:"ordenNoPagoMainCtrl",templateUrl:"components/view/orden-no-pago_tpl.html",controllerAs:"ctrl"}},data:{pageTitle:"Emergencias Bancarias",enProceso:!1}}).state("emergencias.ordenNoPago.error",{url:"",views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-error/orden-no-pago-error_tpl.html",controller:"ordenNoPagoErrorCtrl",controllerAs:"ctrl"}},data:{pageTitle:"Emergencias Bancarias"}}).state("emergencias.ordenNoPago.cursar",{url:"/cursar",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_EMERGENCIAS.CURSAR,TABS_ONP_EMERGENCIAS)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-cursar/orden-no-pago-cursar_tpl.html",controller:"ordenNoPagoCursarCtrl",controllerAs:"ctrlCursar"}},data:{pageTitle:"Emergencias Bancarias"}}).state("emergencias.ordenNoPago.ratificar",{url:"/ratificar",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_EMERGENCIAS.RATIFICAR,TABS_ONP_EMERGENCIAS)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-ratificar/orden-no-pago-ratificar_tpl.html",controller:"ordenNoPagoRatificarCtrl",controllerAs:"ctrlRatificar"}},data:{pageTitle:"Emergencias Bancarias"
}}).state("emergencias.ordenNoPago.revocar",{url:"/revocar",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_EMERGENCIAS.REVOCAR,TABS_ONP_EMERGENCIAS)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-revocar/orden-no-pago-revocar_tpl.html",controller:"ordenNoPagoRevocarCtrl",controllerAs:"ctrlRevocar"}},data:{pageTitle:"Emergencias Bancarias"}})}function getCuenta(){return[function(){return null}]}function activeTab(tab,tabs){return["radioTabService",function(radioTabService){radioTabService.setActiveTab(tab,tabs),radioTabService.setActiveState(tab)}]}angular.module("WebBancoChile.ordenNoPago").config(onpConfig)}(),function(){function chequesConfig($stateProvider,TABS_CHEQUES){function activeTab(tab,tabs){return["tabsService",function(tabsService){return tabsService.setActiveTab(tab,tabs)}]}$stateProvider.state("chequeras-activas",{url:"/chequeras-activas",parent:"chequeras",resolve:{tabActive:activeTab(TABS_CHEQUES.CHEQUERAS_ACTIVAS,TABS_CHEQUES)},views:{"chequeras-activas-view":{template:'<div chequeras-activas-directive lista="chq.listaChequerasActivas" error="chq.error"></div>'}}}).state("chequeras-inactivas",{url:"/chequeras-inactivas",parent:"chequeras",resolve:{tabActive:activeTab(TABS_CHEQUES.CHEQUERAS_INACTIVAS,TABS_CHEQUES)},views:{"chequeras-inactivas-view":{template:' <div chequeras-inactivas-directive lista="chq.listaChequerasInactivas" error="chq.error"></div>'}}}).state("colillas",{url:"/colillas",parent:"chequeras",resolve:{tabActive:activeTab(TABS_CHEQUES.COLILLAS,TABS_CHEQUES)},views:{"colillas-view":{template:" <div colillas-directive></div>"}}}).state("cheques-cobrados",{url:"/cheques-cobrados",parent:"chequeras",resolve:{tabActive:activeTab(TABS_CHEQUES.CHEQUES_COBRADOS,TABS_CHEQUES)},views:{"cheques-cobrados-view":{template:" <div cheques-cobrados-directive></div>"}}}).state("consulta-cheques",{url:"/consulta-cheques",parent:"chequeras",resolve:{tabActive:activeTab(TABS_CHEQUES.CONSULTA_CHEQUES,TABS_CHEQUES)},views:{"consulta-cheques-view":{template:" <div consulta-cheques-directive></div>"}}})}angular.module("WebBancoChile.servCheques").config(chequesConfig)}(),function(){function onpPosventaConfig($stateProvider,TABS_CHEQUES,TABS_ONP_CHEQUES){$stateProvider.state("ordenNoPago",{url:"/ordenNoPago",parent:"chequeras",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_CHEQUES.ONP,TABS_CHEQUES)},views:{"onp-view":{controller:"ordenNoPagoMainCtrl",templateUrl:"components/view/orden-no-pago_tpl.html",controllerAs:"ctrl"}},data:{pageTitle:"Emergencias Bancarias",enProceso:!1}}).state("error",{url:"",parent:"ordenNoPago",views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-error/orden-no-pago-error_tpl.html",controller:"ordenNoPagoErrorCtrl",controllerAs:"ctrl"}},data:{pageTitle:"Emergencias Bancarias"}}).state("cursar",{url:"/cursar",parent:"ordenNoPago",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_CHEQUES.CURSAR,TABS_ONP_CHEQUES)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-cursar/orden-no-pago-cursar_tpl.html",controller:"ordenNoPagoCursarCtrl",controllerAs:"ctrlCursar"}},data:{pageTitle:"Cursar ONP"}}).state("ratificar",{url:"/ratificar",parent:"ordenNoPago",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_CHEQUES.RATIFICAR,TABS_ONP_CHEQUES)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-ratificar/orden-no-pago-ratificar_tpl.html",controller:"ordenNoPagoRatificarCtrl",controllerAs:"ctrlRatificar"}},data:{pageTitle:"Ratificar ONP"}}).state("revocar",{url:"/revocar",parent:"ordenNoPago",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_CHEQUES.REVOCAR,TABS_ONP_CHEQUES)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-revocar/orden-no-pago-revocar_tpl.html",controller:"ordenNoPagoRevocarCtrl",controllerAs:"ctrlRevocar"}},data:{pageTitle:"Revocar ONP"}}).state("onp_modificar",{url:"/modificar",parent:"ordenNoPago",resolve:{cuentaData:getCuenta(),tabActive:activeTab(TABS_ONP_CHEQUES.MODIFICAR_MOTIVO,TABS_ONP_CHEQUES)},views:{detalleOnp:{templateUrl:"components/view/orden-no-pago-modificar-causal/orden-no-pago-modificar-causal_tpl.html",controller:"ordenNoPagoModificarCausalCtrl",controllerAs:"ctrlModificarCausal"}},data:{pageTitle:"Modificar ONP"}})}function getCuenta(){return["CuentaService",function(CuentaService){var cuenta=CuentaService.modeloCompartido.cuenta;if(cuenta&&cuenta.numProducto){var CuentasNacionales=["CTD","YTD","JUV"],nacional="CLP"===cuenta.moneda||CuentasNacionales.indexOf(cuenta.codigoProducto)>-1||cuenta.descripcion.indexOf("Moneda Local")>-1;cuenta.glosaItem=nacional?cuenta.numProducto+" M/N":cuenta.numProducto+" M/E"}return cuenta}]}function activeTab(tab,tabs){return["radioTabService",function(radioTabService){radioTabService.setActiveTab(tab,tabs),radioTabService.setActiveState(tab)}]}angular.module("WebBancoChile.servCheques").config(onpPosventaConfig)}(),function(){function documentosConfig($stateProvider){$stateProvider.state("documentos",{url:"/documentos",parent:"descarga-documentos",views:{"descarga-documentos":{controller:"DescargaDocumentosCtrl",controllerAs:"docs",templateUrl:"components/descarga-documentos/descarga-documentos_tpl.html"}}})}angular.module("WebBancoChile.servDocumentos").config(documentosConfig)}(),function(){function bloqueoCuentaLineaFactory($http,URL_API,CONTEXT_SERVICIOS_MOVIMIENTOS_CUENTA_CONSULTA,CONTEXT_SERVICIOS_CREDITO_LINEA_CONSULTA,CONTEXT_SERVICIOS_CUENTA_LINEA){function getDetalleCuentaLinea(numProducto,tipoProducto){var contexto=null;"cuenta"===tipoProducto?contexto=CONTEXT_SERVICIOS_MOVIMIENTOS_CUENTA_CONSULTA:"linea"===tipoProducto&&(contexto=CONTEXT_SERVICIOS_CREDITO_LINEA_CONSULTA);var urlConsulta=URL_API+contexto+"/"+tipoProducto+"/detalle/"+numProducto;return $http.get(urlConsulta)}function getRazonBloqueo(){var urlConsulta=URL_API+CONTEXT_SERVICIOS_CUENTA_LINEA+"/consulta/motivos-bloqueo";return $http.get(urlConsulta)}function getBloqueoCuentaLinea(numProducto,tipoProducto,nuevoEstadoProducto){var config={method:"POST",url:URL_API+CONTEXT_SERVICIOS_CUENTA_LINEA+"/"+tipoProducto+"/bloqueo",data:{nroProducto:numProducto,tipoProducto:tipoProducto,nuevoEstadoCuenta:nuevoEstadoProducto}};return $http(config)}function getBloqueoCuentaCliente(objBloqueoCliente){var config={method:"POST",url:URL_API+CONTEXT_SERVICIOS_CUENTA_LINEA+"/cuenta/bloqueo-cliente",data:objBloqueoCliente};return $http(config)}var service={getDetalleCuentaLinea:getDetalleCuentaLinea,getRazonBloqueo:getRazonBloqueo,getBloqueoCuentaLinea:getBloqueoCuentaLinea,getBloqueoCuentaCliente:getBloqueoCuentaCliente};return service}angular.module("WebBancoChile.bloqueoCuentaLinea").factory("bloqueoCuentaLineaFactory",bloqueoCuentaLineaFactory),bloqueoCuentaLineaFactory.$inject=["$http","URL_API","CONTEXT_SERVICIOS_MOVIMIENTOS_CUENTA_CONSULTA","CONTEXT_SERVICIOS_CREDITO_LINEA_CONSULTA","CONTEXT_SERVICIOS_CUENTA_LINEA"]}(),function(){function focus($timeout,$window){return function(id){$timeout(function(){var element=$window.document.getElementById(id);element&&(" "+element.className+" ").indexOf(" ng-hide ")<0&&!element.disabled&&element.focus()})}}angular.module("WebBancoChile.clickFocus").factory("focus",focus),focus.$inject=["$timeout","$window"]}(),function(){function cajaDescargaDocumentoFactory($http){function getPdf(URL,data,cancelar){return $http.post(URL,angular.toJson(data),{headers:{Accept:"application/pdf","Content-Type":"application/json"},responseType:"arraybuffer",timeout:cancelar.promise})}return{getPdf:getPdf}}angular.module("WebBancoChile.cajaDescargaDocumento").factory("cajaDescargaDocumentoFactory",cajaDescargaDocumentoFactory),cajaDescargaDocumentoFactory.$inject=["$http"]}(),function(){function listaSucursalesFactory($http,URL_API,$q){function getListaSucursales(region){return deferred||(deferred=$q.defer(),$http.get(URL_API+url.sucursales+region,{cache:!0}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)})),deferred.promise}var factory,url={sucursales:"/deposito-consulta/consultas/oficinas/"};return factory={getListaSucursales:getListaSucursales}}angular.module("WebBancoChile.listaSucursalesDirective").factory("listaSucursalesFactory",listaSucursalesFactory),listaSucursalesFactory.$inject=["$http","URL_API","$q"];var deferred}(),function(){function listaProductosFactory($http,URL_API,$q){function getProductosClientes(region){return deferred||(deferred=$q.defer(),$http.get(URL_API+url.sucursales+region,{cache:!0}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)})),deferred.promise}var factory,url={sucursales:"/deposito-consulta/consultas/oficinas/"};return factory={getProductosClientes:getProductosClientes}}angular.module("WebBancoChile.listaItemsDirective").factory("listaProductosFactory",listaProductosFactory),listaProductosFactory.$inject=["$http","URL_API","$q"];var deferred}(),function(){function listaRegComCiuFactory($http,URL_API,$q){function obtenerRegionCiudadComuna(rutCliente,marcaCliente){var url=URL_API+"/seguro-consulta/parametros/region-ciudad-comuna",datos={rutCliente:rutCliente,marcaCliente:marcaCliente};return deferred||(deferred=$q.defer(),$http.post(url,datos).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)})),deferred.promise}var factory={obtenerRegionCiudadComuna:obtenerRegionCiudadComuna};return factory}angular.module("WebBancoChile.listaRegComCiuDirective").factory("listaRegComCiuFactory",listaRegComCiuFactory),listaRegComCiuFactory.$inject=["$http","URL_API","$q"];var deferred}(),function(){function modalAsideFactory($modal,URL_ASIDE){function openAside(aside){var template=URL_ASIDE[aside.template]?URL_ASIDE[aside.template]:aside.template,modalInstance=$modal.open({templateUrl:template,animation:!0,controller:"modalAsideCtrl as modalCtrl",size:aside.size,windowClass:"modal-detalle",backdrop:"true",resolve:{aside:function(){return aside}}});return modalInstance.result.then(function(returnValue){return returnValue},function(dismissValue){return dismissValue}),modalInstance.result}var factory={openAside:openAside};return factory}angular.module("WebBancoChile.errorHandler").factory("modalAsideFactory",modalAsideFactory),modalAsideFactory.$inject=["$modal","URL_ASIDE"]}(),function(){function modalAlertasService(){function openModalStatus(remplazarTexto,callbackFunction){var texto="¿Está seguro que desea abandonar $1?";texto=texto.replace("$1",remplazarTexto),factory.open("W",texto,callbackFunction)}function open(tipoError,texto,callbackFunction,mostrarBtnCancelar,textoBtnConfirmacion,textoBtnCancelar){var nop_function=function(){return!1};callbackFunction=callbackFunction?callbackFunction:nop_function,swal({title:"",text:texto,type:tipoError?tipos[tipoError]:"warning",showCancelButton:mostrarBtnCancelar?mostrarBtnCancelar:!0,confirmButtonColor:"#E9F0F5",cancelButtonColor:"#f1f1f3",confirmButtonText:textoBtnConfirmacion?textoBtnConfirmacion:"Abandonar",cancelButtonText:textoBtnCancelar?textoBtnCancelar:"Permanecer"},callbackFunction)}var tipos={E:"error",W:"warning"},factory={openModalStatus:openModalStatus,open:open};return factory}angular.module("WebBancoChile.errorHandler").factory("modalAlertasService",modalAlertasService)}(),function(){function fechaUtilFactory($http,$filter,URL_API){function getFechaActual(){var urlConsulta=URL_API+"/utils-commons/consultas/fecha-actual";return $http.get(urlConsulta)}function getFechaHabil(fechaBase,numDias){var fecha,urlConsulta=URL_API+"/utils-commons/consultas/fecha-habil";return angular.isUndefined(numDias)&&angular.isUndefined(fechaBase)?$http.get(urlConsulta):angular.isUndefined(numDias)?(fecha=$filter("date")(fechaBase,"yyyyMMdd"),$http.get(urlConsulta+"/"+fecha)):(fecha=$filter("date")(fechaBase,"yyyyMMdd"),$http.post(urlConsulta,{fecha:fecha,numDias:numDias}))}var service={getFechaActual:getFechaActual,getFechaHabil:getFechaHabil};return service}angular.module("WebBancoChile.fechaUtil").factory("fechaUtilFactory",fechaUtilFactory),fechaUtilFactory.$inject=["$http","$filter","URL_API"]}(),function(){function alarmaEjecutivoFactory($http,URL_API){function obtenerAlarmasPendientes(){return $http.get(path+"/alarma-ejecutivo/web/alarmas-ejecutivo/alarmas-pendientes")}function actualizarAlarma(alarma){var ur=path+"/alarma-ejecutivo/web/alarmas-ejecutivo/actualizar-alarma";return $http({method:"POST",url:ur,dataType:"json",data:alarma,async:!0})}var path=URL_API,factory={obtenerAlarmasPendientes:obtenerAlarmasPendientes,actualizarAlarma:actualizarAlarma};return factory}angular.module("WebBancoChile.alarmaEjecutivo").factory("alarmaEjecutivoFactory",alarmaEjecutivoFactory),alarmaEjecutivoFactory.$inject=["$http","URL_API"]}(),function(){function busquedaRutFactory($http,URL_API){function busquedasReciente(cantidad){return $http.get(URL_API+"/info-cliente/cliente/busquedas-reciente/"+cantidad)}function busquedasRecurrentes(cantidad){return $http.get(URL_API+"/info-cliente/cliente/busquedas-recurrentes/"+cantidad)}var factory={busquedasReciente:busquedasReciente,busquedasRecurrentes:busquedasRecurrentes};return factory}angular.module("WebBancoChile.headerInput").factory("busquedaRutFactory",busquedaRutFactory),busquedaRutFactory.$inject=["$http","URL_API"]}(),function(){function indicadoresFinancierosFactory($http,URL_API){function get(){return $http.get(URL_API+"/indices-financieros/indices")}var service={get:get};return service}angular.module("WebBancoChile.indicadoresFinancieros",[]).factory("indicadoresFinancierosFactory",indicadoresFinancierosFactory),indicadoresFinancierosFactory.$inject=["$http","URL_API"]}(),function(){function contextoCliente(infoClienteService,$q,$window,CLIENTE_CONSTANT){function storageEncryptCliente(){var clientJson=JSON.stringify(serv.cliente),encryptedData=CryptoJS.AES.encrypt(clientJson,secretKey).toString();$window.localStorage.contextoClienteCrypt=encryptedData}function decryptCliente(){var encryptedData=$window.localStorage.contextoClienteCrypt;return _.isNull(encryptedData)?null:JSON.parse(CryptoJS.AES.decrypt(encryptedData,secretKey).toString(CryptoJS.enc.Utf8))}function getActiveCliente(){return serv.cliente}function loadStorageCliente(){serv.cliente=angular.isDefined($window.localStorage.contextoClienteCrypt)?decryptCliente():angular.copy(estructure)}function initCliente(){serv.cliente=angular.copy(estructure)}function setActiveCliente(paramRut){if(void 0!==paramRut){var rut=serv.cliente.rut;rut!==paramRut&&(serv.cliente=angular.copy(estructure),serv.cliente.rut=paramRut,storageEncryptCliente())}}function cleanActiveCliente(){return serv.cliente=angular.copy(estructure),storageEncryptCliente(),serv.cliente}function getInfoCliente(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.cliente.dataCliente;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getInfoCliente().then(function(rs){serv.cliente.dataCliente=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataCliente,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getInfoClienteFull(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.cliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getInfoClienteFull().then(function(rs){serv.cliente.dataClienteFull=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getInfoClienteFullSesion(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.cliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getInfoClienteFullGuardandoSesion().then(function(rs){serv.cliente.dataClienteFull=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getInfoClienteDesdeSesion(){var datosCliente=serv.cliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return serv.cliente.rut=respond.data.rutCliente,$q.when(respond)}var deferred=$q.defer();return infoClienteService.getInfoClienteFullDesdeSesion().then(function(rs){serv.cliente.dataClienteFull=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataClienteFull,cache:!0};return serv.cliente.rut=rs.data.rutCliente,deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}function getCuentasCliente(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCuentas=serv.cliente.dataCuentas;if(void 0!==datosCuentas&&null!==datosCuentas){var respond={data:datosCuentas,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getCuentasCliente().then(function(rs){serv.cliente.dataCuentas=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataCuentas,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getCorreosCliente(tipoCliente){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCorreos=serv.cliente.dataCorreos;if(void 0!==datosCorreos&&null!==datosCorreos){var respond={data:datosCorreos,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getCorreosCliente(tipoCliente).then(function(rs){serv.cliente.dataCorreos=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataCorreos,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getDireccionesCliente(tipoCliente){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosDirecciones=serv.cliente.dataDirecciones;if(void 0!==datosDirecciones&&null!==datosDirecciones){var respond={data:datosDirecciones,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getDireccionesCliente(tipoCliente).then(function(rs){serv.cliente.dataDirecciones=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataDirecciones,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getInfoClienteFullGuardadoBusqueda(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.cliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getInfoClienteFullGuardadoBusqueda().then(function(rs){serv.cliente.dataClienteFull=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getProductosServicios(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var data=serv.cliente.dataProductosServicios;if(void 0!==data&&null!==data){var respond={data:data,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getProductosServicios().then(function(rs){serv.cliente.dataProductosServicios=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataProductosServicios,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getConsultaCuentasCliente(){var rut=serv.cliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var data=serv.cliente.dataCuentasCliente;if(void 0!==data&&null!==data){var respond={data:data,cache:!0};return $q.when(respond)}var deferred=$q.defer();return infoClienteService.setActiveRut(rut),infoClienteService.getConsultaCuentasCliente().then(function(rs){serv.cliente.dataCuentasCliente=rs.data,storageEncryptCliente();var response={data:serv.cliente.dataCuentasCliente,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return $q.when(null)}function getSeccionCliente(){var cliente=serv.cliente.dataClienteFull;if(cliente&&null!==cliente){var personaEsEmpresa=cliente.tipoCliente===CLIENTE_CONSTANT.TIPO_CLIENTE.naturalConGiro&&cliente.codigoActividadEconomica!==CLIENTE_CONSTANT.ACTIVIDAD_ECONOMICA.socioEmpresario&&cliente.codigoActividadEconomica!==CLIENTE_CONSTANT.ACTIVIDAD_ECONOMICA.sociedadInversion;return cliente.tipoCliente===CLIENTE_CONSTANT.TIPO_CLIENTE.empresa||personaEsEmpresa?CLIENTE_CONSTANT.TIPO_CLIENTE.empresa:CLIENTE_CONSTANT.TIPO_CLIENTE.persona}return null}var estructure={rut:null,dataCliente:null,dataClienteFull:null,dataCuentas:null,dataCorreos:null,dataDirecciones:null,dataProductosServicios:null,dataCuentasCliente:null},serv={cliente:angular.copy(estructure)},secretKey="private-key",factory={getActiveCliente:getActiveCliente,setActiveCliente:setActiveCliente,loadStorageCliente:loadStorageCliente,cleanActiveCliente:cleanActiveCliente,getInfoCliente:getInfoCliente,getInfoClienteFull:getInfoClienteFull,getCuentasCliente:getCuentasCliente,getCorreosCliente:getCorreosCliente,getDireccionesCliente:getDireccionesCliente,getInfoClienteFullGuardadoBusqueda:getInfoClienteFullGuardadoBusqueda,getProductosServicios:getProductosServicios,getInfoClienteFullSesion:getInfoClienteFullSesion,getInfoClienteDesdeSesion:getInfoClienteDesdeSesion,getConsultaCuentasCliente:getConsultaCuentasCliente,initCliente:initCliente,getSeccionCliente:getSeccionCliente};return factory}angular.module("WebBancoChile.infoCliente").factory("contextoCliente",contextoCliente),contextoCliente.$inject=["infoClienteService","$q","$window","CLIENTE_CONSTANT"]}(),function(){function infoClienteFactory($http,URL_API){function getInfoCliente(rut){var request={rut:rut};return $http.get(URL_API+"/info-cliente/cliente/datos/"+request.rut)}function getInfoCuentas(rut){var urlConsulta=URL_API+"/deposito-consulta/consultas/producto/"+rut;return $http.get(urlConsulta)}function getInfoCorreos(rut,tipoCliente){var tp=angular.isDefined(tipoCliente)?tipoCliente:"P";return $http.get(URL_API+"/deposito-ingreso/clientes/"+rut+"/correos?tipo="+tp)}function getInfoDirecciones(rut,tipoCliente){var tp=angular.isDefined(tipoCliente)?tipoCliente:"P";return $http.get(URL_API+"/deposito-ingreso/clientes/"+rut+"/direcciones?tipo="+tp)}function getInfoClienteFull(rut){var request={rut:rut};return $http.get(URL_API+"/info-cliente/cliente/datosfull/"+request.rut)}function getInfoClienteFullGuardadoBusqueda(rut){var request={rut:rut};return $http.get(URL_API+"/info-cliente/cliente/datosfull/busqueda/"+request.rut)}function getInfoClienteFullGuardandoSesion(rut){var request={rut:rut};return $http.get(URL_API+"/info-cliente/cliente/datosfull/perfilar/"+request.rut)}function getInfoClienteFullEnSesion(){return $http.get(URL_API+"/info-cliente/cliente/datosfull/session/")}function getProductoServicio(rut){var request={rut:rut};return $http.get(URL_API+"/info-cliente360/producto/buscar/"+request.rut)}function getConsultarCuentasCliente(rut){return $http.get(URL_API+"/ahorro-consulta/productosCliente/"+rut+"/S")}var factory={getInfoCliente:getInfoCliente,getInfoCuentas:getInfoCuentas,getInfoCorreos:getInfoCorreos,getInfoDirecciones:getInfoDirecciones,getInfoClienteFull:getInfoClienteFull,getInfoClienteFullGuardadoBusqueda:getInfoClienteFullGuardadoBusqueda,getInfoClienteFullGuardandoSesion:getInfoClienteFullGuardandoSesion,getInfoClienteFullEnSesion:getInfoClienteFullEnSesion,getProductoServicio:getProductoServicio,getConsultarCuentasCliente:getConsultarCuentasCliente};return factory}angular.module("WebBancoChile.infoCliente").factory("infoClienteFactory",infoClienteFactory),infoClienteFactory.$inject=["$http","URL_API"]}(),function(){function infoFinancieraFactory($http,URL_API){function getSBIF(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/sbif/"+request.rut)}function getFinancieraResumen(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/general/"+request.rut)}function getCuentaCorrienteResumen(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/cuenta-corriente/"+request.rut)}function getDepositoPlazoResumen(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/deposito-plazo/"+request.rut)}function getAhorrosResumen(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/ahorros/"+request.rut)}function getUltimoDeposito(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/ultimo-deposito/"+request.rut)}function getAhorrosFondosMutuosResumen(rut){var request={rut:rut};return $http.get(URL_API+"/informacion-financiera-cliente/info/ahorros-fondos-mutuos/"+request.rut)}var factory={getSBIF:getSBIF,getFinancieraResumen:getFinancieraResumen,getUltimoDeposito:getUltimoDeposito,getCuentaCorrienteResumen:getCuentaCorrienteResumen,getDepositoPlazoResumen:getDepositoPlazoResumen,getAhorrosResumen:getAhorrosResumen,getAhorrosFondosMutuosResumen:getAhorrosFondosMutuosResumen};return factory}angular.module("WebBancoChile.infoFinancieraCliente").factory("infoFinancieraFactory",infoFinancieraFactory),infoFinancieraFactory.$inject=["$http","URL_API"]}(),function(){function jwtFactory($http,URL_API){function getToken(){return $http.get(URL_API+"/jwt-service/jwt/token/")}function getCertificate(){return $http.get(URL_API+"/jwt-service/jwt/certificate")}function getTokenInfo(){return $http.get(URL_API+"/jwt-service/jwt/tokeninfo")}var service={getToken:getToken,getCertificate:getCertificate,getTokenInfo:getTokenInfo};return service}angular.module("WebBancoChile.jwt",[]).factory("JWTFactory",jwtFactory),jwtFactory.$inject=["$http","URL_API"]}(),function(){function consultaChequeONPFactory($log,$q,$http,URL_API,URL_ONP){function getCheques(rut,cuenta,onp){var deferred=$q.defer();return $http.get(URL_API+URL_ONP.OBTENER_CHEQUES+"/"+cuenta+"/"+onp.serieInicio+"/"+onp.serieFin).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}$log.log("consultaChequeONPFactory");var factory={getCheques:getCheques};return factory}angular.module("WebBancoChile.ordenNoPago").factory("consultaChequeONPFactory",consultaChequeONPFactory),consultaChequeONPFactory.$inject=["$log","$q","$http","URL_API","URL_ONP"]}(),function(){function consultaOnpFactory($q,$http,URL_API,URL_ONP,$log){function getOnpByFiltro(cuenta,filtro){$log.log("getOnpByFiltro(cuenta: "+cuenta+", filtro : "+JSON.stringify(filtro)+")");var deferred=$q.defer();return $http.post(URL_API+URL_ONP.OBTENER_ONPS+"/"+cuenta,filtro).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var factory={getOnpByFiltro:getOnpByFiltro};return factory}angular.module("WebBancoChile.ordenNoPago").factory("consultaOnpFactory",consultaOnpFactory),consultaOnpFactory.$inject=["$q","$http","URL_API","URL_ONP","$log"]}(),function(){function consultaChequeFactory($log,$q,$http,URL_API,URL_ONP){function getCheques(cuenta,chequera,headers){var deferred=$q.defer();return $http({method:"GET",url:URL_API+urlObtenerCheque+"/"+cuenta+"/"+chequera.numeroChequeInicial+"/"+chequera.numeroChequeFinal,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}$log.log("consultaChequeFactory");var urlObtenerCheque=URL_ONP.OBTENER_CHEQUES,factory={getCheques:getCheques};return factory}angular.module("WebBancoChile.ordenNoPago").factory("consultaChequeFactory",consultaChequeFactory),consultaChequeFactory.$inject=["$log","$q","$http","URL_API","URL_ONP"]}(),function(){function consultaChequeraFactory($q,$http,URL_API,URL_ONP,$log){function getChequerasByFiltro(cuenta,filtro,headers){$log.log("getChequerasByFiltro(cuenta: "+cuenta+", filtro : "+JSON.stringify(filtro)+")");var deferred=$q.defer();return $http({method:"POST",url:URL_API+urlObtenerChequeras+"/"+cuenta,data:filtro,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}var urlObtenerChequeras=URL_ONP.OBTENER_CHEQUERAS,factory={getChequerasByFiltro:getChequerasByFiltro};return factory}angular.module("WebBancoChile.ordenNoPago").factory("consultaChequeraFactory",consultaChequeraFactory),consultaChequeraFactory.$inject=["$q","$http","URL_API","URL_ONP","$log"]}(),function(){function comprobanteFactory($log,$q,$http,URL_API,URL_ONP){function cursarOnp(onp,headers){var deferred=$q.defer();return $http({method:"POST",url:URL_API+URL_ONP.CURSAR_ONP,data:onp,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}$log.log("comprobanteFactory");var factory={cursarOnp:cursarOnp};return factory}angular.module("WebBancoChile.ordenNoPago").factory("comprobanteFactory",comprobanteFactory),comprobanteFactory.$inject=["$log","$q","$http","URL_API","URL_ONP"]}(),function(){function datosSolicitanteFactory(){function resetSolicitante(rutSolicitante){return{rutSolicitante:rutSolicitante?rutSolicitante:"",nombre:"",apellidoPaterno:"",apellidoMaterno:"",nombreCompleto:"",direccion:resetDireccion(),emailParticularCliente:"",codigoPaisFonoPartCliente:"56",codigoCiudadPartCliente:"",fonoParticularCliente:""}}function resetDireccion(){return{direccion:"",numero:"",departamento:"",region:"",ciudad:"",comuna:"",dirCompleta:""}}var factory={resetSolicitante:resetSolicitante};return factory}angular.module("WebBancoChile.ordenNoPago").factory("datosSolicitanteFactory",datosSolicitanteFactory)}(),function(){function comprobanteMantencionFactory($log,$q,$http,URL_API,URL_ONP){function revocarOnp(onp,headers){return servicioRest(URL_ONP.REVOCAR_ONP,onp,headers)}function ratificarOnp(onp,headers){return servicioRest(URL_ONP.RATIFICAR_ONP,onp,headers)}function servicioRest(url,onp,headers){var deferred=$q.defer();return $http({method:"POST",url:URL_API+url,data:onp,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(err)}),deferred.promise}$log.log("comprobanteMantencionFactory");var factory={revocarOnp:revocarOnp,ratificarOnp:ratificarOnp};return factory}angular.module("WebBancoChile.ordenNoPago").factory("comprobanteMantencionFactory",comprobanteMantencionFactory),comprobanteMantencionFactory.$inject=["$log","$q","$http","URL_API","URL_ONP"]}(),function(){function tabsFactory($q,PerfilUsuarioService){function getUserProfile(){var deferred;return deferred=$q.defer(),PerfilUsuarioService.getPerfilSession().then(function(){deferred.resolve(PerfilUsuarioService.getPerfilActual())},function(error){deferred.reject(error)}),deferred.promise}var factory={getUserProfile:getUserProfile};return factory}angular.module("WebBancoChile.ordenNoPago").factory("tabsFactory",tabsFactory),tabsFactory.$inject=["$q","PerfilUsuarioService"]}(),function(){function Paginator($filter){function set(r){this.list=r,this.filteredList=this.list,this.paginacion.totalResultados=this.filteredList?this.filteredList.length:0,this.calculateNumPaginas(),this.setPage(1);
}function getPage(){this.paginacion.paginaActual<=this.paginacion.numPaginas?(this.paginacion.primero=(this.paginacion.paginaActual-1)*this.paginacion.registrosPorPagina+1,this.paginacion.ultimo=this.paginacion.paginaActual*this.paginacion.registrosPorPagina,this.paginacion.ultimo>this.paginacion.totalResultados&&(this.paginacion.ultimo=this.paginacion.totalResultados),this.paginacion.pageList=this.filteredList.slice(this.paginacion.primero-1,this.paginacion.ultimo)):(this.paginacion.primero=0,this.paginacion.ultimo=0,this.paginacion.pageList=this.filteredList)}function setPage(numberPage){this.paginacion.paginaActual=numberPage,this.getPage()}function setRegistrosPorPagina(records){this.paginacion.registrosPorPagina=records,this.calculateNumPaginas(),this.setPage(1)}function filter(functionFilter,params){params.unshift(this.list),this.filteredList=$filter(functionFilter).apply(null,params),this.paginacion.totalResultados=this.filteredList?this.filteredList.length:0,this.calculateNumPaginas(),this.setPage(1)}function cleanFilter(){this.filteredList=this.list,this.paginacion.totalResultados=this.filteredList?this.filteredList.length:0,this.calculateNumPaginas(),this.setPage(1)}function order(orderFields,reverse){this.filteredList=$filter("orderBy")(this.filteredList,orderFields,reverse),this.setPage(1)}function getPagination(){return this.paginacion}function calculateNumPaginas(){this.paginacion.numPaginas=Math.ceil(this.paginacion.totalResultados/this.paginacion.registrosPorPagina)}return function(){return{set:set,getPage:getPage,setPage:setPage,setRegistrosPorPagina:setRegistrosPorPagina,filter:filter,cleanFilter:cleanFilter,order:order,getPagination:getPagination,calculateNumPaginas:calculateNumPaginas,list:[],filteredList:[],paginacion:{registrosPorPagina:10,paginaActual:1,primero:1,ultimo:1,totalResultados:0,numPaginas:0,listadoRegistrosPaginacion:[10,20,30]}}}}angular.module("WebBancoChile.paginator",[]).factory("Paginator",Paginator),Paginator.$inject=["$filter"]}(),function(){function perfilEjecutivoFactory($http,URL_API,CONTEXT_V360_CONSULTA){function getPerfilEjecutivo(rut){return $http.get(URL_API+CONTEXT_V360_CONSULTA+"/perfil-ejecutivo/"+rut)}return{getPerfilEjecutivo:getPerfilEjecutivo}}angular.module("WebBancoChile.perfilEjecutivo").factory("perfilEjecutivoFactory",perfilEjecutivoFactory),perfilEjecutivoFactory.$inject=["$http","URL_API","CONTEXT_V360_CONSULTA"]}(),function(){function perfilUsuarioFactory($http,URL_API){function getPerfilUsuario(){return $http.get(URL_API+"/perfil-usuario/perfil/usuario/session/")}var factory={getPerfilUsuario:getPerfilUsuario};return factory}angular.module("WebBancoChile.perfilusuario").factory("PerfilUsuarioFactory",perfilUsuarioFactory),perfilUsuarioFactory.$inject=["$http","URL_API"]}(),function(){function asideChequeraFactory(URL_API,$http,$q,CuentaService){function getDetalleChequera(filter){var deferred=$q.defer();return $http.get(URL_API+"/persona/consulta-cheques/cheques/por-rango",{params:filter}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getDetalleChequera:getDetalleChequera};return service}angular.module("WebBancoChile.servCheques").factory("AsideChequeraActivaFactory",asideChequeraFactory),asideChequeraFactory.$inject=["URL_API","$http","$q","CuentaService"]}(),function(){function chequeraFactory(URL_API,$http,$q,CuentaService){function getChequeras(filter){var deferred=$q.defer();return $http.get(URL_API+"/persona/consulta-cheques/chequeras/ultimas",{params:filter}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function getEstadosChequeras(){var deferred=$q.defer();return $http.get(URL_API+"/cheques-gestion/cheques/obtenerPosiblesCambiosEstadoChequera").success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function cambioEstadoChequera(filter,headers){var deferred=$q.defer();return $http({method:"POST",url:URL_API+"/cheques-gestion/cheques/cambioEstadoChequera",data:filter,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getChequeras:getChequeras,getEstadosChequeras:getEstadosChequeras,cambioEstadoChequera:cambioEstadoChequera};return service}angular.module("WebBancoChile.servCheques").factory("ChequeraFactory",chequeraFactory),chequeraFactory.$inject=["URL_API","$http","$q","CuentaService"]}(),function(){function chequesCobradosFactory(URL_API,$http,$q,CuentaService){function getChequesCobrados(filter){var deferred=$q.defer();return $http.get(URL_API+"/persona/consulta-cheques/cheques/cobrados",{params:filter}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getChequesCobrados:getChequesCobrados};return service}angular.module("WebBancoChile.servCheques").factory("ChequesCobradosFactory",chequesCobradosFactory),chequesCobradosFactory.$inject=["URL_API","$http","$q","CuentaService"]}(),function(){function colillasFactory(URL_API,$http,$q,CuentaService){function getChequerasByFiltro(cuenta,filtro,headers){var deferred=$q.defer();return $http({method:"POST",url:URL_API+"/cheques-gestion/cheques/obtenerChequerasByFiltro12c/"+cuenta,data:filtro,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function cambioEstadoColillas(body,headers){var deferred=$q.defer();return $http({method:"POST",url:URL_API+"/cheques-gestion/cheques/bloqueoDesbloqueoColilla",data:body,headers:headers}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function getDetalle(cuenta,serialPrimerTalonario){var deferred=$q.defer();return $http.get(URL_API+"/cheques-gestion/cheques/obtenerChequeraDetalle/"+cuenta+"/"+serialPrimerTalonario).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getChequerasByFiltro:getChequerasByFiltro,cambioEstadoColillas:cambioEstadoColillas,getDetalle:getDetalle};return service}angular.module("WebBancoChile.servCheques").factory("colillasFactory",colillasFactory),colillasFactory.$inject=["URL_API","$http","$q","CuentaService"]}(),function(){function asideDetalleChequeFactory(URL_API,$http,$q,$window,CuentaService){function getDetalleCheque(filter){var deferred=$q.defer();return $http.get(URL_API+"/persona/consulta-cheques/cheques/por-numero",{params:filter}).success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function getImagenCheque(filter){var deferred=$q.defer();return null===$window.localStorage.getItem("detalleChequesNumero")&&($window.localStorage.setItem("detalleChequesNumero","0"),$window.localStorage.setItem("detalleChequesCuenta","0"),$window.localStorage.setItem("detalleChequesReverso",""),$window.localStorage.setItem("detalleChequesAnverso",""),$window.localStorage.setItem("detalleChequesMimeType","")),parseInt($window.localStorage.getItem("detalleChequesNumero"),10)===filter.numeroCheque&&$window.localStorage.getItem("detalleChequesCuenta")===filter.cuenta?deferred.resolve({imagenChequeAnverso:$window.localStorage.getItem("detalleChequesAnverso"),imagenChequeReverso:$window.localStorage.getItem("detalleChequesReverso"),mimeType:$window.localStorage.getItem("detalleChequesMimeType")}):$http.get(URL_API+"/persona/consulta-cheques/cheques/imagen",{params:filter}).success(function(data){$window.localStorage.setItem("detalleChequesNumero",filter.numeroCheque),$window.localStorage.setItem("detalleChequesCuenta",filter.cuenta),$window.localStorage.setItem("detalleChequesReverso",data.imagenChequeReverso),$window.localStorage.setItem("detalleChequesAnverso",data.imagenChequeAnverso),$window.localStorage.setItem("detalleChequesMimeType",data.mimeType),deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getDetalleCheque:getDetalleCheque,getImagenCheque:getImagenCheque};return service}angular.module("WebBancoChile.servCheques").factory("AsideDetalleChequeFactory",asideDetalleChequeFactory),asideDetalleChequeFactory.$inject=["URL_API","$http","$q","$window","CuentaService"]}(),function(){function saldoFactory($http,$q,URL_API){function getFechaHoy(){var deferred=$q.defer();return $http.get(URL_API+"/consulta-producto-cliente/consulta/fechaHoy").success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}function getFechaServer(){var deferred=$q.defer();return $http.get(URL_API+"/consulta-producto-cliente/consulta/fechaHoyString").success(function(data){deferred.resolve(data)}).error(function(err){deferred.reject(CuentaService.errorHandler(err))}),deferred.promise}var service={getFechaHoy:getFechaHoy,getFechaServer:getFechaServer};return service}angular.module("WebBancoChile.servSaldosMvtosCuenta").factory("SaldoFactory",saldoFactory),saldoFactory.$inject=["$http","$q","URL_API"]}(),function(){function bloqueoCuentaLineaService($q,bloqueoCuentaLineaFactory){var serv=this;serv.$q=$q,serv.bloqueoCuentaLineaFactory=bloqueoCuentaLineaFactory}angular.module("WebBancoChile.bloqueoCuentaLinea").service("bloqueoCuentaLineaService",bloqueoCuentaLineaService),bloqueoCuentaLineaService.$injector=["$q","bloqueoCuentaLineaFactory"],bloqueoCuentaLineaService.prototype.obtenerDetalleProducto=function(numProducto,tipoProducto){var serv=this;if(angular.isDefined(numProducto)&&null!==numProducto){var deferred=serv.$q.defer();return serv.bloqueoCuentaLineaFactory.getDetalleCuentaLinea(numProducto,tipoProducto).then(function(rs){serv.detalleCtaLinea=rs.data;var response={data:serv.detalleCtaLinea};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},bloqueoCuentaLineaService.prototype.obtenerRazonBloqueo=function(){var serv=this,deferred=serv.$q.defer();return serv.bloqueoCuentaLineaFactory.getRazonBloqueo().then(function(rs){serv.razonBloqueo=rs.data;var response={data:serv.razonBloqueo};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise},bloqueoCuentaLineaService.prototype.obtenerBloqueoCuentaLinea=function(numProducto,tipoProducto,nuevoEstadoProducto){var serv=this;if(angular.isDefined(numProducto)&&null!==numProducto&&""!==numProducto){var deferred=serv.$q.defer();return serv.bloqueoCuentaLineaFactory.getBloqueoCuentaLinea(numProducto,tipoProducto,nuevoEstadoProducto).then(function(rs){serv.estadoBloqueo=rs.data;var response={data:serv.estadoBloqueo};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},bloqueoCuentaLineaService.prototype.obtenerBloqueoCuentaMotivoCliente=function(objBloqueoCliente){var serv=this;if(angular.isDefined(objBloqueoCliente)&&null!==objBloqueoCliente&&""!==objBloqueoCliente){var deferred=serv.$q.defer();return serv.bloqueoCuentaLineaFactory.getBloqueoCuentaCliente(objBloqueoCliente).then(function(rs){serv.estadoBloqueoCliente=rs.data;var response={data:serv.estadoBloqueoCliente};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)}}(),function(){function cajaDescargaDocumentoService(cajaDescargaDocumentoFactory,$q){function getPdf(URL,data,cancelar){var defer=$q.defer();return cajaDescargaDocumentoFactory.getPdf(URL,data,cancelar).then(function(response){defer.resolve(response)},function(error){defer.reject(error)}),defer.promise}function cancelar(namespace){namespace=namespace||"default",angular.forEach(vm.promisesToReject,function(promises,promiseNamespace){vm.canceler[promiseNamespace]&&("default"===namespace||namespace===promiseNamespace)&&(vm.canceler[promiseNamespace].resolve(),vm.inited[promiseNamespace]=!1,angular.forEach(promises,function(defer){defer.reject()}),vm.promisesToReject[promiseNamespace]=[])})}function getPromise(defer,namespace){return namespace=namespace||"default",vm.promisesToReject[namespace]||(vm.promisesToReject[namespace]=[],vm.canceler[namespace]=null,vm.inited[namespace]=!1),defer&&vm.promisesToReject[namespace].push(defer),vm.inited[namespace]||(vm.canceler[namespace]=$q.defer(),vm.inited[namespace]=!0),vm.canceler[namespace]}return vm=this,vm.inited={},vm.canceler={},vm.promisesToReject={},{getPdf:getPdf,cancelar:cancelar,getPromise:getPromise}}angular.module("WebBancoChile.cajaDescargaDocumento").service("cajaDescargaDocumentoService",cajaDescargaDocumentoService),cajaDescargaDocumentoService.$inject=["cajaDescargaDocumentoFactory","$q"];var vm}(),function(){function errorHandlerService($log,TIPOS_ERROR){return{gestionarError:function(err,msgGenerico){var objMostrarError={};return err&&err.data&&err.data.catalogMessage&&0!==err.data.errorCode&&"0"!==err.data.errorCode&&"900006"!==err.data.errorCode?objMostrarError.message=err.data.catalogMessage:objMostrarError.generico=!0,objMostrarError.generico&&(angular.isDefined(msgGenerico)&&null!=msgGenerico&&msgGenerico.length>0?objMostrarError.message=msgGenerico:objMostrarError.message="Servicio no responde, vuelva a intentar."),objMostrarError},getTipoError:function(tipoInput){for(var keys=Object.keys(TIPOS_ERROR),i=0;i<keys.length;i++){var tipoError=TIPOS_ERROR[keys[i]];if(tipoError.tipo===tipoInput)return tipoError}return TIPOS_ERROR.ERROR}}}angular.module("WebBancoChile.errorHandler").service("errorHandlerService",errorHandlerService),errorHandlerService.$inject=["$log","TIPOS_ERROR"]}(),function(){function fechaUtilService(fechaUtilFactory,$q,$filter){var serv=this;serv.$q=$q,serv.$filter=$filter,serv.fechaUtilFactory=fechaUtilFactory}angular.module("WebBancoChile.fechaUtil").service("fechaUtilService",fechaUtilService),fechaUtilService.$injector=["fechaUtilFactory","$q","$filter"],fechaUtilService.prototype.getFechaActual=function(conHoras,numDias){var serv=this,deferred=serv.$q.defer();return serv.fechaUtilFactory.getFechaActual().then(function(rs){var fecha=null;return fecha=conHoras?serv.parseFechaHora(rs.data):serv.parseFecha(rs.data),angular.isDefined(numDias)&&angular.isNumber(numDias)&&(fecha=serv.addDays(fecha,numDias)),deferred.resolve(fecha)},function(err){return deferred.reject(err)}),deferred.promise},fechaUtilService.prototype.getFechaHabil=function(fechaBase,numDias){var serv=this,deferred=serv.$q.defer();return serv.fechaUtilFactory.getFechaHabil(fechaBase,numDias).then(function(rs){var fecha=serv.parse(rs.data);return deferred.resolve(fecha)},function(err){return deferred.reject(err)}),deferred.promise},fechaUtilService.prototype.parse=function(fecha){if(!fecha||!fecha.dia)return null;var s=fecha.dia.split("-");return new Date(parseInt(s[2],10),parseInt(s[0],10)-1,parseInt(s[1],10))},fechaUtilService.prototype.parseFecha=function(fecha){return this.parse(fecha)},fechaUtilService.prototype.parseFechaHora=function(fecha){if(!fecha||!fecha.dia)return null;var fechaDate=this.parse(fecha);if(!fecha.hora)return fechaDate;var h=fecha.hora.split(":");return fechaDate.setHours(parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)),fechaDate},fechaUtilService.prototype.convertToFecha=function(fechaDate){var serv=this;if(!fechaDate)return null;var fecha={};return fecha.dia=serv.$filter("date")(fechaDate,"MM-dd-yyyy"),fecha.hora=serv.$filter("date")(fechaDate,"HH:mm:ss"),fecha},fechaUtilService.prototype.convertToFechaGMT=function(fechaDate){var serv=this;if(!fechaDate)return null;var fecha={};return fecha.dia=serv.$filter("date")(fechaDate,"MM-dd-yyyy"),fecha.hora=serv.$filter("date")(fechaDate,"HH:mm:ss"),fecha.gmt=serv.$filter("date")(fechaDate,"Z"),fecha},fechaUtilService.prototype.isAnioBisiesto=function(fechaDate){var year=fechaDate.getFullYear();return year%4===0&&year%100!==0||year%400===0},fechaUtilService.prototype.getDiasMeses=function(fechaDate){var month=fechaDate.getMonth();return[31,this.isAnioBisiesto(fechaDate)?29:28,31,30,31,30,31,31,30,31,30,31][month]},fechaUtilService.prototype.addMonths=function(fechaDate,numMonths){var dia=fechaDate.getDate(),mes=fechaDate.getMonth()+numMonths,anio=fechaDate.getFullYear();mes>11?(mes-=12,anio+=1):0>mes&&(mes=12+mes,anio-=1);var fechaFinal=new Date(anio,mes,1),diaMaxMes=this.getDiasMeses(fechaFinal);return dia=Math.min(dia,diaMaxMes),fechaFinal.setDate(dia),fechaFinal},fechaUtilService.prototype.addDays=function(fechaDate,numDays){var dia=fechaDate.getDate()+numDays,mes=fechaDate.getMonth(),anio=fechaDate.getFullYear(),fechaFinal=new Date(anio,mes,dia),diaMaxMes=this.getDiasMeses(fechaFinal);if(dia>diaMaxMes)mes+=1,mes>11&&(anio+=1);else if(0>dia){0===mes?(anio-=1,mes=11):mes-=1;var fechaMesAnterior=new Date(anio,mes,dia),diaMaxMesAnterior=this.getDiasMeses(fechaMesAnterior);dia=dia+diaMaxMesAnterior+1,fechaFinal=new Date(anio,mes,dia)}return fechaFinal},fechaUtilService.prototype.addYears=function(fechaDate,numAnios){var dia=fechaDate.getDate(),mes=fechaDate.getMonth(),anio=fechaDate.getFullYear()+numAnios,fechaFinal=new Date(anio,mes,dia);return fechaFinal},fechaUtilService.prototype.isFechaValida=function(fechaStr){if(angular.isUndefined(fechaStr)||!fechaStr||""===fechaStr)return!1;var patron=/\d{8}/g,valorInput=fechaStr.replace(/\//g,"");if(patron.test(valorInput)){var dia=valorInput.substring(0,2);dia=parseInt(dia,10);var mes=valorInput.substring(2,4);mes=parseInt(mes,10);var anio=valorInput.substring(4);anio=parseInt(anio,10);var fechaDate=new Date(anio,mes-1,dia),diaDate=fechaDate.getDate(),mesDate=fechaDate.getMonth()+1,anioDate=fechaDate.getFullYear();return dia===diaDate&&mes===mesDate&&anio===anioDate}return!1},fechaUtilService.prototype.stringToDate=function(fechaStr,separador){if(angular.isUndefined(fechaStr)||!fechaStr||""===fechaStr)return null;var patron=/\d{8}/g,valorInput=fechaStr;if("-"===separador?valorInput=fechaStr.replace(/-/g,""):separador&&"/"!==separador||(valorInput=fechaStr.replace(/\//g,"")),patron.test(valorInput)){var dia=valorInput.substring(0,2);dia=parseInt(dia,10);var mes=valorInput.substring(2,4);mes=parseInt(mes,10);var anio=valorInput.substring(4);return anio=parseInt(anio,10),new Date(anio,mes-1,dia)}return null}}(),function(){function alarmaEjecutivoService(alarmaEjecutivoFactory){var serv=this;serv.alarmaEjecutivoFactory=alarmaEjecutivoFactory}angular.module("WebBancoChile.alarmaEjecutivo").service("alarmaEjecutivoService",alarmaEjecutivoService),alarmaEjecutivoService.$injector=["alarmaEjecutivoFactory"],alarmaEjecutivoService.prototype.obtenerAlarmasPendientes=function(){var serv=this;return serv.alarmaEjecutivoFactory.obtenerAlarmasPendientes()},alarmaEjecutivoService.prototype.actualizarAlarma=function(alarma){var serv=this;return serv.alarmaEjecutivoFactory.actualizarAlarma(alarma)}}(),function(){function headerService(indicadoresFinancierosFactory,infoFinancieraService,infoClienteService,PerfilUsuarioService,contextoCliente,busquedaRutService){return{indicadoresFinancierosFactory:indicadoresFinancierosFactory,infoFinancieraService:infoFinancieraService,infoClienteService:infoClienteService,contextoCliente:contextoCliente,busquedaRutService:busquedaRutService,PerfilUsuarioService:PerfilUsuarioService}}angular.module("WebBancoChile.headerInput").service("headerService",headerService),headerService.$inject=["indicadoresFinancierosFactory","infoFinancieraService","infoClienteService","PerfilUsuarioService","contextoCliente","busquedaRutService"]}(),function(){function busquedaRutService(busquedaRutFactory,$q){var serv=this;serv.$q=$q,serv.busquedaRutFactory=busquedaRutFactory,serv.busquedaRut=angular.copy(serv.estructure)}angular.module("WebBancoChile.headerInput").service("busquedaRutService",busquedaRutService),busquedaRutService.$injector=["busquedaRutFactory","$q"],busquedaRutService.prototype.busquedasReciente=function(cant){var serv=this;return serv.busquedaRutFactory.busquedasReciente(cant)},busquedaRutService.prototype.busquedasRecurrentes=function(cant){var serv=this;return serv.busquedaRutFactory.busquedasRecurrentes(cant)}}(),function(){function infoClienteService(infoClienteFactory,$q){var serv=this;serv.$q=$q,serv.infoClienteFactory=infoClienteFactory,serv.estructure={rut:null,dataCliente:null,dataClienteFull:null,dataCuentas:null,dataCorreos:null,dataDirecciones:null,dataProductosServicios:null,dataCuentasCliente:null},serv.infoCliente=angular.copy(serv.estructure)}angular.module("WebBancoChile.infoCliente").service("infoClienteService",infoClienteService),infoClienteService.$injector=["infoClienteFactory","$q"],infoClienteService.prototype.setActiveRut=function(paramRut){var serv=this;if(void 0!==paramRut){var rut=serv.infoCliente.rut;rut!==paramRut&&(serv.infoCliente=angular.copy(serv.estructure),serv.infoCliente.rut=paramRut)}},infoClienteService.prototype.getInfoCliente=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.infoCliente.dataCliente;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoCliente(rut).then(function(rs){serv.infoCliente.dataCliente=rs.data;var response={data:serv.infoCliente.dataCliente,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.cleanActiveRut=function(){var serv=this;serv.infoCliente=angular.copy(serv.estructure);var cleanCliente={rutCliente:null,nombre:null,apellidoPaterno:null,apellidoMaterno:null,oficinaEjecutivo:null,codigoEjecutivo:null,segmento:null,marca:null,banca:null,clasificacionRiesgo:null,actividadEconomica:null,categoria:null,codigoSegmento:null,codigoMarca:null,codigoBanca:null,codigoActividadEconomica:null,tipoCliente:null,sexo:null,codigoCategoria:null,emailParticularCliente:null,emailComercialCliente:null};return serv.infoCliente.dataCliente=angular.copy(cleanCliente),serv.infoCliente},infoClienteService.prototype.getCuentasCliente=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCuentas=serv.infoCliente.dataCuentas;if(void 0!==datosCuentas&&null!==datosCuentas){var respond={data:datosCuentas,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoCuentas(rut).then(function(rs){serv.infoCliente.dataCuentas=rs.data;var response={data:serv.infoCliente.dataCuentas,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getCorreosCliente=function(tipoCliente){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCorreos=serv.infoCliente.dataCorreos;if(void 0!==datosCorreos&&null!==datosCorreos){var respond={data:datosCorreos,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoCorreos(rut,tipoCliente).then(function(rs){serv.infoCliente.dataCorreos=rs.data;var response={data:serv.infoCliente.dataCorreos,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getDireccionesCliente=function(tipoCliente){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosDirecciones=serv.infoCliente.dataDirecciones;if(void 0!==datosDirecciones&&null!==datosDirecciones){var respond={data:datosDirecciones,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoDirecciones(rut,tipoCliente).then(function(rs){serv.infoCliente.dataDirecciones=rs.data;var response={data:serv.infoCliente.dataDirecciones,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getInfoClienteFull=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.infoCliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoClienteFull(rut).then(function(rs){serv.infoCliente.dataClienteFull=rs.data;var response={data:serv.infoCliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getInfoClienteFullGuardandoSesion=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.infoCliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoClienteFullGuardandoSesion(rut).then(function(rs){serv.infoCliente.dataClienteFull=rs.data;var response={data:serv.infoCliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getInfoClienteFullGuardadoBusqueda=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosCliente=serv.infoCliente.dataClienteFull;if(void 0!==datosCliente&&null!==datosCliente){var respond={data:datosCliente,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoClienteFullGuardadoBusqueda(rut).then(function(rs){serv.infoCliente.dataClienteFull=rs.data;var response={data:serv.infoCliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getInfoClienteFullDesdeSesion=function(){var serv=this,deferred=serv.$q.defer();return serv.infoClienteFactory.getInfoClienteFullEnSesion().then(function(rs){serv.infoCliente.dataClienteFull=rs.data;var response={data:serv.infoCliente.dataClienteFull,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise},infoClienteService.prototype.getProductosServicios=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var data=serv.infoCliente.dataProductosServicios;if(void 0!==data&&null!==data){var respond={data:data,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getProductoServicio(rut).then(function(rs){serv.infoCliente.dataProductosServicios=rs.data;var response={data:serv.infoCliente.dataProductosServicios,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)},infoClienteService.prototype.getConsultaCuentasCliente=function(){var serv=this,rut=serv.infoCliente.rut;if(void 0!==rut&&""!==rut&&null!==rut){var data=serv.infoCliente.dataCuentasCliente;if(void 0!==data&&null!==data){var respond={data:data,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.infoClienteFactory.getConsultarCuentasCliente(rut).then(function(rs){serv.infoCliente.dataCuentasCliente=rs.data;var response={data:serv.infoCliente.dataCuentasCliente,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)}}(),function(){function infoFinancieraService(infoFinancieraFactory,$q){var serv=this;serv.$q=$q,serv.infoCliente360Factory=infoFinancieraFactory,serv.estructure={rut:null,name:null,context:null,datosSBIF:null,datosInfoResumen:null,datosCuentasCorrienteResumen:null,datosDepositoPlazoResumen:null,datosAhorrosResumen:null,datosAhorrosFondosMutuosResumen:null,datosUltimoDeposito:null},serv.indicadores={dolarObservado:0,uf:0},serv.infoFinanciera=angular.copy(serv.estructure)}angular.module("WebBancoChile.infoFinancieraCliente").service("infoFinancieraService",infoFinancieraService),infoFinancieraService.$injector=["infoCliente360Factory","$q"],infoFinancieraService.prototype.cleanActiveRut=function(){var serv=this;return serv.infoFinanciera=angular.copy(serv.estructure),serv.infoFinanciera},infoFinancieraService.prototype.setActiveRut=function(paramRut,paramName,context){var serv=this;if(void 0!==paramRut){var rut=serv.infoFinanciera.rut;rut!==paramRut&&(serv.infoFinanciera=angular.copy(serv.estructure),serv.infoFinanciera.rut=paramRut,serv.infoFinanciera.name=paramName,serv.infoFinanciera.context=context)}},infoFinancieraService.prototype.getDatosSBIF=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosSBIF=serv.infoFinanciera.datosSBIF;if(void 0!==datosSBIF&&null!==datosSBIF){var respond={data:datosSBIF,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getSBIF(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getDatosInfoResumen=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosResumen=serv.infoFinanciera.datosInfoResumen;if(void 0!==datosResumen&&null!==datosResumen){var respond={data:datosResumen,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getFinancieraResumen(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getCuentaCorrienteResumen=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosResumen=serv.infoFinanciera.datosCuentasCorrienteResumen;if(void 0!==datosResumen&&null!==datosResumen){var respond={data:datosResumen,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getCuentaCorrienteResumen(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getDepositoPlazoResumen=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosResumen=serv.infoFinanciera.datosDepositoPlazoResumen;if(void 0!==datosResumen&&null!==datosResumen){var respond={data:datosResumen,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getDepositoPlazoResumen(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getAhorrosResumen=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosInfoResumen=serv.infoFinanciera.datosAhorrosResumen;if(void 0!==datosInfoResumen&&null!==datosInfoResumen){var respond={data:datosInfoResumen,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getAhorrosResumen(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getAhorrosFondosMutuosResumen=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosInfoResumen=serv.infoFinanciera.datosAhorrosFondosMutuosResumen;if(void 0!==datosInfoResumen&&null!==datosInfoResumen){var respond={data:datosInfoResumen,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getAhorrosFondosMutuosResumen(rut)}return serv.$q.when(null)},infoFinancieraService.prototype.getDatosUltimoDeposito=function(){var serv=this,rut=serv.infoFinanciera.rut;if(void 0!==rut&&""!==rut&&null!==rut){var datosUltimoDeposito=serv.infoFinanciera.datosUltimoDeposito;if(void 0!==datosUltimoDeposito&&null!==datosUltimoDeposito){var respond={data:datosUltimoDeposito,cache:!0};return serv.$q.when(respond)}return serv.infoCliente360Factory.getUltimoDeposito(rut)}return serv.$q.when(null)}}(),function(){function ordenNoPagoSrv(ALERTA_ONP,$filter){function permisosVisualizacion(userProfile,grupo){
var obj={permisos:{consultar:{},ejecutar:{}},informacion:{},algunPermisoEjecucion:!1};return obj.permisos.consultar[grupo]=$filter("esValidoPermiso")(userProfile.permisos,["CONSULTAR_ONP"]),obj.permisos.ejecutar[grupo]=$filter("esValidoPermiso")(userProfile.permisos,[grupo+"_ONP"]),obj.permisos.consultar.CONSULTAR_ONP&&!obj.permisos.ejecutar[grupo+"_ONP"]&&(obj.informacion=ALERTA_ONP.usuarioConRestriccion),obj.permisos.ejecutar[grupo]&&(obj.algunPermisoEjecucion=!0),obj.informacion=obj.algunPermisoEjecucion?obj.informacion:ALERTA_ONP.usuariosSoloConsulta,obj}var service={permisosVisualizacion:permisosVisualizacion};return service}angular.module("WebBancoChile.ordenNoPago").factory("ordenNoPagoSrv",ordenNoPagoSrv),ordenNoPagoSrv.$inject=["ALERTA_ONP","$filter"]}(),function(){function radioTabService(){this.TABS={},this.selectedRadioTabState=""}angular.module("WebBancoChile.ordenNoPago").service("radioTabService",radioTabService),radioTabService.$inject=[],radioTabService.prototype.setTABS=function(tabs){var serv=this;serv.TABS=tabs},radioTabService.prototype.setActiveState=function(tab){var serv=this;serv.selectedRadioTabState=tab.state},radioTabService.prototype.setActiveTab=function(tab,tabs){var vm=this;return vm.desativeAllTabs(tabs),tab.active=!0,tab},radioTabService.prototype.desativeAllTabs=function(tabs){var keys=Object.keys(tabs);angular.forEach(keys,function(value){tabs[value].active=!1})}}(),function(){function perfilEjecutivoService($q,perfilEjecutivoFactory){var serv=this;serv.$q=$q,serv.perfilEjecutivoFactory=perfilEjecutivoFactory,serv.rut=null}angular.module("WebBancoChile.perfilEjecutivo").service("perfilEjecutivoService",perfilEjecutivoService),perfilEjecutivoService.$inject=["$q","perfilEjecutivoFactory"],perfilEjecutivoService.prototype.isExistCache=function(rut,key){var serv=this;return rut===serv.rut&&serv[key]},perfilEjecutivoService.prototype.resetCache=function(rut,key){var serv=this;null===rut||rut!==serv.rut?(serv.rut=null,serv.perfilEjecutivo=null):serv[key]=null},perfilEjecutivoService.prototype.getPerfilEjecutivo=function(rut){var serv=this;if(angular.isDefined(rut)&&""!==rut&&null!==rut){if(serv.isExistCache(rut,"perfilEjecutivo")){var respond={data:serv.perfilEjecutivo,cache:!0};return serv.$q.when(respond)}serv.resetCache(rut,"perfilEjecutivo");var deferred=serv.$q.defer();return serv.perfilEjecutivoFactory.getPerfilEjecutivo(rut).then(function(rs){serv.rut=rut,serv.perfilEjecutivo=rs.data;var response={data:serv.perfilEjecutivo,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}return serv.$q.when(null)}}(),function(){function perfilUsuarioService(PerfilUsuarioFactory,$q,$window,PERMISSIONS,JWTFactory){function error401(defer){return function(){defer.reject({code:401})}}function error(defer){return function(err){var errorCode={code:500};null!==err&&null!==err.data&&"900006"===err.data.errorCode&&(errorCode.code=0),defer.reject(errorCode)}}function thenSuccess(defer){return function(){defer.resolve(getPerfilActual())}}function getPerfilUsuario(){return perfilUsuarioFactory.getPerfilUsuario()}function getPerfilActual(){return perfilActual}function loadPerfilActual(){perfilActual=JSON.parse(localStorage.getItem("perfilusuario"))}function setPerfilActual(data){perfilActual=data}function perfilIsLoaded(){return angular.isDefined(perfilActual)&&null!==perfilActual?!0:!1}function getPerfilSession(){if(perfilIsLoaded())return $q.when(perfilActual);var deferred=$q.defer();return getPerfilUsuario().then(function(response){return setPerfilActual(response.data),deferred.resolve(perfilActual)},function(err){return deferred.reject(err)}),deferred.promise}function getUserProfile(){var defer=$q.defer();return angular.isDefined($window.localStorage.token)?getPerfilSession().then(thenSuccess(defer),error(defer)):JWTFactory.getToken().success(function(data){$window.localStorage.token=data.token,getPerfilSession().then(thenSuccess(defer),error(defer))}).error(error401(defer)),defer.promise}function isAuthorizer(stateName,userRoles){return PERMISSIONS&&userRoles&&PERMISSIONS[stateName]?0===PERMISSIONS[stateName].length||0===userRoles.length?$q.reject({code:403}):_.every(PERMISSIONS[stateName],function(rol){return!(userRoles.indexOf(rol)>=0)})?$q.reject({code:403}):$q.when():$q.reject({code:403})}var perfilActual,service={getPerfilUsuario:getPerfilUsuario,getPerfilActual:getPerfilActual,perfilIsLoaded:perfilIsLoaded,loadPerfilActual:loadPerfilActual,setPerfilActual:setPerfilActual,getPerfilSession:getPerfilSession,getUserProfile:getUserProfile,isAuthorizer:isAuthorizer},perfilUsuarioFactory=PerfilUsuarioFactory;return service}angular.module("WebBancoChile.perfilusuario").service("PerfilUsuarioService",perfilUsuarioService),perfilUsuarioService.$inject=["PerfilUsuarioFactory","$q","$window","PERMISSIONS","JWTFactory"]}(),function(){function chequesService($q,ChequeraFactory){function stringToDate(_date,_format,_delimiter){try{var formatLowerCase=_format.toLowerCase(),formatItems=formatLowerCase.split(_delimiter),dateItems=_date.split(_delimiter),monthIndex=formatItems.indexOf("mmm"),dayIndex=formatItems.indexOf("dd"),yearIndex=formatItems.indexOf("yyyy"),month=dateItems[monthIndex],formatedDate=new Date(dateItems[dayIndex]+" "+month+" "+dateItems[yearIndex]);return formatedDate}catch(err){return"Invalid date"!==moment(_date).utc().format("DD/MM/YYYY")?moment(_date).utc().format("DD/MM/YYYY"):""}}function getEstadosChequeras(){var serv=this,tmp=serv.listaValores.estadosChequeras;if(void 0!==tmp&&null!==tmp){var respond={data:tmp,cache:!0};return serv.$q.when(respond)}var deferred=serv.$q.defer();return serv.chequeraFactory.getEstadosChequeras().then(function(rs){serv.listaValores.estadosChequeras=rs;var response={data:serv.listaValores.estadosChequeras,cache:!0};return deferred.resolve(response)},function(err){return deferred.reject(err)}),deferred.promise}var serv=this;serv.$q=$q,serv.stringToDate=stringToDate,serv.getEstadosChequeras=getEstadosChequeras,serv.changeStatusBloqueoDesbloqueo=!1,serv.changeStatusChequera=!1,serv.chequeraFactory=ChequeraFactory,serv.estructure={estadosChequeras:null},serv.listaValores=angular.copy(serv.estructure)}angular.module("WebBancoChile.servCheques").service("chequesService",chequesService),chequesService.$inject=["$q","ChequeraFactory"]}(),function(){function bloqueoCuentaLineaCtrl($scope,$window,$filter,bloqueoCuentaLineaService,errorHandlerService,TIPO_BLOQUEO){var vm=this;vm.$scope=$scope,vm.$window=$window,vm.$filter=$filter,vm.bloqueoCuentaLineaService=bloqueoCuentaLineaService,vm.errorHandlerService=errorHandlerService,vm.TIPO_BLOQUEO=TIPO_BLOQUEO,vm.pressConfirmar=!1,vm.pasoOne=!0,vm.pasoTwo=!1,vm.confirmacionBloq=null,vm.loading={detalleProducto:!0,razonBloqueo:!0,bloqueoCuenta:!0},vm.error={},vm.esconderPasoOne=!1,vm.resetForm()}angular.module("WebBancoChile.bloqueoCuentaLinea").controller("bloqueoCuentaLineaCtrl",bloqueoCuentaLineaCtrl),bloqueoCuentaLineaCtrl.$inject=["$scope","$window","$filter","bloqueoCuentaLineaService","errorHandlerService","TIPO_BLOQUEO"],bloqueoCuentaLineaCtrl.prototype.resetForm=function(){var vm=this;vm.obtieneDetalleProducto()},bloqueoCuentaLineaCtrl.prototype.confirmarBloqueo=function(){var vm=this;vm.error={},vm.pressConfirmar=!0,vm.formBloqCuenta.$valid&&vm.validaChecksTipoBloqueo()&&("cliente"!==vm.motivoBloq?vm.bloquearCuentaLinea():vm.bloquearCuentaMotivoCliente())},bloqueoCuentaLineaCtrl.prototype.validaChecksTipoBloqueo=function(){var vm=this,resp=!1;return angular.isDefined(vm.formBloqCuenta.motivoBloqueo)&&("cliente"===vm.formBloqCuenta.motivoBloqueo.$viewValue?(vm.formBloqCuenta.tipoBloqueoCargo.$viewValue||vm.formBloqCuenta.tipoBloqueoAbono.$viewValue||vm.formBloqCuenta.tipoBloqueoChequera.$viewValue)&&(resp=!0):resp=!0),resp},bloqueoCuentaLineaCtrl.prototype.inhabilitaBotonBloquear=function(){var vm=this,resp=!1;return((vm.formBloqCuenta.$invalid||!vm.validaChecksTipoBloqueo())&&vm.pressConfirmar||vm.loading.bloqueoCuenta)&&(resp=!0),resp},bloqueoCuentaLineaCtrl.prototype.bloquearCuentaLinea=function(){var vm=this,subEstado=null;"interno"===vm.motivoBloq?subEstado=vm.TIPO_BLOQUEO.INTERNO.subEstado:"judicial"===vm.motivoBloq&&(subEstado=vm.TIPO_BLOQUEO.JUDICIAL.subEstado),vm.loading={bloqueoCuenta:!0},vm.bloqueoCuentaLineaService.obtenerBloqueoCuentaLinea(vm.objetoprod.numProducto,vm.tipoprod,subEstado).then(function(rs){vm.bloqueoExitoso=rs.data,vm.mensajeFinalBloqueo="cuenta"===vm.tipoprod?"Cuenta Corriente "+vm.objetoprod.numProducto:"Línea de Crédito "+vm.objetoprod.numProducto,vm.loading.bloqueoCuenta=!1,vm.pasoOne=!1,vm.pasoTwo=!0},function(err){vm.loading.bloqueoCuenta=!1,vm.error.bloqueoCuenta=vm.errorHandlerService.gestionarError(err)})},bloqueoCuentaLineaCtrl.prototype.bloquearCuentaMotivoCliente=function(){var vm=this,objBloqueoCliente={cuenta:vm.objetoprod.numProducto,uDFMotivoBloqueo:vm.comboRazonSelected.codigo,bloqueoDeCargo:vm.comboRazonSelected.bloqueaCargo?"Y":"N",bloqueoDeAbono:vm.comboRazonSelected.bloqueaAbono?"Y":"N",bloqueoEntregaChequera:vm.comboRazonSelected.bloqueaEntregaChequera?"Y":"N"};vm.loading={bloqueoCuenta:!0},vm.bloqueoCuentaLineaService.obtenerBloqueoCuentaMotivoCliente(objBloqueoCliente).then(function(rs){vm.bloqueoClienteExitoso=rs.data;var productoFormateado=vm.$filter("formatearProductos")(vm.objetoprod.numProducto,vm.tipoprod);vm.mensajeFinalBloqueo="cuenta"===vm.tipoprod?"Cuenta Corriente "+productoFormateado:"Línea de Crédito "+productoFormateado,vm.loading.bloqueoCuenta=!1,vm.pasoOne=!1,vm.pasoTwo=!0},function(err){vm.loading.bloqueoCuenta=!1,vm.error.bloqueoCuenta=vm.errorHandlerService.gestionarError(err)})},bloqueoCuentaLineaCtrl.prototype.limpiaErrores=function(){var vm=this;vm.error={},vm.confirmacionBloq=!1,vm.pressConfirmar=!1,"cliente"===vm.motivoBloq&&(vm.formBloqCuenta.tipoBloqueoCargo.$error={},vm.formBloqCuenta.tipoBloqueoAbono.$error={},vm.formBloqCuenta.tipoBloqueoChequera.$error={})},bloqueoCuentaLineaCtrl.prototype.obtieneDetalleProducto=function(){var vm=this;vm.error={},vm.loading={detalleProducto:!0},vm.bloqueoCuentaLineaService.obtenerDetalleProducto(vm.objetoprod.numProducto,vm.tipoprod).then(function(rs){vm.productoActual=rs.data,vm.validaCondicionesParaBloqueo(),vm.loading.detalleProducto=!1,vm.esconderPasoOne=!1},function(err){vm.loading.detalleProducto=!1,vm.error.detalleProducto=vm.errorHandlerService.gestionarError(err),vm.esconderPasoOne=!0})},bloqueoCuentaLineaCtrl.prototype.obtieneRazonBloqueo=function(){var vm=this;vm.loading={razonBloqueo:!0},vm.bloqueoCuentaLineaService.obtenerRazonBloqueo().then(function(rs){vm.razonBloqueo=rs.data,vm.cargaComboRazonBloqueo()},function(err){vm.error.razonBloqueo=vm.errorHandlerService.gestionarError(err)}).then(function(){vm.loading.razonBloqueo=!1})},bloqueoCuentaLineaCtrl.prototype.cargaComboRazonBloqueo=function(){var vm=this;vm.comboRazonSelected=null,vm.comboRazon=vm.llenaListaRazonBloqueo(vm.razonBloqueo)},bloqueoCuentaLineaCtrl.prototype.llenaListaRazonBloqueo=function(listaARecorrer){var listaSalida=[];return angular.forEach(listaARecorrer,function(value){listaSalida.push({codigo:value.codigo,descripcion:value.descripcion,bloqueaCargo:value.bloqueaCargo,bloqueaAbono:value.bloqueaAbono,bloqueaEntregaChequera:value.bloqueaEntregaChequera})}),listaSalida},bloqueoCuentaLineaCtrl.prototype.validaCondicionesParaBloqueo=function(){var vm=this;if("Vigente o Activo"===vm.objetoprod.estado&&(vm.productoActual.indicadorBloqueo||vm.productoActual.indicadorBloqueoCliente)?vm.productoActual.subEstadoCuenta.descripcion="En proceso de bloqueo":vm.productoActual.subEstadoCuenta.descripcion=vm.objetoprod.estado,vm.productoActual.indicadorBloqueo){if("NRNJ"===vm.productoActual.subEstadoCuenta.codigo&&(vm.motivosHabilitados={interno:!1,judicial:!0,cliente:!1}),"NRJB"===vm.productoActual.subEstadoCuenta.codigo){var producto=vm.tipoprod="cuenta";vm.mensajeProductoBloqueado={value:!0,message:"La "+producto+" ya se encuentra bloqueada"}}}else vm.productoActual.indicadorBloqueoCliente?vm.motivosHabilitados={interno:!0,judicial:!0,cliente:!1}:vm.motivosHabilitados={interno:!0,judicial:!0,cliente:!0}}}(),function(){function cajaDescargaDocumentoCtrl($scope,cajaDescargaDocumentoService,$interval,$q){var vm=this;$scope.inicial=!0,$scope.proceso=!1,$scope.success=!1,$scope.error=!1,$scope.pause=!1,$scope.counter=0;var increaseCounter=function(){$scope.counter<=100?$scope.counter=$scope.counter+1:$scope.counter=0};$interval(increaseCounter,50,500),vm.cancelar=function(idPromesa){cajaDescargaDocumentoService.cancelar("descarga"+idPromesa)},vm.descargarPdf=function(){var defer=$q.defer(),cancel=cajaDescargaDocumentoService.getPromise(defer,"descarga"+$scope.config.id);$scope.success&&($scope.success=!1,$scope.counter=0,$scope.error=!1,$scope.pause=!1),$scope.inicial=!1,$scope.proceso=!0,$scope.error=!1,$scope.pause=!1,cajaDescargaDocumentoService.getPdf($scope.config.url,$scope.config.jsonData,cancel).then(function(response){$scope.counter<=100&&($scope.counter=100);var blob=new Blob([response.data],{type:"application/pdf"});saveAs(blob,$scope.config.nombrePdf),$scope.proceso=!1,$scope.success=!0,$scope.error=!1},function(response){$scope.proceso=!1,$scope.success=!1,-1===response.status?$scope.pause=!0:$scope.error=!0})}}angular.module("WebBancoChile.cajaDescargaDocumento").controller("cajaDescargaDocumentoCtrl",cajaDescargaDocumentoCtrl),cajaDescargaDocumentoCtrl.$inject=["$scope","cajaDescargaDocumentoService","$interval","$q"]}(),function(){function modalAsideCtrl($modalInstance,$sce,aside){var vm=this;"listaDatos"===aside.template?vm.listaDatos=aside.dataList:"informacion"===aside.template?vm.informacionHtml=$sce.trustAsHtml(aside.infoHtml):vm.aside=aside,vm.titulo=aside.title,vm.cerrar=function(){$modalInstance.close("cerrar")},vm.cancel=function(){$modalInstance.dismiss("cancel")}}angular.module("WebBancoChile.errorHandler").controller("modalAsideCtrl",modalAsideCtrl),modalAsideCtrl.$inject=["$modalInstance","$sce","aside"]}(),function(){function errorHandlerCtrl($scope,$sce,$log,errorHandlerService,modalAsideFactory){var vm=this;vm.$scope=$scope,vm.$log=$log,vm.$sce=$sce,vm.errorHandlerService=errorHandlerService,vm.modalAsideFactory=modalAsideFactory,vm.resetForm(),$scope.$watch("ehc.tipoError",function(){vm.tipoErrorObject=vm.errorHandlerService.getTipoError(vm.tipoError)},!0),$scope.$watch("ehc.tipoButton",function(){vm.labelButton="V"===vm.tipoButton?"Volver":"Reintentar"},!0)}angular.module("WebBancoChile.errorHandler").controller("errorHandlerCtrl",errorHandlerCtrl),errorHandlerCtrl.prototype.resetForm=function(){var vm=this;vm.tipoErrorObject=vm.errorHandlerService.getTipoError(vm.tipoError),vm.labelButton="V"===vm.tipoButton?"Volver":"Reintentar"},errorHandlerCtrl.prototype.reintentar=function(){var vm=this;angular.isDefined(vm.funcion)?(vm.error=!1,vm.funcion()):vm.$log.info("no hay funcion para ejecutar.")},errorHandlerCtrl.prototype.confiarHtml=function(html_code){var vm=this;return vm.$sce.trustAsHtml(html_code)},errorHandlerCtrl.prototype.abrirAside=function(){var vm=this;vm.modalAsideFactory.openAside(vm.error.aside)}}(),function(){function alarmaEjecutivoController($state,$scope,alarmaEjecutivoService,$filter){var vm=this;vm.$state=$state,vm.$scope=$scope,vm.$filter=$filter,vm.alarmaEjecutivoService=alarmaEjecutivoService,vm.alarmasPendientes=[],vm.notificationVisible=!1,vm.ESTADO={NUEVA:"NUEVA",VISITADO:"VISITADO"},vm.msecPerMinute=6e4,vm.msecPerHour=60*vm.msecPerMinute,vm.msecPerDay=24*vm.msecPerHour,vm.fechaActual=new Date,vm.timeActual=vm.fechaActual.getTime()}angular.module("WebBancoChile.alarmaEjecutivo").controller("alarmaEjecutivoController",alarmaEjecutivoController),alarmaEjecutivoController.$inject=["$state","$scope","alarmaEjecutivoService","$filter"],alarmaEjecutivoController.prototype.init=function(){var vm=this;vm.buscarAlarmasPendientes(),setInterval(function(){vm.$scope.$apply(function(){vm.buscarAlarmasPendientes()})},1e4)},alarmaEjecutivoController.prototype.buscarAlarmasPendientes=function(){var vm=this;vm.alarmaEjecutivoService.obtenerAlarmasPendientes().then(function(rs){vm.alarmasPendientes=rs.data,vm.calcularTiempo(vm.alarmasPendientes)},function(){vm.alarmasPendientes=[]})},alarmaEjecutivoController.prototype.calcularTiempo=function(alarmas){for(var vm=this,i=0;i<alarmas.length;i++){var fechaRecibida=alarmas[i].fecha,dateTime=fechaRecibida.split(" "),date=dateTime[0].split("-"),time=dateTime[1].split(":"),nuevaFechaRecibida=new Date(parseInt(date[0],10),parseInt(date[1],10)-1,parseInt(date[2],10),parseInt(time[0],10),parseInt(time[1],10),parseInt(time[2],10)),nuevaFechaRecibidaEnMesc=nuevaFechaRecibida.getTime(),formatnuevaFechaRecibidaEnMesc=vm.$filter("date")(nuevaFechaRecibidaEnMesc,"EEE dd/MM/yyyy HH:mm"),formatnuevaFechaRecibidaEnMescSplit=formatnuevaFechaRecibidaEnMesc.split(".");formatnuevaFechaRecibidaEnMescSplit[0]=vm.$filter("uppercase")(formatnuevaFechaRecibidaEnMescSplit[0]);var fechaDefinitiva=formatnuevaFechaRecibidaEnMescSplit[0]+formatnuevaFechaRecibidaEnMescSplit[1];if(alarmas[i].fechaActualizada=nuevaFechaRecibidaEnMesc,alarmas[i].fechaFormateada=fechaDefinitiva,alarmas[i].horaActualizada=time[0]+":"+time[1],nuevaFechaRecibidaEnMesc>vm.msecPerDay){vm.interval=vm.timeActual-nuevaFechaRecibidaEnMesc;var horas=Math.floor(vm.interval/vm.msecPerHour);vm.interval=vm.interval-horas*vm.msecPerHour;var minutos=Math.floor(vm.interval/vm.msecPerMinute);vm.interval=vm.interval-minutos*vm.msecPerMinute,alarmas[i].horas=horas,alarmas[i].horaString=horas>1?"Horas":"Hora",alarmas[i].minutos=minutos,alarmas[i].minutosString=minutos>1?"Minutos":"Minuto"}}},alarmaEjecutivoController.prototype.clickCursarAlarma=function(alarma){var vm=this,stateAlarma=alarma.hipervinculo;alarma.estado=vm.ESTADO.VISITADO,vm.alarmaEjecutivoService.actualizarAlarma(alarma).then(function(){vm.eliminarAlarmaLista(alarma)},function(){}),vm.eliminarAlarmaLista(alarma),vm.notificationVisible=!1,vm.$state.go(stateAlarma)},alarmaEjecutivoController.prototype.eliminarAlarmaLista=function(alarma){for(var vm=this,newArray=[],i=0;i<vm.alarmasPendientes.length;i++){var alarmaI=vm.alarmasPendientes[i];alarmaI.idAlarma!==alarma.idAlarma&&newArray.push(alarmaI)}vm.alarmasPendientes=newArray},alarmaEjecutivoController.prototype.clickMostrarAlarmas=function(){var vm=this;vm.notificationVisible=!vm.notificationVisible}}(),function(){function buscarClienteEscritorioCtrl($scope,$state,headerService){var headermenu=this;headermenu.$scope=$scope,headermenu.$state=$state,headermenu.nameContext=$state.current.name,headermenu.busquedaRutService=headerService.busquedaRutService,headermenu.contextoCliente=headerService.contextoCliente,headermenu.cliente={},headermenu.inputRut="",headermenu.mostrarDatos=!1,headermenu.showSearchButton=!0,headermenu.focus=!1,headermenu.busquedas={showRecurrent:!1,busquedasRecientes:[],busquedasRecurrentes:[],errorRecientes:!1,errorRecurrentes:!1,busquedasRecientesLoading:!0,busquedasRecurrentesLoading:!0},headermenu.estructure={rut:"",noCliente:!0,infoCliente:null,error:!1,errorMessage:""},headermenu.cliente.datosResume="",headermenu.$scope.$watch("headermenu.inputRut",function(){headermenu.cliente.error=!1,headermenu.cliente.errorMessage=""}),headermenu.$scope.$watchGroup(["headermenu.cliente.rut","headermenu.cliente.infoCliente"],function(){$scope.$parent.cliente=headermenu.cliente,$scope.cliente=headermenu.cliente,angular.isDefined(headermenu.cliente.rut)&&null!==headermenu.cliente.rut&&(headermenu.inputRut=headermenu.cliente.rut)}),headermenu.$scope.$watch("headermenu.focus",function(){$scope.$parent.cliente=headermenu.cliente,$scope.$parent.focus=headermenu.focus,headermenu.busquedas.showRecurrent=!1,headermenu.isCurrentStateMain()||(angular.equals(headermenu.$scope.formBuscarCliente.rut.$viewValue,"-")?headermenu.showSearchButton=!0:headermenu.showSearchButton=headermenu.focus)}),headermenu.$scope.$watch("headermenu.$state.current.name",function(){var cliente=headermenu.contextoCliente.getActiveCliente();headermenu.busquedas.showRecurrent=!1,headermenu.isCurrentStateMain()?(headermenu.limpiarBuscador(),headermenu.showSearchButton=!0):(headermenu.inputRut=cliente.rut,headermenu.showSearchButton=!1)}),void 0!==headermenu.inputRut&&""!==headermenu.inputRut&&headermenu.buscarClienteInit(),$scope.$on("vista-360::nuevoCliente",function(event,rut){headermenu.focus=!0,headermenu.inputRut=rut,headermenu.buscarCliente()})}function directive(){return{transclude:!0,restrict:"E",scope:{cliente:"=",focus:"="},templateUrl:"commons/templates/header-input/busqueda-cliente/buscar-cliente-escritorio_tpl.html",controller:["$scope","$state","headerService",buscarClienteEscritorioCtrl],controllerAs:"headermenu"}}angular.module("WebBancoChile.headerInput").controller("buscarClienteEscritorioCtrl",buscarClienteEscritorioCtrl),buscarClienteEscritorioCtrl.$inject=["$scope","$state","headerService"],buscarClienteEscritorioCtrl.prototype.isCurrentStateMain=function(){var headermenu=this;return"escritorio-ejecutivo"===headermenu.$state.current.name?!0:!1},buscarClienteEscritorioCtrl.prototype.clickElementoBusqueda=function(rutCliente){var headermenu=this;headermenu.contextoCliente.setActiveCliente(rutCliente),headermenu.cliente.noCliente=!1,headermenu.cliente.rut=rutCliente,headermenu.inputRut=headermenu.cliente.rut,headermenu.busquedas.showRecurrent=!1},buscarClienteEscritorioCtrl.prototype.buscarClienteInit=function(){var headermenu=this;if(void 0!==headermenu.inputRut&&""!==headermenu.inputRut){var rut=headermenu.formatRut(headermenu.inputRut),validRut=headermenu.validateRut(rut);validRut?headermenu.obtenerInfoCliente(rut):(headermenu.cliente.error=!0,headermenu.cliente.errorMessage="Ingrese Rut Válido")}},buscarClienteEscritorioCtrl.prototype.buscarCliente=function(){var headermenu=this;headermenu.$scope.formBuscarCliente.rut.$valid&&headermenu.buscarClienteInit()},buscarClienteEscritorioCtrl.prototype.obtenerInfoCliente=function(rut){var headermenu=this;headermenu.contextoCliente.setActiveCliente(rut),headermenu.rut=rut,headermenu.contextoCliente.getInfoClienteFullSesion().then(function(rs){headermenu.cargarDatosInfoClienteSuccess(rs)},function(err){headermenu.cargarDatosInfoClienteError(err,headermenu.rut)})},buscarClienteEscritorioCtrl.prototype.cargarDatosInfoClienteSuccess=function(rs){var headermenu=this;headermenu.cliente.rut=rs.data.rutCliente,null!==headermenu.cliente.rut?(headermenu.cliente.infoCliente=rs.data,"Sin Informacion"!==headermenu.cliente.infoCliente.nombre?(headermenu.cliente.noCliente=!1,headermenu.incluirInfoClienteString()):(headermenu.cliente.noCliente=!0,headermenu.cliente.errorMessage="El RUT no corresponde a un cliente Banco.",headermenu.cliente.datosResume=headermenu.cliente.errorMessage)):(headermenu.cliente.error=!0,headermenu.cliente.errorMessage="El RUT no corresponde a un cliente Banco.")},buscarClienteEscritorioCtrl.prototype.cargarDatosInfoClienteError=function(err,rut){var headermenu=this;headermenu.cliente.error=!0;var exception=err.data;null!==exception&&"100001"===exception.errorCode?(headermenu.cliente.rut=rut,headermenu.cliente.noCliente=!0):headermenu.cliente.errorMessage="Error en el Servicio, intente más tarde"},buscarClienteEscritorioCtrl.prototype.incluirInfoClienteString=function(){var headermenu=this;headermenu.cliente.datosResume="",void 0!==headermenu.cliente.infoCliente.fechaNacimiento&&null!==headermenu.cliente.infoCliente.fechaNacimiento&&""!==headermenu.cliente.infoCliente.fechaNacimiento&&(headermenu.cliente.infoCliente.fechaNaciemientoAnosString=headermenu.cliente.infoCliente.fechaNacimiento+" - "+headermenu.calcularAnosDadoFecha(headermenu.cliente.infoCliente.fechaNacimiento)+" años | ",headermenu.cliente.datosResume=headermenu.cliente.datosResume+headermenu.cliente.infoCliente.fechaNaciemientoAnosString),void 0!==headermenu.cliente.infoCliente.pais&&null!==headermenu.cliente.infoCliente.pais&&""!==headermenu.cliente.infoCliente.pais&&(headermenu.cliente.datosResume=headermenu.cliente.datosResume+headermenu.cliente.infoCliente.pais+" | "),headermenu.cliente.datosResume.lastIndexOf("|")===headermenu.cliente.datosResume.length-2&&(headermenu.cliente.datosResume=headermenu.cliente.datosResume.substr(0,headermenu.cliente.datosResume.lastIndexOf("|")))},buscarClienteEscritorioCtrl.prototype.clickExit=function(){var headermenu=this;headermenu.limpiarBuscador(),headermenu.$scope.$root.$broadcast("header::clienteUnloaded"),window.location.href="/miplataforma-web/centro-de-negocios/#/escritorio-ejecutivo"},buscarClienteEscritorioCtrl.prototype.limpiarBuscador=function(){var headermenu=this;headermenu.$scope.$root.$broadcast("inactiveRutEvent",{rut:headermenu.cliente.rut,context:headermenu.nameContext}),headermenu.contextoCliente.cleanActiveCliente(),headermenu.cliente=angular.copy(headermenu.estructure),headermenu.inputRut="",headermenu.$scope.formBuscarCliente.$setPristine(),headermenu.$scope.formBuscarCliente.$setUntouched()},buscarClienteEscritorioCtrl.prototype.calcularAnosDadoFecha=function(fecha){var arrayFecha=fecha.split("/"),dia=arrayFecha[0],mes=arrayFecha[1],ano=arrayFecha[2],fecha_hoy=new Date,ahora_ano=fecha_hoy.getYear(),ahora_mes=fecha_hoy.getMonth(),ahora_dia=fecha_hoy.getDate(),edad=ahora_ano+1900-ano;return mes-1>ahora_mes&&edad--,mes-1===ahora_mes&&dia>ahora_dia&&edad--,edad>1900&&(edad-=1900),edad},buscarClienteEscritorioCtrl.prototype.blurGroup=function($event){var headermenu=this;(null==$event.relatedTarget||"searchButton"!==$event.relatedTarget.name&&"cancelButton"!==$event.relatedTarget.name)&&(headermenu.focus=!1)},buscarClienteEscritorioCtrl.prototype.clickOutRecurrents=function(){var headermenu=this;headermenu.busquedas.showRecurrent=!1},buscarClienteEscritorioCtrl.prototype.formatRut=function(rut){return rut.replace(/[.]/g,"")},buscarClienteEscritorioCtrl.prototype.validateRut=function(numeroRut){var headermenu=this,dijitoVerificador=numeroRut.split("-")[1],d=headermenu.calculatedv(numeroRut.split("-")[0]);return d===dijitoVerificador.toUpperCase()},buscarClienteEscritorioCtrl.prototype.calculatedv=function(numeroRut){for(var M=0,S=1;numeroRut;numeroRut=Math.floor(numeroRut/10))S=(S+numeroRut%10*(9-M++%6))%11;return S?(S-1).toString():"K"},buscarClienteEscritorioCtrl.prototype.clickMostrarBusquedas=function(){var headermenu=this;headermenu.busquedas.showRecurrent=!headermenu.busquedas.showRecurrent,headermenu.busquedaRutService.busquedasReciente(5).then(function(rs){headermenu.busquedasRecienteSuccess(rs)},function(){headermenu.busquedasRecienteError()}),headermenu.busquedaRutService.busquedasRecurrentes(5).then(function(rs){headermenu.busquedasRecurrentesSuccess(rs)},function(){headermenu.busquedasRecurrentesError()})},buscarClienteEscritorioCtrl.prototype.busquedasRecienteSuccess=function(rs){var headermenu=this;headermenu.busquedas.busquedasRecientes=rs.data,headermenu.busquedas.busquedasRecientesLoading=!1},buscarClienteEscritorioCtrl.prototype.busquedasRecienteError=function(){var headermenu=this;headermenu.busquedas.errorRecientes=!0},buscarClienteEscritorioCtrl.prototype.busquedasRecurrentesSuccess=function(rs){var headermenu=this;headermenu.busquedas.busquedasRecurrentes=rs.data,headermenu.busquedas.busquedasRecurrentesLoading=!1},buscarClienteEscritorioCtrl.prototype.busquedasRecurrentesError=function(){var headermenu=this;headermenu.busquedas.errorRecurrentes=!0},angular.module("WebBancoChile.headerInput").directive("ngBuscarClienteEscritorio",[directive])}(),function(){function headerCtrl($log,$scope,$state,$timeout,$stateParams,headerService,$window,CLIENTE_CONSTANT,CONSTANTES_ESTADOS,ESTADOS_CENTRO_NEGOCIOS){function init(){headermenu.cliente={},headermenu.showUserBox=!1,headermenu.activeBox="",headermenu.$scope=$scope,headermenu.$state=$state,headermenu.$stateParams=$stateParams,headermenu.$timeout=$timeout,headermenu.infoFinancieraService=headerService.infoFinancieraService,headermenu.busquedaRutService=headerService.busquedaRutService,headermenu.contextoCliente=headerService.contextoCliente,headermenu.indicadores={error:!0,uf:"",dolarObservado:""},headermenu.actualizarIndicadoresFinancieros(),$scope.colors=["f4f4f4","dce1e5","b5bfc4","d2d2d4","e6e6e8","f1f1f3","f6f6f8","fafafc","c7cbd1","e3e6e8","768087","334254","91999f","dccee1","090909","1e2832","efefef","999999"],$scope.attributes=["border-color","background-color","color","box-shadow","text-shadow"],$scope.hasProfile=!0,$scope.percentage=0,$scope.reaction={body:.3}}var headermenu=this;headermenu.permisos=["ROLE_VISTA360CAJARUT_EJECUTAR"],headermenu.CLIENTE_CONSTANT=CLIENTE_CONSTANT,headermenu.CONSTANTES_ESTADOS=CONSTANTES_ESTADOS,headermenu.ESTADOS_CENTRO_NEGOCIOS=ESTADOS_CENTRO_NEGOCIOS,headermenu.headerService=headerService,headermenu.$window=$window,init(),$scope.$on("activeRutEvent",function(event,args){headermenu.infoFinancieraService.setActiveRut(args.rut,args.name,args.context),headerService.infoClienteService.setActiveRut(args.rut),headermenu.activeFinanciera=!0}),$scope.$on("inactiveRutEvent",function(){headermenu.infoFinancieraService.cleanActiveRut(),headerService.infoClienteService.cleanActiveRut(),headermenu.activeFinanciera=!1}),$scope.$on("$stateChangeSuccess",function(event,args){var financieraState="inf-financiera",contextParent=angular.copy(headermenu.infoFinancieraService.infoFinanciera.context),stateName=null!==contextParent?contextParent+"."+financieraState:financieraState;headermenu.showUserBox=!1,args.name.startsWith(stateName)||(headermenu.infoFinancieraService.cleanActiveRut(),headermenu.activeFinanciera=!1)}),headermenu.$scope.$watchGroup(["headermenu.cliente","headermenu.cliente.rut"],function(){headermenu.watch()})}angular.module("WebBancoChile.headerInput").controller("headerInputCtrl",headerCtrl),headerCtrl.$inject=["$log","$scope","$state","$timeout","$stateParams","headerService","$window","CLIENTE_CONSTANT","CONSTANTES_ESTADOS","ESTADOS_CENTRO_NEGOCIOS"],headerCtrl.prototype.actualizarIndicadoresFinancieros=function(){var headermenu=this;headermenu.headerService.indicadoresFinancierosFactory.get().then(function(rs){headermenu.indicadores=rs.data,headermenu.indicadores.error=!1,headermenu.infoFinancieraService.indicadores=angular.copy(headermenu.indicadores)},function(err){headermenu.indicadores={error:!0},headermenu.infoFinancieraService.indicadores=angular.copy(headermenu.indicadores),$log.error("Error al obtener los indicadores financieros.\nSTATUS: "+status+"\nERROR: "+JSON.stringify(err))})},headerCtrl.prototype.showBox=function(value){var headermenu=this;headermenu.activeBox===value?headermenu.activeBox="":headermenu.activeBox=value},headerCtrl.prototype.hideBox=function(){var headermenu=this;headermenu.showUserBox=!1},headerCtrl.prototype.goHome=function(){var headermenu=this;headermenu.$scope.$root.$broadcast("header::clienteUnloaded"),headermenu.$window.location.href=headermenu.CONSTANTES_ESTADOS.ESCRITORIO_EJECUTIVO.url},headerCtrl.prototype.clickInfoFinanciera=function(){var headermenu=this;return headermenu.clicked?void(headermenu.cancelClick=!0):(headermenu.clicked=!0,void headermenu.$timeout(function(){return headermenu.cancelClick?(headermenu.cancelClick=!1,headermenu.clicked=!1,void headermenu.goInfoFinanciera()):(headermenu.goInfoFinanciera(),headermenu.cancelClick=!1,void(headermenu.clicked=!1))},300))},headerCtrl.prototype.goInfoFinanciera=function(){var headermenu=this,contextParent=angular.copy(headermenu.infoFinancieraService.infoFinanciera.context),financieraState="inf-financiera",stateName=null!==contextParent?contextParent+"."+financieraState:financieraState;headermenu.$state.go(stateName)},headerCtrl.prototype.clickMostrarAlarmas=function(){var headermenu=this,alarmasState="alarma-ejecutivo";headermenu.$state.go(alarmasState)},headerCtrl.prototype.abrirModalAjusteContraste=function(){var headermenu=this;headermenu.$scope&&(headermenu.$scope.percentageOld=headermenu.$scope.percentage?headermenu.$scope.percentage:0),$(".container-ajuste-contraste").fadeIn();
},headerCtrl.prototype.cerrarModal=function(old){var headermenu=this;old&&(headermenu.$scope.percentage=old),$(".container-ajuste-contraste").fadeOut()},headerCtrl.prototype.showModal=function(){var headermenu=this;return"escritorio-ejecutivo"===headermenu.$state.current.name?!0:!1},headerCtrl.prototype.watch=function(){var headermenu=this,urlNotFound="/miplataforma-web/centro-de-negocios/#/not-found";void 0!==headermenu.cliente.rut&&""!==headermenu.cliente.rut&&null!==headermenu.cliente.rut&&(headermenu.cliente.noCliente?headermenu.setClientType("not-found",urlNotFound):headermenu.contextoCliente.getInfoClienteFullSesion().then(function(){var seccionCliente=headermenu.contextoCliente.getSeccionCliente();seccionCliente===headermenu.CLIENTE_CONSTANT.TIPO_CLIENTE.empresa?headermenu.setClientType(headermenu.CONSTANTES_ESTADOS.VISTA360_EMPRESAS.state,headermenu.CONSTANTES_ESTADOS.VISTA360_EMPRESAS.url):headermenu.setClientType(headermenu.CONSTANTES_ESTADOS.VISTA360_PERSONAS.state,headermenu.CONSTANTES_ESTADOS.VISTA360_PERSONAS.url)},function(){headermenu.setClientType(headermenu.CONSTANTES_ESTADOS.VISTA360_PERSONAS.state,headermenu.CONSTANTES_ESTADOS.VISTA360_PERSONAS.url)}))},headerCtrl.prototype.setClientType=function(type,url){var headermenu=this;headermenu.$state.current.name===type?headermenu.$state.transitionTo(headermenu.$state.current,headermenu.$stateParams,{reload:!0,inherit:!1,notify:!0}):headermenu.isCentroNegocios()?headermenu.$state.go(type):headermenu.$window.location.href=url},headerCtrl.prototype.isCentroNegocios=function(){var headermenu=this,estadosDirectos=_.intersection([headermenu.$state.current.name],headermenu.ESTADOS_CENTRO_NEGOCIOS).length>0,padres=_.intersection([headermenu.$state.current.parent],headermenu.ESTADOS_CENTRO_NEGOCIOS).length>0;return estadosDirectos||padres}}(),function(){function controller($log,$scope,$state,$injector,$rootScope,MENU_ARRAY,URL_API_HOME,$location){var vm=this;vm.$scope=$scope,vm.$state=$state,vm.$timeout=$injector.get("$timeout"),vm.infoFinancieraService=$injector.get("infoFinancieraService"),vm.indicadoresFinancierosFactory=$injector.get("indicadoresFinancierosFactory"),vm.infoClienteService=$injector.get("infoClienteService"),vm.menu=MENU_ARRAY,vm.URL_API_HOME=URL_API_HOME,$scope.colors=["f4f4f4","dce1e5","b5bfc4","d2d2d4","e6e6e8","f1f1f3","f6f6f8","fafafc","c7cbd1","e3e6e8","768087","334254","91999f","dccee1","090909","1e2832","efefef","999999"],$scope.attributes=["border-color","background-color","color","box-shadow","text-shadow"],$scope.hasProfile=!0,$scope.percentage=0,$scope.reaction={body:.3},vm.activeBox="",vm.showBox=function(value){$log.debug(value),vm.activeBox===value?vm.activeBox="":vm.activeBox=value},vm.noEsRbac=function(){return $location.absUrl().indexOf("miadministracion")>-1||$location.absUrl().indexOf("miadministracion-web")>-1?!1:!0},vm.noEsRbac()&&vm.actualizarIndicadoresFinancieros(),$scope.$on("activeRutEvent",function(event,args){vm.infoFinancieraService.setActiveRut(args.rut,args.name,args.context),vm.infoClienteService.setActiveRut(args.rut),vm.activeFinanciera=!0}),$scope.$on("inactiveRutEvent",function(){vm.infoFinancieraService.cleanActiveRut(),vm.infoClienteService.cleanActiveRut(),vm.activeFinanciera=!1}),$scope.$on("$stateChangeSuccess",function(event,args){var financieraState="inf-financiera",contextParent=angular.copy(vm.infoFinancieraService.infoFinanciera.context),stateName=null!==contextParent?contextParent+"."+financieraState:financieraState;args.name.startsWith(stateName)||(vm.infoFinancieraService.cleanActiveRut(),vm.activeFinanciera=!1)})}controller.prototype.goHome=function(){var vm=this;window.location.href=vm.URL_API_HOME},controller.prototype.clickInfoFinanciera=function(){var vm=this;return vm.clicked?void(vm.cancelClick=!0):(vm.clicked=!0,void vm.$timeout(function(){return vm.cancelClick?(vm.cancelClick=!1,vm.clicked=!1,void vm.goInfoFinanciera()):(vm.goInfoFinanciera(),vm.cancelClick=!1,void(vm.clicked=!1))},300))},controller.prototype.actualizarIndicadoresFinancieros=function(){var vm=this;vm.indicadoresFinancierosFactory.get().then(function(rs){vm.indicadores=rs.data,vm.indicadores.error=!1,vm.infoFinancieraService.indicadores=angular.copy(vm.indicadores)},function(err){vm.indicadores={error:!0},vm.infoFinancieraService.indicadores=angular.copy(vm.indicadores),$log.error("Error al obtener los indicadores financieros.\nSTATUS: "+status+"\nERROR: "+JSON.stringify(err))})},controller.prototype.goInfoFinanciera=function(){var vm=this,contextParent=angular.copy(vm.infoFinancieraService.infoFinanciera.context),financieraState="inf-financiera",stateName=null!==contextParent?contextParent+"."+financieraState:financieraState;vm.$state.go(stateName)},controller.prototype.clickMostrarAlarmas=function(){var vm=this,alarmasState="alarma-ejecutivo";vm.$state.go(alarmasState)},controller.prototype.abrirModalAjusteContraste=function(){this.$scope&&(this.$scope.percentageOld=this.$scope.percentage?this.$scope.percentage:0),$(".container-ajuste-contraste").fadeIn()},controller.prototype.cerrarModal=function(old){old&&(this.$scope.percentage=old),$(".container-ajuste-contraste").fadeOut()},angular.module("WebBancoChile.headerMenu").controller("headerMenuCtrl",controller),controller.$inject=["$log","$scope","$state","$injector","$rootScope","MENU_ARRAY","URL_API_HOME","$location"]}(),function(){function infoFinancieraResumenController(infoFinancieraService){var vm=this;vm.infoFinancieraService=infoFinancieraService,vm.datosInfo={fechaInformacion:null,datosCuentasCorrienteResumen:{saldoActual:null,saldoActualCLP:null,saldoActualUSD:null,saldoDisponible:null,saldoDisponibleCLP:null,saldoDisponibleUSD:null,saldoPromedio:null},datosDepositoPlazoResumen:{depositoAPlazoCLP:null,depositoAPlazoUSD:null,depositoAPlazoUF:null,depositoAplazoUSDtoPeso:null,depositoAPlazoUFtoPeso:null},datosAhorrosResumen:{rut:null,otrasInversionesAhorro:null},datosAhorrosFondosMutuosResumen:{rut:null,monto:null,moneda:null}},vm.inicializedCuentasCorrientesResumen=!1,vm.inicializedDatosDepositoPlazoResumen=!1,vm.inicializedDatosAhorrosResumen=!1,vm.inicializedDatosAhorrosFondosMutuosResumen=!1,vm.isCuentasCorrientesResumenLoad=!1,vm.isDatosDepositoPlazoResumenLoad=!1,vm.isDatosAhorrosResumenLoad=!1,vm.isDatosAhorrosFondosMutuosResumenLoad=!1,vm.ahorrosFailsCount=0,vm.dolarObservado=vm.infoFinancieraService.indicadores.dolarObservado,vm.ufObservado=vm.infoFinancieraService.indicadores.uf,vm.datosInfo.fechaInformacion=new Date,vm.obtenerCuentaCorrienteResumen(),vm.obtenerDepositoPlazoResumen(),vm.obtenerAhorrosResumen(),vm.init()}angular.module("WebBancoChile.financiera").controller("infoFinancieraResumenController",infoFinancieraResumenController),infoFinancieraResumenController.$inject=["infoFinancieraService"],infoFinancieraResumenController.prototype.init=function(){document.getElementsByClassName("linea").length>0&&($(".linea")[0].style.left="120px")},infoFinancieraResumenController.prototype.obtenerCuentaCorrienteResumen=function(){var vm=this;vm.infoFinancieraService.getCuentaCorrienteResumen().then(function(rs){vm.successCuentaCorrienteResumen(rs)},function(err){vm.errorCuentaCorrienteResumen(err)})},infoFinancieraResumenController.prototype.successCuentaCorrienteResumen=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosCuentasCorrienteResumen=rs.data,vm.datosInfo.datosCuentasCorrienteResumen=vm.infoFinancieraService.infoFinanciera.datosCuentasCorrienteResumen,vm.calcularDatosSaldosEnPesos(),vm.inicializedCuentasCorrientesResumen=!0,vm.isCuentasCorrientesResumenLoad=!0},infoFinancieraResumenController.prototype.errorCuentaCorrienteResumen=function(err){var vm=this,exception=err.data,status=err.status;vm.inicializedCuentasCorrientesResumen=!0,vm.isCuentasCorrientesResumenLoad=!1,null!==exception&&404!==status?(vm.noServiceCuentasCorrientesResumen=!1,vm.errorMessageCuentasCorrientesResumen=exception.catalogMessage,"100001"===exception.errorCode?vm.errorStyleCuentaCorriente="information":vm.errorStyleCuentaCorriente="error"):vm.noServiceCuentasCorrientesResumen=!0},infoFinancieraResumenController.prototype.obtenerDepositoPlazoResumen=function(){var vm=this;vm.infoFinancieraService.getDepositoPlazoResumen().then(function(rs){vm.successDepositoPlazoResumen(rs)},function(err){vm.errorDepositoPlazoResumen(err)})},infoFinancieraResumenController.prototype.successDepositoPlazoResumen=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosDepositoPlazoResumen=rs.data,vm.datosInfo.datosDepositoPlazoResumen=vm.infoFinancieraService.infoFinanciera.datosDepositoPlazoResumen,vm.calcularDatosDepositoEnPesos(),vm.inicializedDatosDepositoPlazoResumen=!0,vm.isDatosDepositoPlazoResumenLoad=!0},infoFinancieraResumenController.prototype.errorDepositoPlazoResumen=function(err){var vm=this,exception=err.data,status=err.status;vm.inicializedDatosDepositoPlazoResumen=!0,vm.isDatosDepositoPlazoResumenLoad=!1,null!==exception&&404!==status?(vm.noServiceDepositoPlazoResumen=!1,vm.errorMessageDepositoPlazoResumen=exception.catalogMessage,"100002"===exception.errorCode?vm.errorStyleDepositoPlazoResumen="information":vm.errorStyleDepositoPlazoResumen="error"):vm.noServiceDepositoPlazoResumen=!0},infoFinancieraResumenController.prototype.obtenerAhorrosResumen=function(){var vm=this;vm.infoFinancieraService.getAhorrosResumen().then(function(rs){vm.successAhorrosResumen(rs)},function(err){vm.errorAhorrosResumen(err)})},infoFinancieraResumenController.prototype.successAhorrosResumen=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosAhorrosResumen=rs.data,vm.datosInfo.datosAhorrosResumen=vm.infoFinancieraService.infoFinanciera.datosAhorrosResumen,vm.inicializedDatosAhorrosResumen=!0,vm.isDatosAhorrosResumenLoad=!0},infoFinancieraResumenController.prototype.errorAhorrosResumen=function(err){var vm=this;vm.ahorrosFailsCount++;var exception=err.data,status=err.status;vm.inicializedDatosAhorrosResumen=!0,vm.isDatosAhorrosResumenLoad=!1,null!==exception&&404!==status?(vm.noServiceAhorrosResumen=!1,vm.errorMessageAhorrosResumen=exception.catalogMessage,"100004"===exception.errorCode?vm.errorStyleAhorrosResumen="information":vm.errorStyleAhorrosResumen="error"):vm.noServiceAhorrosResumen=!0},infoFinancieraResumenController.prototype.obtenerAhorrosFondosMutuosResumen=function(){var vm=this;vm.infoFinancieraService.getAhorrosFondosMutuosResumen().then(function(rs){vm.successAhorrosFondosMutuosResumen(rs)},function(err){vm.errorAhorrosFondosMutuosResumen(err)})},infoFinancieraResumenController.prototype.successAhorrosFondosMutuosResumen=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosAhorrosFondosMutuosResumen=rs.data,vm.datosInfo.datosAhorrosFondosMutuosResumen=vm.infoFinancieraService.infoFinanciera.datosAhorrosFondosMutuosResumen,vm.inicializedDatosAhorrosFondosMutuosResumen=!0,vm.isDatosAhorrosFondosMutuosResumenLoad=!0},infoFinancieraResumenController.prototype.errorAhorrosFondosMutuosResumen=function(err){var vm=this;vm.ahorrosFailsCount++;var exception=err.data,status=err.status;vm.inicializedDatosAhorrosFondosMutuosResumen=!0,vm.isDatosAhorrosFondosMutuosResumenLoad=!1,null!==exception&&404!==status?(vm.noServiceAhorrosFondosMutuosResumen=!1,vm.errorMessageAhorrosFondosMutuosResumen=exception.catalogMessage,"100004"===exception.errorCode?vm.errorStyleAhorrosFondosMutuosResumen="information":vm.errorStyleAhorrosFondosMutuosResumen="error"):vm.noServiceAhorrosFondosMutuosResumen=!0},infoFinancieraResumenController.prototype.calcularDatosDepositoEnPesos=function(){var vm=this;vm.datosInfo.datosDepositoPlazoResumen.depositoAplazoUSDtoPeso=vm.datosInfo.datosDepositoPlazoResumen.depositoAPlazoUSD*vm.dolarObservado,vm.datosInfo.datosDepositoPlazoResumen.depositoAPlazoUFtoPeso=vm.datosInfo.datosDepositoPlazoResumen.depositoAPlazoUF*vm.ufObservado},infoFinancieraResumenController.prototype.calcularDatosSaldosEnPesos=function(){var vm=this;vm.datosInfo.datosCuentasCorrienteResumen.saldoActual=vm.datosInfo.datosCuentasCorrienteResumen.saldoActualCLP+vm.datosInfo.datosCuentasCorrienteResumen.saldoActualUSD*vm.dolarObservado,vm.datosInfo.datosCuentasCorrienteResumen.saldoDisponible=vm.datosInfo.datosCuentasCorrienteResumen.saldoDisponibleCLP+vm.datosInfo.datosCuentasCorrienteResumen.saldoDisponibleUSD*vm.dolarObservado}}(),function(){function financieraController($state,$scope,infoFinancieraService){var vm=this;vm.$state=$state,vm.$scope=$scope,vm.infoFinancieraService=infoFinancieraService,vm.cliente={rut:angular.copy(vm.infoFinancieraService.infoFinanciera.rut),name:angular.copy(vm.infoFinancieraService.infoFinanciera.name)},vm.rootParentContext=vm.infoFinancieraService.infoFinanciera.context,vm.infoFinancieraContext="inf-financiera",vm.init(),$scope.$on("inactiveRutEvent",function(){vm.infoFinancieraService.cleanActiveRut(),vm.closeModulo()})}angular.module("WebBancoChile.financiera").controller("financieraController",financieraController).controller("AccordionDemoCtrl"),financieraController.$inject=["$state","$scope","infoFinancieraService"],financieraController.prototype.init=function(){var vm=this,firstState="info-sbif";vm.goState(firstState),setTimeout(function(){document.getElementsByClassName("financiera-sidebar").length>0&&(document.getElementsByClassName("financiera-sidebar")[0].style.right="0px")},100)},financieraController.prototype.closeModulo=function(){var vm=this;document.getElementsByClassName("financiera-sidebar").length>0&&($(".financiera-sidebar")[0].style.right="-400px");var closeState="close";setTimeout(function(){vm.goState(closeState)},900)},financieraController.prototype.goState=function(stateToGo){var vm=this,rootParentContext=angular.copy(vm.rootParentContext),infoFinancieraContext=angular.copy(vm.infoFinancieraContext),stateName=null!==rootParentContext?rootParentContext+"."+infoFinancieraContext+"."+stateToGo:infoFinancieraContext+"."+stateToGo;vm.$state.go(stateName)}}(),function(){function infoSBIFController(infoFinancieraService){var vm=this;vm.infoFinancieraService=infoFinancieraService,vm.datosSBIF={fechaSBIF:null,montoConsumoSBIF:null,montoConsumoBanco:null,montoConsumoGAP:null,montoViviendaSBIF:null,montoViviendaBanco:null,montoViviendaGAP:null,montoCupoDisponibleSBIF:null,montoCupoDisponibleBanco:null,montoCupoDisponibleGAP:null,montoCupoDisponibleBancoLineaCredito:null,montoCupoDisponibleBancoTarjetaPesos:null,montoCupoDisponibleBancoTarjetaDolares:null,montoCupoDisponibleBancoTarjetaDolaresToPesos:null,monedaPesos:"CLP"},vm.obtenerDatosSBIF(),vm.inicialized=!1,vm.dolarObservado=0,vm.errorMessage="",vm.init()}angular.module("WebBancoChile.financiera").controller("infoSBIFController",infoSBIFController),infoSBIFController.$inject=["infoFinancieraService"],infoSBIFController.prototype.obtenerDatosSBIF=function(){var vm=this;vm.infoFinancieraService.getDatosSBIF().then(function(rs){vm.asignarDataSbif(rs)},function(rs){var exception=rs.data;null!==exception&&"100000"===exception.errorCode?(vm.errorMessage=exception.catalogMessage,vm.noDataLoad=!1):vm.noDataLoad=!0,vm.isDataLoad=!1,vm.inicialized=!0})},infoSBIFController.prototype.asignarDataSbif=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosSBIF=rs.data,vm.datosSBIF=vm.infoFinancieraService.infoFinanciera.datosSBIF,vm.dolarObservado=vm.infoFinancieraService.indicadores.dolarObservado,vm.calcularDatosEnPesos(),vm.calcularMontoCupoDisponibleBanco(),vm.calculoMontosGAP(),vm.isDataLoad=!0,vm.inicialized=!0},infoSBIFController.prototype.init=function(){document.getElementsByClassName("linea").length>0&&($(".linea")[0].style.left="0px")},infoSBIFController.prototype.calcularDatosEnPesos=function(){var vm=this;vm.datosSBIF.montoCupoDisponibleBancoTarjetaDolaresToPesos=vm.datosSBIF.montoCupoDisponibleBancoTarjetaDolares*vm.dolarObservado},infoSBIFController.prototype.calcularMontoCupoDisponibleBanco=function(){var vm=this;vm.datosSBIF.montoCupoDisponibleBanco=vm.datosSBIF.montoCupoDisponibleBancoLineaCredito+vm.datosSBIF.montoCupoDisponibleBancoTarjetaPesos+vm.datosSBIF.montoCupoDisponibleBancoTarjetaDolaresToPesos},infoSBIFController.prototype.calculoMontosGAP=function(){var vm=this;vm.datosSBIF.montoConsumoGAP=Math.abs(vm.datosSBIF.montoConsumoSBIF-vm.datosSBIF.montoConsumoBanco),vm.datosSBIF.montoViviendaGAP=Math.abs(vm.datosSBIF.montoViviendaSBIF-vm.datosSBIF.montoViviendaBanco),vm.datosSBIF.montoCupoDisponibleGAP=Math.abs(vm.datosSBIF.montoCupoDisponibleSBIF-vm.datosSBIF.montoCupoDisponibleBanco)}}(),function(){function infoUltimoDepositoController(infoFinancieraService){var vm=this;vm.infoFinancieraService=infoFinancieraService,vm.datosInfo={fechaInformacion:null,monto:null,montoCLP:null,moneda:null,plazoDias:null,tasaPeriodo:null,intereses:null,montoFinal:null,canalDeVenta:null,monedaPesos:"CLP"},vm.inicialized=!1,vm.infoFinancieraService.getDatosUltimoDeposito().then(function(rs){vm.successDatosUltimoDeposito(rs)},function(err){vm.errorDatosUltimoDeposito(err)}),vm.init()}angular.module("WebBancoChile.financiera").controller("infoUltimoDepositoController",infoUltimoDepositoController),infoUltimoDepositoController.$inject=["infoFinancieraService"],infoUltimoDepositoController.prototype.successDatosUltimoDeposito=function(rs){var vm=this;vm.infoFinancieraService.infoFinanciera.datosUltimoDeposito=rs.data,vm.datosInfo=vm.infoFinancieraService.infoFinanciera.datosUltimoDeposito,vm.convertDatosAPesos(),vm.isDataLoad=!0,vm.inicialized=!0},infoUltimoDepositoController.prototype.errorDatosUltimoDeposito=function(err){var vm=this,exception=err.data,status=err.status;vm.inicialized=!0,vm.isDataLoad=!1,null!==exception&&404!==status?(vm.noService=!1,vm.errorMessage=exception.catalogMessage,"100003"===exception.errorCode?vm.errorStyle="information":vm.errorStyle="error"):vm.noService=!0},infoUltimoDepositoController.prototype.init=function(){document.getElementsByClassName("linea").length>0&&($(".linea")[0].style.left="240px")},infoUltimoDepositoController.prototype.convertDatosAPesos=function(){var vm=this;"USD"===vm.datosInfo.moneda&&(vm.datosInfo.montoCLP=vm.datosInfo.monto*vm.infoFinancieraService.indicadores.dolarObservado),"CLF"===vm.datosInfo.moneda&&(vm.datosInfo.montoCLP=vm.datosInfo.monto*vm.infoFinancieraService.indicadores.uf)}}(),function(){function ordenNoPagoCursarCtrl(CFG_ONP,$scope,clienteData,userProfile,ERRORES_CAMPOS,cuentaData,$injector){function activate(){vm.onp={tipoSolicitante:vm.TITULAR},vm.cuentaDefault&&vm.cuentaDefault.numProducto&&(vm.onp.cuenta=vm.cuentaDefault,vm.mostrarCuentas=!1,vm.MOTIVOS=CFG_ONP.MOTIVOS.POSTVENTA),vm.validarPermisos(),existenCuentas()}function cleanValidationAlert(){vm.$log.log("cleanValidationAlert()"),vm.alerta.inferior={}}function existenCuentas(){vm.$scope.$watch("ctrlCursar.productos",function(){0===vm.productos.length?(vm.alerta.superior=vm.ALERTA_ONP.cliente_sin_cuenta,vm.mostrarInicio=!1):vm.mostrarInicio=!0},!0)}var vm=this;angular.extend(vm,{$log:$injector.get("$log"),SOLICITANTES:CFG_ONP.SOLICITANTES.TIPO,MOTIVOS:CFG_ONP.MOTIVOS.EMERGENCIAS,ERRORES_CAMPOS:ERRORES_CAMPOS,PORTADOR:CFG_ONP.SOLICITANTES.TIPO.PORTADOR.codigo,TITULAR:CFG_ONP.SOLICITANTES.TIPO.TITULAR.codigo,onp:{},rutSolicitante:null,cuenta:null,motivo:null,productos:clienteData.productos,alerta:{},clienteData:clienteData,userProfile:userProfile,camposObligatorios:{},infoClienteFactory:$injector.get("infoClienteFactory"),$timeout:$injector.get("$timeout"),$scope:$scope,ALERTA_ONP:$injector.get("ALERTA_ONP"),ordenNoPagoSrv:$injector.get("ordenNoPagoSrv"),state:$injector.get("$state"),cleanValidationAlert:cleanValidationAlert,cuentaDefault:cuentaData,mostrarCuentas:!0}),vm.$log.log("[Invocación] ordenNoPagoCursarCtrl"),vm.$scope.$on("cleanValidationAlert",function(){vm.$log.log("on cleanValidationAlert()"),vm.cleanValidationAlert()}),activate()}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoCursarCtrl",ordenNoPagoCursarCtrl),ordenNoPagoCursarCtrl.$inject=["CFG_ONP","$scope","clienteData","userProfile","ERRORES_CAMPOS","cuentaData","$injector"],ordenNoPagoCursarCtrl.prototype.buscarClienteProspecto=function(){var vm=this;vm.alerta.buscarPortador={},vm.alerta.inferior={},vm.camposObligatorios.Solicitante=!1,vm.mostrarFormulario=!1,vm.onp.tipoSolicitante===vm.PORTADOR&&vm.rutSolicitante?(vm.mostrarRutInvalido=vm.mostrarSinRut=!1,vm.obtenerClienteProspecto()):vm.onp.tipoSolicitante===vm.PORTADOR&&(vm.mostrarFormulario=vm.mostrarRutInvalido=!1,vm.mostrarSinRut=!0)},ordenNoPagoCursarCtrl.prototype.ocultarMostrarFormulario=function(tipoSolicitante){var vm=this;vm.mostrarRutInvalido=vm.rutSolicitante?!1:!0,vm.rutSolicitante||vm.mostrarRutInvalido?vm.mostrarRutInvalido=!1:(vm.resetTipoSolicitante(tipoSolicitante),vm.mostrarRutInvalido=!0)},ordenNoPagoCursarCtrl.prototype.resetTipoSolicitante=function(tipoSolicitante){var vm=this;vm.camposObligatorios.Solicitante=vm.mostrarFormulario=!1,vm.rutSolicitante=null,vm.onp.datosSolicitante={},vm.onp.tipoSolicitante=vm[tipoSolicitante],vm.alerta.datosBasicos=vm.alerta.inferior=vm.alerta.buscarPortador={},vm.onp.publicacion={}},ordenNoPagoCursarCtrl.prototype.obtenerClienteProspecto=function(){var vm=this;vm.mostrarFormulario=!1,vm.mostrarRutInvalido=vm.$scope.formCursar.rutSolicitante.$error.rut_no_valido,vm.solicitanteRegistrado={},vm.mostrarRutInvalido||vm.infoClienteFactory.getInfoClienteFull(vm.rutSolicitante).then(function(rs){rs&&rs.data?(rs=rs.data,vm.solicitanteRegistrado={rutSolicitante:rs.rutCliente,nombre:rs.nombre,apellidoPaterno:rs.apellidoPaterno,apellidoMaterno:rs.apellidoMaterno,nombreCompleto:rs.nombreCompleto,direccion:{direccion:rs.direccion,numero:rs.numeroDireccion,comuna:rs.comuna,departamento:rs.complementoDireccion},emailParticularCliente:rs.emailParticularCliente,codigoPaisFonoPartCliente:rs.codigoPaisFonoPartCliente,codigoCiudadPartCliente:rs.codigoCiudadPartCliente,fonoParticularCliente:rs.fonoParticularCliente},vm.alerta.datosBasicos=vm.ALERTA_ONP.ingrese_datos_portador):vm.alerta.datosBasicos=vm.ALERTA_ONP.no_resultado_portador,vm.mostrarFormulario=!0},function(){vm.alerta.datosBasicos=vm.ALERTA_ONP.ingrese_datos_portador,vm.alerta.buscarPortador={},vm.mostrarFormulario=!0})},ordenNoPagoCursarCtrl.prototype.resetFormulario=function(form){form.$setPristine(),form.$setUntouched()},ordenNoPagoCursarCtrl.prototype.validarFormulario=function(form){var vm=this;vm.alerta.inferior={};var esPortador=vm.onp.tipoSolicitante===vm.PORTADOR;vm.camposObligatorios.Solicitante=esPortador,vm.mostrarCamposRequerido=!0;var timer=vm.$timeout(function(){vm.existenCamposIncompletos(form,esPortador);var esAlertaInferior=!vm.alerta.inferior||!vm.alerta.inferior.detalle;esAlertaInferior&&form.$valid&&(vm.setearCamposOnp(),vm.mostrarInicio=!1,vm.mostrarResumen=!0,vm.state.current.data.enProceso="Resumen-Child"),vm.$timeout.cancel(timer)},10)},ordenNoPagoCursarCtrl.prototype.existenCamposIncompletos=function(form,esPortador){var vm=this;if(vm.onp.motivo)if(!vm.rutSolicitante&&esPortador)vm.mostrarSinRut=!0,vm.alerta.inferior=vm.ALERTA_ONP.camposIncompletos_rut_portador;else if(form.rutSolicitante&&!form.rutSolicitante.$error.rut_no_valido){var esValidoFormularioPortador=form.$valid&&esPortador;vm.alerta.inferior=esValidoFormularioPortador?{}:vm.ALERTA_ONP.campos_Incompletos,vm.existenChequesPublicacion(esPortador)}else esPortador&&vm.rutSolicitante.$error.rut_no_valido?(vm.mostrarRutInvalido=!0,vm.alerta.inferior=vm.ALERTA_ONP.camposIncompletos_rut_portador):vm.existenChequesPublicacion(esPortador);else vm.ERRORES_CAMPOS.motivo.showMessage=!0,vm.alerta.inferior=vm.ALERTA_ONP.campos_Incompletos},ordenNoPagoCursarCtrl.prototype.existenChequesPublicacion=function(esPortador){var vm=this,esAlertaInferior=!vm.alerta.inferior||!vm.alerta.inferior.detalle;!vm.onp.totalCheques&&esAlertaInferior||0===vm.onp.totalCheques&&esAlertaInferior?vm.alerta.inferior=vm.ALERTA_ONP.seleccionar_cheque_onp:vm.onp.publicacion.codigo||esPortador||!esAlertaInferior||(vm.alerta.inferior=0!==vm.onp.publicacion.codigo?vm.ALERTA_ONP.seleccionar_publicacion:{})},ordenNoPagoCursarCtrl.prototype.setearCamposOnp=function(){var vm=this;vm.onp.tipoSolicitante===vm.TITULAR?(vm.onp.datosSolicitante={},vm.onp.datosSolicitante.rutSolicitante=vm.clienteData.rutCliente,vm.onp.datosSolicitante.tipo=vm.SOLICITANTES.TITULAR):(vm.onp.datosSolicitante.rutSolicitante=vm.rutSolicitante,vm.onp.datosSolicitante.tipo=vm.SOLICITANTES.PORTADOR),vm.$log.log("onp : "+JSON.stringify(vm.onp))},ordenNoPagoCursarCtrl.prototype.ingresarONP=function(){var vm=this;vm.mostrarComprobante=!0,vm.mostarInicio=vm.mostrarResumen=!1,vm.alerta.errorOperacion=null,vm.state.current.data.enProceso="Confirmando-Child"},ordenNoPagoCursarCtrl.prototype.funcionErrorOperacion=function(){var vm=this;vm.state.current.data.enProceso="Resumen-Child",vm.mostrarResumen=!0,vm.mostarInicio=vm.mostrarComprobante=!1,vm.alerta.errorOperacion=vm.ALERTA_ONP.error_ingresar},ordenNoPagoCursarCtrl.prototype.IngresarOtraONP=function(){var vm=this;vm.state.current.data.enProceso=!1,vm.state.go(vm.state.current.name,{},{reload:!0})},ordenNoPagoCursarCtrl.prototype.validarPermisos=function(){var vm=this;if(vm.algunPermisoEjecucion=!1,vm.userProfile&&vm.userProfile.permisos){var objPermiso=vm.ordenNoPagoSrv.permisosVisualizacion(vm.userProfile,"INGRESAR");vm.algunPermisoEjecucion=objPermiso.algunPermisoEjecucion}},ordenNoPagoCursarCtrl.prototype.volveAInicio=function(){var vm=this;vm.state.current.data.enProceso=!1,vm.mostrarResumen=!1,vm.mostrarInicio=!0,vm.alerta.errorOperacion={}}}(),function(){function ordenNoPagoErrorCtrl(){var vm=this;vm.alerta={tipo:"E",detalle:{message:"Reingrese a Emergencias Bancarias"}}}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoErrorCtrl",ordenNoPagoErrorCtrl)}(),function(){function ordenNoPagoModificarCausalCtrl(CFG_ONP,$scope,clienteData,userProfile,ordenNoPagoSrv,cuentaData,ERRORES_CAMPOS,$injector,$log){function activate(){vm.cuentaDefault&&vm.cuentaDefault.numProducto&&(vm.onp.cuenta=vm.cuentaDefault,vm.mostrarCuentas=!1,vm.MOTIVOS=CFG_ONP.MOTIVOS.POSTVENTA),validarPermisos("REVOCAR"),existenCuentas()}function cleanValidationAlert(){vm.$log.log("cleanValidationAlert()"),vm.alerta.inferior={}}function existenCuentas(){$scope.$watch("ctrlModificarCausal.productos",function(){0===vm.productos.length?(vm.alerta.superior=vm.ALERTA_ONP.cliente_sin_cuenta,vm.mostrarInicio=!1):(setearFiltroConsultaOnp(),vm.mostrarInicio=!0)},!0)}function validarPermisos(tipo){if(vm.algunPermisoEjecucion=!1,vm.userProfile&&vm.userProfile.permisos){var objPermiso=ordenNoPagoSrv.permisosVisualizacion(vm.userProfile,tipo);vm.algunPermisoEjecucion=objPermiso.algunPermisoEjecucion}}function setearFiltroConsultaOnp(){vm.filtroConsulta={tipoSolicitante:null,estados:[vm.ESTADOS_ONP.TEMPORARY,vm.ESTADOS_ONP.PROVISIONAL,vm.ESTADOS_ONP.PERMANENT]}}function continuar(){vm.mostrarCamposRequerido=!0,vm.onp.motivo||(vm.ERRORES_CAMPOS.motivo.showMessage=!0,vm.alerta.inferior=vm.ALERTA_ONP.campos_Incompletos),vm.alerta.inferior=vm.onp.rangosOnp&&vm.onp.rangosOnp.length>0?{}:vm.ALERTA_ONP.Seleccionar_on_cambio_de_motivo,vm.alerta.inferior&&!vm.alerta.inferior.detalle&&(vm.mostrarInicio=!1,vm.mostrarResumen=!0,vm.mostrarConfirmacion=!1,vm.state.current.data.enProceso="Resumen-Child",$log.log("ONP: "+JSON.stringify(vm.onp)))}function volverInicio(){vm.mostrarResumen=!1,vm.mostrarInicio=!0,vm.alerta.errorOperacion={},vm.state.current.data.enProceso=!1}function funcionErrorOperacion(){vm.state.current.data.enProceso="Resumen-Child",vm.mostrarResumen=!0,vm.mostarInicio=vm.mostrarComprobante=!1,vm.alerta.errorOperacion=vm.ALERTA_ONP.error_revocar}function revocarOnp(){vm.mostrarComprobante=!0,vm.mostarInicio=vm.mostrarResumen=!1,vm.alerta.errorOperacion=null,vm.state.current.data.enProceso="Confirmando-Child"}function IngresarOtraRevocacion(){vm.state.current.data.enProceso=!1,vm.state.current.data.nuevaOperacion=!0,vm.state.go("revocar",{},{reload:!0})}var vm=this;angular.extend(vm,{$log:$injector.get("$log"),ESTADOS_ONP:CFG_ONP.ESTADOS_ONP,MOTIVOS:CFG_ONP.MOTIVOS.EMERGENCIAS,ERRORES_CAMPOS:ERRORES_CAMPOS,onp:{},cuenta:null,productos:clienteData.productos,alerta:{},clienteData:clienteData,userProfile:userProfile,ALERTA_ONP:$injector.get("ALERTA_ONP"),state:$injector.get("$state"),$scope:$scope,filtroConsulta:{},cleanValidationAlert:cleanValidationAlert,continuar:continuar,volverInicio:volverInicio,funcionErrorOperacion:funcionErrorOperacion,revocarOnp:revocarOnp,IngresarOtraRevocacion:IngresarOtraRevocacion,cuentaDefault:cuentaData,mostrarCuentas:!0,mostarIcono:!0,mostrarNumeroSolicitud:!0,chequesSiempreDeshabilitados:!0,mostrarResumen:!1}),vm.$log.log("[Invocación] ordenNoPagoModificarCausalCtrl"),vm.$scope.$on("cleanValidationAlert",function(){vm.$log.log("on cleanValidationAlert()"),vm.cleanValidationAlert()}),activate()}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoModificarCausalCtrl",ordenNoPagoModificarCausalCtrl)}(),function(){function ordenNoPagoRatificarCtrl(CFG_ONP,$scope,clienteData,userProfile,ordenNoPagoSrv,cuentaData,$injector,$log){function activate(){vm.cuentaDefault&&vm.cuentaDefault.numProducto&&(vm.onp.cuenta=vm.cuentaDefault,vm.mostrarCuentas=!1),validarPermisos("RATIFICAR"),setearDatosGeneralesOnp("PORTADOR"),existenCuentas()}function existenCuentas(){$scope.$watch("ctrlRatificar.productos",function(){0===vm.productos.length?(vm.alerta.superior=vm.ALERTA_ONP.cliente_sin_cuenta,vm.mostrarInicio=!1):(setearFiltroConsultaOnp(),vm.mostrarInicio=!0)},!0)}function validarPermisos(tipo){if(vm.algunPermisoEjecucion=!1,vm.userProfile&&vm.userProfile.permisos){var objPermiso=ordenNoPagoSrv.permisosVisualizacion(vm.userProfile,tipo);vm.algunPermisoEjecucion=objPermiso.algunPermisoEjecucion}}function setearFiltroConsultaOnp(){vm.filtroConsulta={tipoSolicitante:vm.PORTADOR,estados:[vm.ESTADOS_ONP.TEMPORARY,vm.ESTADOS_ONP.PROVISIONAL]}}function setearDatosGeneralesOnp(tipo){vm.onp.datosSolicitante={rutSolicitante:vm.clienteData.rutCliente,nombre:vm.clienteData.nombre,apellidoPaterno:vm.clienteData.apellidoPaterno,apellidoMaterno:vm.clienteData.apellidoMaterno,tipo:CFG_ONP.SOLICITANTES.TIPO[tipo]}}function continuar(){vm.alerta.inferior=vm.onp.rangosOnp&&vm.onp.rangosOnp.length>0?{}:vm.ALERTA_ONP.seleccionar_cheque_onp_mantencion,vm.alerta.inferior&&!vm.alerta.inferior.detalle&&(vm.mostrarInicio=!1,vm.mostrarResumen=!0,vm.mostrarConfirmacion=!1,vm.state.current.data.enProceso="Resumen-Child",$log.log("ONP: "+JSON.stringify(vm.onp)))}function volverInicio(){vm.mostrarResumen=!1,vm.mostrarInicio=!0,vm.alerta.errorOperacion={},vm.state.current.data.enProceso=!1}function funcionErrorOperacion(){vm.state.current.data.enProceso="Resumen-Child",vm.mostrarResumen=!0,vm.mostarInicio=vm.mostrarComprobante=!1,vm.alerta.errorOperacion=vm.ALERTA_ONP.error_ratificar}function ratificarOnp(){vm.mostrarComprobante=!0,vm.mostarInicio=vm.mostrarResumen=!1,vm.alerta.errorOperacion=null,vm.state.current.data.enProceso="Confirmando-Child"}function IngresarOtraRatificacion(){vm.state.current.data.enProceso=!1,vm.state.current.data.nuevaOperacion=!0,vm.state.go(vm.state.current.name,{},{reload:!0})}var vm=this;angular.extend(vm,{ESTADOS_ONP:CFG_ONP.ESTADOS_ONP,PORTADOR:CFG_ONP.SOLICITANTES.TIPO.PORTADOR.codigo,onp:{},cuenta:null,productos:clienteData.productos,alerta:{},clienteData:clienteData,userProfile:userProfile,ALERTA_ONP:$injector.get("ALERTA_ONP"),state:$injector.get("$state"),filtroConsulta:{},continuar:continuar,volverInicio:volverInicio,funcionErrorOperacion:funcionErrorOperacion,ratificarOnp:ratificarOnp,IngresarOtraRatificacion:IngresarOtraRatificacion,cuentaDefault:cuentaData,mostrarCuentas:!0}),$log.log("[Invocación] ordenNoPagoRatificarCtrl"),activate()}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoRatificarCtrl",ordenNoPagoRatificarCtrl)}(),function(){function ordenNoPagoRevocarCtrl(CFG_ONP,$scope,clienteData,userProfile,ordenNoPagoSrv,cuentaData,$injector,$log){function activate(){
vm.cuentaDefault&&vm.cuentaDefault.numProducto&&(vm.onp.cuenta=vm.cuentaDefault,vm.mostrarCuentas=!1),validarPermisos("REVOCAR"),setearDatosGeneralesOnp("TITULAR"),existenCuentas()}function existenCuentas(){$scope.$watch("ctrlRevocar.productos",function(){0===vm.productos.length?(vm.alerta.superior=vm.ALERTA_ONP.cliente_sin_cuenta,vm.mostrarInicio=!1):(setearFiltroConsultaOnp(),vm.mostrarInicio=!0)},!0)}function validarPermisos(tipo){if(vm.algunPermisoEjecucion=!1,vm.userProfile&&vm.userProfile.permisos){var objPermiso=ordenNoPagoSrv.permisosVisualizacion(vm.userProfile,tipo);vm.algunPermisoEjecucion=objPermiso.algunPermisoEjecucion}}function setearFiltroConsultaOnp(){vm.filtroConsulta={tipoSolicitante:null,estados:[vm.ESTADOS_ONP.TEMPORARY,vm.ESTADOS_ONP.PROVISIONAL,vm.ESTADOS_ONP.PERMANENT]}}function setearDatosGeneralesOnp(tipo){vm.onp.datosSolicitante={rutSolicitante:vm.clienteData.rutCliente,nombre:vm.clienteData.nombre,apellidoPaterno:vm.clienteData.apellidoPaterno,apellidoMaterno:vm.clienteData.apellidoMaterno,tipo:CFG_ONP.SOLICITANTES.TIPO[tipo]}}function continuar(){vm.alerta.inferior=vm.onp.rangosOnp&&vm.onp.rangosOnp.length>0?{}:vm.ALERTA_ONP.seleccionar_cheque_onp_mantencion,vm.alerta.inferior&&!vm.alerta.inferior.detalle&&(vm.mostrarInicio=!1,vm.mostrarResumen=!0,vm.mostrarConfirmacion=!1,vm.state.current.data.enProceso="Resumen-Child",$log.log("ONP: "+JSON.stringify(vm.onp)))}function volverInicio(){vm.mostrarResumen=!1,vm.mostrarInicio=!0,vm.alerta.errorOperacion={},vm.state.current.data.enProceso=!1}function funcionErrorOperacion(){vm.state.current.data.enProceso="Resumen-Child",vm.mostrarResumen=!0,vm.mostarInicio=vm.mostrarComprobante=!1,vm.alerta.errorOperacion=vm.ALERTA_ONP.error_revocar}function revocarOnp(){vm.mostrarComprobante=!0,vm.mostarInicio=vm.mostrarResumen=!1,vm.alerta.errorOperacion=null,vm.state.current.data.enProceso="Confirmando-Child"}function IngresarOtraRevocacion(){vm.state.current.data.enProceso=!1,vm.state.current.data.nuevaOperacion=!0,vm.state.go(vm.state.current.name,{},{reload:!0})}var vm=this;angular.extend(vm,{ESTADOS_ONP:CFG_ONP.ESTADOS_ONP,onp:{},cuenta:null,productos:clienteData.productos,alerta:{},clienteData:clienteData,userProfile:userProfile,ALERTA_ONP:$injector.get("ALERTA_ONP"),state:$injector.get("$state"),filtroConsulta:{},continuar:continuar,volverInicio:volverInicio,funcionErrorOperacion:funcionErrorOperacion,revocarOnp:revocarOnp,IngresarOtraRevocacion:IngresarOtraRevocacion,cuentaDefault:cuentaData,mostrarCuentas:!0}),$log.log("[Invocación] ordenNoPagoRevocarCtrl"),activate()}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoRevocarCtrl",ordenNoPagoRevocarCtrl)}(),function(){function ordenNoPagoMainCtrl($log,$state,radioTabService,TABS_ONP_EMERGENCIAS,TABS_ONP_CHEQUES,PERMISSIONS_EM){function loadTabs(){-1===vm.currentState.indexOf("emergencias")&&(vm.TABS=TABS_ONP_CHEQUES),radioTabService.setTABS(vm.TABS)}var vm=this;vm.currentState=$state.current.name,$log.log("Estado actual "+vm.currentState),angular.extend(vm,{TABS:TABS_ONP_EMERGENCIAS,PERMISSIONS_EM:PERMISSIONS_EM}),loadTabs()}angular.module("WebBancoChile.ordenNoPago").controller("ordenNoPagoMainCtrl",ordenNoPagoMainCtrl),ordenNoPagoMainCtrl.$inject=["$log","$state","radioTabService","TABS_ONP_EMERGENCIAS","TABS_ONP_CHEQUES","PERMISSIONS_EM"]}(),function(){function perfilEjecutivoCtrl($scope,$window,$uibModal,perfilEjecutivoService,PerfilUsuarioService){var vm=this;vm.$scope=$scope,vm.$window=$window,vm.$uibModal=$uibModal,vm.perfilEjecutivoService=perfilEjecutivoService,vm.PerfilUsuarioService=PerfilUsuarioService,vm.obtenerSesion()}angular.module("WebBancoChile.perfilEjecutivo").controller("perfilEjecutivoCtrl",perfilEjecutivoCtrl),perfilEjecutivoCtrl.$inject=["$scope","$window","$uibModal","perfilEjecutivoService","PerfilUsuarioService"],perfilEjecutivoCtrl.prototype.obtenerSesion=function(){var vm=this;vm.PerfilUsuarioService.getPerfilSession().then(function(data){vm.ejecutivo=data,vm.$scope.perfilEjecutivo=vm.obtenerEjecutivoDesdeSesion(),vm.obtenerDataFaltanteEjecutivo(vm.ejecutivo.rut)},function(){vm.mostrarDirectiva=!1})},perfilEjecutivoCtrl.prototype.obtenerEjecutivoDesdeSesion=function(){var vm=this,ejecutivo={rut:vm.ejecutivo.rut,nombre:vm.ejecutivo.nombre,cargo:null,codigo:vm.ejecutivo.codigo,email:vm.ejecutivo.correo,telefono:vm.ejecutivo.telefono,anexo:null,sucursal:vm.ejecutivo.glosaOficina,codigoOficina:vm.ejecutivo.codigoOficina,cui:vm.ejecutivo.oficinaContable,nombreJefeDir:null,emailJefeDir:null,telefonoJefeDir:null};return ejecutivo},perfilEjecutivoCtrl.prototype.obtenerDataFaltanteEjecutivo=function(rutEjecutivo){var vm=this;angular.isDefined(rutEjecutivo)&&null!==rutEjecutivo&&""!==rutEjecutivo?(vm.perfilEjecutivoService.getPerfilEjecutivo(rutEjecutivo).then(function(rs){vm.mapearDatosFaltantesEjecutivo(rs.data)}),vm.mostrarDirectiva=!0):vm.mostrarDirectiva=!1},perfilEjecutivoCtrl.prototype.mapearDatosFaltantesEjecutivo=function(data){var vm=this;vm.$scope.perfilEjecutivo.cargo=data.cargo,vm.$scope.perfilEjecutivo.anexo=data.anexo,vm.$scope.perfilEjecutivo.nombreJefeDir=data.nombreJefeDir,vm.$scope.perfilEjecutivo.emailJefeDir=data.emailJefeDir,vm.$scope.perfilEjecutivo.telefonoJefeDir=data.telefonoJefeDir},perfilEjecutivoCtrl.prototype.openAsidePerfilEjecutivo=function(){var vm=this,modalInstance=vm.$uibModal.open({templateUrl:"components/perfil-ejecutivo/view/aside/aside-perfil-ejecutivo_tpl.html",animation:!0,controller:"asidePerfilEjecutivoCtrl",controllerAs:"vm",resolve:{ejecutivo:vm.$scope.perfilEjecutivo},size:"xs",windowClass:"modal-detalle"});modalInstance.result.then()}}(),function(){function asidePerfilEjecutivoCtrl($scope,$log,$modalInstance,ejecutivo){var vm=this;vm.$scope=$scope,$scope.ejecutivo=ejecutivo,$scope.cancel=function(){$modalInstance.close()}}angular.module("WebBancoChile.perfilEjecutivo").controller("asidePerfilEjecutivoCtrl",asidePerfilEjecutivoCtrl)}(),function(){function cambioEstadoChequeras($scope,data,$modalInstance,$timeout,ChequeraFactory,chequesService,CuentaService){vm=this,vm.scope=$scope,vm.$timeout=$timeout,vm.chequera=data.chequera,vm.cuentaService=CuentaService,vm.chequeraFactory=ChequeraFactory,vm.chequesService=chequesService,vm.modalInstance=$modalInstance,vm.detalle={},vm.error={detalle:{message:"",title:""},tipo:"",show:!1},vm.resetForm(),vm.obtenerDetalle()}angular.module("WebBancoChile.servCheques").controller("cambioEstadoChequeras",cambioEstadoChequeras);var vm;cambioEstadoChequeras.$inject=["$scope","data","$modalInstance","$timeout","ChequeraFactory","chequesService","CuentaService"],cambioEstadoChequeras.prototype.resetForm=function(){var vm=this;vm.chkConfirmacion=!1,vm.isChange=!1,vm.sucursalDefault=0,vm.messageWarning=!1,vm.campoObligatorio=!1,vm.listaOficinas={},vm.selectCambioPor="",vm.SelectOficina=null,vm.cargando=!1,vm.listaEstadosTransicionSelected="",vm.showOficina=!1},cambioEstadoChequeras.prototype.obtenerDetalle=function(){var vm=this;vm.numeroChequeInicial=vm.chequera.numeroChequeInicial,vm.numeroChequeFinal=vm.chequera.numeroChequeFinal,vm.glosaEstadoChequera=vm.chequera.glosaEstadoChequera,vm.estadoChequera=vm.chequera.estadoChequera,vm.cargando=!0,vm.chequesService.getEstadosChequeras().then(function(rs){vm.listaEstadosChequera=rs.data,angular.forEach(vm.listaEstadosChequera,function(item){item.codigo===vm.chequera.estadoChequera&&(vm.listaEstadosTransicion=item.estadosTransicion)}),vm.cargando=!1,vm.error.show=!1},function(){vm.cargando=!1,vm.error.detalle.message="Servicio no disponible, reintente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})},cambioEstadoChequeras.prototype.cambioEstadoChequera=function(){var vm=this;if(vm.validador="KP"===vm.estadoChequera&&"TD"===vm.listaEstadosTransicionSelected.codigo&&null!==vm.SelectOficina,vm.chkConfirmacion&&""!==vm.listaEstadosTransicionSelected&&("KP"!==vm.estadoChequera||vm.validador)){var _body={cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto,primeraSerialTalonario:vm.chequera.numeroChequeInicial,estadoActual:vm.chequera.estadoChequera,estadoFinal:vm.listaEstadosTransicionSelected.codigo,codigoOficinaEntrega:null!==vm.SelectOficina?vm.SelectOficina.codigoSucursal:""};vm.idTransaccion="CLP"===vm.cuentaService.modeloCompartido.cuenta.moneda?"CAMBTALON1":"USD"===vm.cuentaService.modeloCompartido.cuenta.moneda?"CAMBTALON2":"CAMBTALON3",vm.headers={APP_DATA:'{"txId":"'+vm.idTransaccion+'","aplicacionOrigen":"CHEQUES","operacion":"'+vm.idTransaccion+'","funcionalidad":"CAMBIO ESTADO TALONARIO","modo":"ASINCRONA", "moneda":"'+vm.cuentaService.modeloCompartido.cuenta.moneda+'"}'},vm.chequeraFactory.cambioEstadoChequera(_body,vm.headers).then(function(rs){rs?(vm.chequesService.changeStatusChequera=!0,vm.isChange=!0):(vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0)},function(){vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0}),vm.messageWarning=!1}else vm.messageWarning=!0},cambioEstadoChequeras.prototype.cancel=function(){var vm=this;vm.resetForm(),vm.modalInstance.close()},cambioEstadoChequeras.prototype.alertaCancelarCambio=function(type){swal({title:"Perderá trabajo en curso",text:"¿Está seguro que desea abandonar el cambio de estado?",type:type,customClass:"sweet-modales",showCancelButton:!0,animation:"slide-from-top",confirmButtonColor:"#002058",confirmButtonText:"Abandonar",cancelButtonText:"Volver",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){isConfirm&&vm.$timeout(function(){vm.cancel()},100)})}}(),function(){function chequerasController($scope,ChequeraFactory,chequesService,CuentaService,TABS_CHEQUES){function cargarChequeras(){vm.loading=!0;var listaChequerasActivasTemp=[],listaChequerasInactivasTemp=[];vm.error={detalle:void 0,tipo:"",show:!1},ChequeraFactory.getChequeras({rut:vm.cuentaService.modeloCompartido.rutCliente,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto}).then(function(data){void 0!==data.codigo?(vm.error.detalle={message:data.mensaje,title:""},vm.error.tipo="I",vm.error.show=!0,vm.listaChequerasActivas=[],vm.listaChequerasInactivas=[]):(angular.forEach(data,function(item){item.fechaEntrega=chequesService.stringToDate(item.fechaEntrega,"dd-mmm-yyyy","-")}),angular.forEach(data,function(chequera){-1!==["DL"].indexOf(chequera.estadoChequera)?listaChequerasActivasTemp.push(chequera):listaChequerasInactivasTemp.push(chequera)}),vm.listaChequeras.concat(data),vm.listaChequeras.sort(sortFechas("fechaEntrega")),vm.listaChequerasActivas=listaChequerasActivasTemp.sort(sortFechas("fechaEntrega")),vm.listaChequerasInactivas=listaChequerasInactivasTemp.sort(sortFechas("fechaEntrega"))),vm.loading=!1},function(err){vm.loading=!1,vm.error.detalle={message:err.message},vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})}function sortFechas(property){return function(a,b){return moment(a[property]).isBefore(b[property])}}var vm=this;vm.cuentaService=CuentaService,vm.chequesService=chequesService,vm.TABS_CHEQUES=TABS_CHEQUES,angular.extend(vm,{cuenta:{},error:{detalle:void 0,tipo:"",show:!1},listaChequeras:[],listaChequerasActivas:{},listaChequerasInactivas:{}}),$scope.$watch(function(){return vm.chequesService.changeStatusChequera},function(newVal){newVal===!0&&(vm.chequesService.changeStatusChequera=!1,cargarChequeras())}),$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||(vm.cuenta=vm.cuentaService.modeloCompartido.cuenta,cargarChequeras())})}angular.module("WebBancoChile.servCheques").controller("ChequerasController",chequerasController),chequerasController.$inject=["$scope","ChequeraFactory","chequesService","CuentaService","TABS_CHEQUES"]}(),function(){function cambioEstadoColillas($scope,data,$modalInstance,$timeout,colillasFactory,CuentaService,chequesService){vm=this,vm.scope=$scope,vm.$timeout=$timeout,vm.cuentaService=CuentaService,vm.chequesService=chequesService,vm.colilla=data.colilla,vm.operation=data.colillaOperation,vm.modalInstance=$modalInstance,vm.colillasFactory=colillasFactory,vm.detalle={},vm.error={detalle:{message:"",title:""},tipo:"",show:!1},vm.resetForm(),vm.obtenerDetalle()}angular.module("WebBancoChile.servCheques").controller("cambioEstadoColillas",cambioEstadoColillas);var vm;cambioEstadoColillas.$inject=["$scope","data","$modalInstance","$timeout","colillasFactory","CuentaService","chequesService"],cambioEstadoColillas.prototype.resetForm=function(){var vm=this;vm.isCheckConfirm=!1,vm.isChange=!1,vm.messageWarning=!1,vm.cargando=!1,vm.resumen={},vm.motivoBloqueo="",vm.isCheckConfirm=!1},cambioEstadoColillas.prototype.obtenerDetalle=function(){var vm=this;"B"===vm.colilla.estadoColilla?(vm.cargando=!0,vm.colillasFactory.getDetalle(vm.colilla.cuenta,vm.colilla.numeroChequeInicial).then(function(data){vm.resumen=data,vm.cargando=!1},function(){vm.cargando=!1,vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})):(vm.resumen.numeroChequeInicial=vm.colilla.numeroChequeInicial,vm.resumen.numeroChequeFinal=vm.colilla.numeroChequeFinal)},cambioEstadoColillas.prototype.cambioEstadoColillas=function(){var vm=this;if(vm.isCheckConfirm&&("desbloqueo"===vm.operation||"bloqueo"===vm.operation&&""!==vm.motivoBloqueo)){var _body={cuenta:vm.colilla.cuenta,primeraSerialTalonario:vm.colilla.numeroChequeInicial,bloqueo:"bloqueo"===vm.operation?!0:!1,motivo:vm.motivoBloqueo};vm.texto=vm.operation.toUpperCase().substr(0,4),vm.idTransaccion="CLP"===vm.cuentaService.modeloCompartido.cuenta.moneda?vm.texto+"COLIL1":"USD"===vm.cuentaService.modeloCompartido.cuenta.moneda?vm.texto+"COLIL2":vm.texto+"COLIL3",vm.headers={APP_DATA:'{"txId":"'+vm.idTransaccion+'","aplicacionOrigen":"CHEQUES","operacion":"'+vm.idTransaccion+'","funcionalidad":"'+vm.operation.toUpperCase()+' COLILLAS","modo":"ASINCRONA", "moneda":"'+vm.cuentaService.modeloCompartido.cuenta.moneda+'"}'},vm.colillasFactory.cambioEstadoColillas(_body,vm.headers).then(function(rs){rs?(vm.chequesService.changeStatusBloqueoDesbloqueo=!0,vm.isChange=!0):(vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0)},function(){vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0}),vm.messageWarning=!1}else vm.messageWarning=!0},cambioEstadoColillas.prototype.cancel=function(){var vm=this;vm.resetForm(),vm.modalInstance.close()},cambioEstadoColillas.prototype.alertaBloqueoDesbloqueo=function(operacionColilla,type){swal({title:"Perderá trabajo en curso",text:"¿Está seguro que desea abandonar "+operacionColilla+"?",type:type,customClass:"sweet-modales",showCancelButton:!0,animation:"slide-from-top",confirmButtonColor:"#002058",confirmButtonText:"Abandonar",cancelButtonText:"Volver",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){isConfirm&&vm.$timeout(function(){vm.cancel()},100)})}}(),function(){function DescargaDocumentosCtrl($scope,URL_API,fechaUtilService,$filter,$log,CuentaService){function init(){"Vigente o Activo"===vm.estadoCuenta.estado?vm.estado=!0:"Cancelado o Cerrado"===vm.estadoCuenta.estado&&(vm.estado=!1),vm.fechaUtilService.getFechaActual().then(function(response){vm.toDay=vm.$filter("date")(response,"yyyyMMdd")},function(error){vm.toDay="",vm.$log.error(error)})}var vm=this;vm.cuentaService=CuentaService,vm.fechaUtilService=fechaUtilService,vm.$filter=$filter,vm.$log=$log,vm.toDay="",vm.infoCliente=vm.cuentaService.modeloCompartido,$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||(vm.infoCliente=vm.cuentaService.modeloCompartido,init())}),vm.estadoCuenta=vm.infoCliente.cuenta,vm.constancia={id:"constancia-documento",url:URL_API+"/servicios-cuentacorriente-constancia/saldoctacorriente/descargar",nombrePdf:"ConstanciaSaldoCuenta_"+vm.infoCliente.rutCliente.split("-","1").toString()+"_"+vm.toDay.toString()+".pdf",jsonData:{marcaBanco:vm.infoCliente.cliente.codigoMarca,nombreCliente:vm.infoCliente.cliente.nombreCompleto,rutCliente:vm.infoCliente.rutCliente,numeroCtaCorriente:vm.infoCliente.cuenta.numProducto,saldoDisponible:vm.infoCliente.cuenta.saldoDisponible,saldoContable:vm.infoCliente.cuenta.saldoContable},tituloCaja:"Constancia de Saldo de Cuenta Corriente"},vm.antiguedad={id:"antiguedad-documento",url:URL_API+"/servicios-cuentacorriente-constancia/antiguedad/certificado-antiguedad/descargar",nombrePdf:"CertificadoAntiguedad"+vm.infoCliente.cuenta.numProducto+"_"+vm.infoCliente.rutCliente.split("-","1").toString()+"_"+vm.toDay.toString()+".pdf",jsonData:{nombreTitular:vm.infoCliente.cliente.nombreCompleto,rutTitular:vm.infoCliente.rutCliente,nroCuentaCorriente:vm.infoCliente.cuenta.numProducto,marcaBanco:vm.infoCliente.cliente.codigoMarca,moneda:vm.infoCliente.cuenta.moneda},tituloCaja:"Certificado de Antiguedad de Cuenta Corriente"},vm.cierre={id:"cierre-documento",url:URL_API+"/servicios-cuentacorriente-constancia/cuentacorriente/certificado-cierre/descargar",nombrePdf:"CertificadoCierreCuenta_"+vm.infoCliente.cuenta.numProducto+"_"+vm.infoCliente.rutCliente.split("-","1").toString()+"_"+vm.toDay.toString()+".pdf",jsonData:{marcaBanco:vm.infoCliente.cliente.codigoMarca,tipoCertificado:3,nombreCliente:vm.infoCliente.cliente.nombreCompleto,rutCliente:vm.infoCliente.rutCliente,numeroCuentaCorriente:vm.infoCliente.cuenta.numProducto,tipoCuentaCorriente:vm.infoCliente.cuenta.codigoProducto},tituloCaja:"Constancia cierre de Cuenta Corriente"}}angular.module("WebBancoChile.servDocumentos").controller("DescargaDocumentosCtrl",DescargaDocumentosCtrl),DescargaDocumentosCtrl.$inject=["$scope","URL_API","fechaUtilService","$filter","$log","CuentaService"]}(),function(){function detalleMovimientoController($modalInstance,movimiento){function activate(){vm.movimiento=movimiento}function cancel(){$modalInstance.dismiss("cancel")}var vm=this;angular.extend(vm,{movimiento:{},cancel:cancel}),activate()}angular.module("WebBancoChile.servSaldosMvtosCuenta").controller("DetalleMovimientoController",detalleMovimientoController),detalleMovimientoController.$inject=["$modalInstance","movimiento"]}(),function(){function saldoController(UtilidadesFactory,$scope,$filter,CuentaFactory,$modal,fechaUtilService,errorHandlerService){function resetForm(){defineVisualizadosSelect(),defineCollapsedBoxes(),fechasUltimos45dias(),vm.ultimaBusquedaOK=vm.selectVisualizados.selected.id}function getFechaHoy(){UtilidadesFactory.getFechaHoy().then(function(data){vm.fechaHoy=moment(data)},function(){vm.hoy=moment()})}function fechasUltimos45dias(){vm.fechaInicio=moment().subtract(45,"days"),vm.fechaInicioFilter=moment().subtract(45,"days"),vm.fechaFin=moment(),vm.fechaFinFilter=moment()}function limpiaFechas(){vm.fechaInicioFilter=null,vm.fechaFinFilter=null}function displayTable(){vm.accountMovementsList.set(cc.cuenta.movimientosCuenta),filterList()}function filterList(){var arrayTemp=[];"cantmovs"!==vm.selectVisualizados.selected.id?(vm.fechaInicio=moment(vm.fechaInicioFilter),vm.fechaFin=moment(vm.fechaFinFilter),arrayTemp=$filter("filter")(cc.cuenta.movimientosCuenta,function(movimiento){return movimiento.fechaContable>=moment(vm.fechaInicio).startOf("day").valueOf()&&movimiento.fechaContable<=moment(vm.fechaFin).endOf("day").valueOf()?movimiento.cargos?movimiento.cargos>vm.amountRange.minAmount-1&&movimiento.cargos<vm.amountRange.maxAmount+1:movimiento.abonos?movimiento.abonos>vm.amountRange.minAmount-1&&movimiento.abonos<vm.amountRange.maxAmount+1:void 0:!1})):arrayTemp=$filter("filter")(cc.cuenta.movimientosCuenta,function(movimiento){return movimiento.cargos?movimiento.cargos>vm.amountRange.minAmount-1&&movimiento.cargos<vm.amountRange.maxAmount+1:movimiento.abonos?movimiento.abonos>vm.amountRange.minAmount-1&&movimiento.abonos<vm.amountRange.maxAmount+1:void 0}),vm.accountMovementsList.set(arrayTemp)}function rangeChange(periodo){moment(vm.fechaInicioFilter).add(45,"days").isBefore(moment(vm.fechaFinFilter))?"inicio"===periodo?vm.fechaFinFilter=moment(vm.fechaInicioFilter).add(45,"days"):vm.fechaInicioFilter=moment(vm.fechaFinFilter).subtract(45,"days"):moment(vm.fechaInicioFilter).valueOf()>moment(vm.fechaFinFilter).valueOf()&&(vm.fechaFinFilter=moment(vm.fechaInicioFilter).add(45,"days"))}function showDetalleMovimiento(idMovimiento){showModal({url:"components/cuenta/saldo/detalle_movimiento_tpl.html",controller:"DetalleMovimientoController",controllerAs:"dmov",size:"xs",resolve:{movimiento:function(){return cc.cuenta.movimientosCuenta[idMovimiento]}}})}function downloadPdf(){vm.loading=!0,vm.message={},vm.error.estadoPDF=null;var fechainipdf=vm.fechaInicio,fechafinpdf=vm.fechaFin,filter={},appendName=null,blob=null;"cantmovs"===vm.selectVisualizados.selected.id?null===vm.fechaInicioUtil&&null===vm.fechaFinUtil?vm.fechaUtilService.getFechaActual(!0).then(function(rs){return fechafinpdf=moment(rs),fechainipdf=moment(fechafinpdf).subtract(45,"days"),vm.fechaFinUtil=fechafinpdf,vm.fechaInicioUtil=fechainipdf,filter={rut:cc.rutCliente,numeroProducto:cc.cuentaTemp.numProducto,codProducto:cc.cuentaTemp.codigoProducto,fechaInicio:moment(fechainipdf).valueOf(),fechaFin:moment(fechafinpdf).valueOf()},CuentaFactory.getSaldosMovimientos(filter)},function(err){vm.error.estadoPDF=vm.errorHandlerService.gestionarError(err)}).then(function(response){null===vm.error.estadoPDF&&(appendName=moment(fechafinpdf).format("YYYY_MM_DD_HH_mm"),blob=new Blob([response],{type:"application/pdf"}),saveAs(blob,"SaldoyMovimientos_"+cc.cuentaTemp.numProducto+"_"+appendName+".pdf"),vm.loading=!1)},function(err){vm.loading=!1,vm.error.estadoPDF=vm.errorHandlerService.gestionarError(err)}):(fechafinpdf=vm.fechaFinUtil,fechainipdf=vm.fechaInicioUtil,filter={rut:cc.rutCliente,numeroProducto:cc.cuentaTemp.numProducto,codProducto:cc.cuentaTemp.codigoProducto,fechaInicio:moment(fechainipdf).valueOf(),fechaFin:moment(fechafinpdf).valueOf()},CuentaFactory.getSaldosMovimientos(filter).then(function(response){appendName=moment(fechafinpdf).format("YYYY_MM_DD_HH_mm"),blob=new Blob([response],{type:"application/pdf"}),saveAs(blob,"SaldoyMovimientos_"+cc.cuentaTemp.numProducto+"_"+appendName+".pdf"),vm.loading=!1},function(err){vm.loading=!1,vm.error.estadoPDF=vm.errorHandlerService.gestionarError(err)})):(filter={rut:cc.rutCliente,numeroProducto:cc.cuentaTemp.numProducto,codProducto:cc.cuentaTemp.codigoProducto,fechaInicio:moment(fechainipdf).valueOf(),fechaFin:moment(fechafinpdf).valueOf()},CuentaFactory.getSaldosMovimientos(filter).then(function(response){UtilidadesFactory.getFechaHoy().then(function(rs){appendName=moment(rs.data).format("YYYY_MM_DD_HH_mm"),blob=new Blob([response],{type:"application/pdf"}),saveAs(blob,"SaldoyMovimientos_"+cc.cuentaTemp.numProducto+"_"+appendName+".pdf"),vm.loading=!1})},function(){vm.loading=!1,vm.message.error="En este momento no es posible realizar la operación, intente mas tarde."}))}function open1(){vm.dtPicker={opened1:!0,opened2:!1}}function open2(){vm.dtPicker={opened1:!1,opened2:!0}}function sendMail(){var fechainiemail=vm.fechaInicio,fechafinemail=vm.fechaFin;"cantmovs"===vm.selectVisualizados.selected.id?null===vm.fechaInicioUtil&&null===vm.fechaFinUtil?vm.fechaUtilService.getFechaActual(!0).then(function(rs){fechafinemail=moment(rs),fechainiemail=moment(fechafinemail).subtract(45,"days"),vm.fechaFinUtil=fechafinemail,vm.fechaInicioUtil=fechainiemail,showModal({url:"components/cuenta/saldo/send_email_tpl.html",controller:"SendEmailSaldoController",controllerAs:"sesc",size:"xs",resolve:{filterData:function(){return{cliente:cc.cliente,cuenta:cc.cuentaTemp,fechaInicio:fechainiemail,fechaFin:fechafinemail}}}})},function(err){vm.error.estadoPDF=vm.errorHandlerService.gestionarError(err)}):(fechafinemail=vm.fechaFinUtil,fechainiemail=vm.fechaInicioUtil,showModal({url:"components/cuenta/saldo/send_email_tpl.html",controller:"SendEmailSaldoController",controllerAs:"sesc",size:"xs",resolve:{filterData:function(){return{cliente:cc.cliente,cuenta:cc.cuentaTemp,fechaInicio:fechainiemail,fechaFin:fechafinemail}}}})):showModal({url:"components/cuenta/saldo/send_email_tpl.html",controller:"SendEmailSaldoController",controllerAs:"sesc",size:"xs",resolve:{filterData:function(){return{cliente:cc.cliente,cuenta:cc.cuentaTemp,fechaInicio:fechainiemail,fechaFin:fechafinemail}}}})}function showModal(modal){var modalInstance=$modal.open({templateUrl:modal.url,animation:modal.animation?modal.animation:!0,controller:modal.controller,controllerAs:modal.controllerAs,size:modal.size?modal.size:"lg",windowClass:modal["class"]?modal["class"]:"modal-detalle",backdrop:!0,resolve:modal.resolve});modalInstance.result.then()}function findMovimientosCuenta(){vm.muestraGrilla=!0,"rangofecha"===vm.selectVisualizados.selected.id&&(vm.muestraTipFechas=!0),vm.ultimaBusquedaOK=vm.selectVisualizados.selected.id,vm.loading=!0,vm.error={detalle:{message:"",title:""},tipo:""},"function"==typeof vm.accountMovementsList&&vm.accountMovementsList.set({}),void 0!==cc.cuentaTemp&&null!==cc.cuentaTemp?cc.findMovimientos(vm.fechaFinFilter,vm.cantMovimientos).then(function(){filterList(),vm.loading=!1},function(err){vm.error={detalle:{message:err.message,title:""},tipo:"E"},vm.loading=!1}):("function"==typeof vm.accountMovementsList&&vm.accountMovementsList.set({}),vm.error={detalle:{message:"La cuenta no registra movimientos",title:""},tipo:"I"},vm.loading=!1)}function rePaginador(){vm.accountMovementsList.filter("filterPaginator",[vm.listFilter,vm.searchTextSalMov])}function defineVisualizadosSelect(){vm.selectVisualizados=[{id:"ult45dias",name:"Últimos 45 días"},{id:"rangofecha",name:"Por rango de fecha"},{id:"cantmovs",name:"Por número de movimientos"}],vm.selectVisualizados.selected=vm.selectVisualizados[0]}function defineCollapsedBoxes(){vm.isCollapsedBox1=!0,vm.isCollapsedBox2=!1,vm.isCollapsedBox3=!1}function mostrarMovimientos(){switch(defineCollapsedBoxes(),vm.muestraTipFechas=!1,vm.selectVisualizados.selected.id){case"ult45dias":vm.cantMovimientos=null,fechasUltimos45dias(),findMovimientosCuenta(),vm.searchTextSalMov=null;break;case"rangofecha":limpiaFechas(),vm.muestraGrilla=!1,vm.cantMovimientos=null,vm.searchTextSalMov=null;break;case"cantmovs":vm.muestraGrilla=!1,vm.fechaFinFilter=null,vm.searchTextSalMov=null}}var vm=this,cc=$scope.$parent.$parent.$parent.cc;angular.extend(vm,{error:{detalle:{message:"",title:""},tipo:""},message:{success:"",error:""},dtPicker:{opened1:!1,opened2:!1},amountRange:{name:"Todos",minAmount:-99999999999,maxAmount:99999999999},amountRanges:[{name:"Todos",minAmount:-99999999999,maxAmount:99999999999},{name:"$1 - $100.000",minAmount:1,maxAmount:1e5,origen:"NAC"},{name:"$100.001 - $1.000.000",minAmount:100001,maxAmount:1e6},{name:"$1.000.001 - $5.000.000",minAmount:1000001,maxAmount:5e6},{name:"Más de $5.000.000",minAmount:5000001,maxAmount:99999999999}],cuenta:{},fechaHoy:moment(),fechaInicio:null,fechaInicioFilter:null,fechaFin:null,fechaFinFilter:null,movimientos:[],accountMovementsList:{},loading:!0,rangeChange:rangeChange,searchTextSalMov:"",listFilter:["fechaContable","descripcion","sucursal","abonos","cargos","saldo"],open1:open1,open2:open2,showDetalleMovimiento:showDetalleMovimiento,filterList:filterList,mostrarMovimientos:mostrarMovimientos,downloadPdf:downloadPdf,sendMail:sendMail,findMovimientosCuenta:findMovimientosCuenta,rePaginador:rePaginador,cantMovimientos:null,muestraGrilla:!0,isCollapsedBox1:!0,isCollapsedBox2:!1,isCollapsedBox3:!1,ultimaBusquedaOK:null,fechaUtilService:fechaUtilService,errorHandlerService:errorHandlerService,fechaInicioUtil:null,fechaFinUtil:null,muestraTipFechas:!1}),$scope.$watch(function(){return $scope.$parent.$parent.$parent.cc.cuenta},function(newVal){_.isEmpty(newVal)||(vm.cuenta=newVal,displayTable(),getFechaHoy())}),resetForm()}angular.module("WebBancoChile.servSaldosMvtosCuenta").controller("SaldoController",saldoController),saldoController.$inject=["UtilidadesFactory","$scope","$filter","CuentaFactory","$modal","fechaUtilService","errorHandlerService"]}(),function(){function sendEmailSaldoController($scope,$uibModalInstance,$timeout,$injector,filterData){function activate(){vm.mail=_.map(filterData.cliente.informacionBasica.correosCliente,function(mail){return{valor:mail}}),0===vm.mail.length&&(vm.chargedChecksObj={error:!0,message:"El cliente no tiene correos registrados, se debe actualizar datos de contactabilidad",type:"information"}),vm.loading=!1}function cancel(){$uibModalInstance.dismiss("cancel")}function sendMail(){var sendObj={rut:filterData.cliente.rutCliente,numeroProducto:filterData.cuenta.numProducto,codigoMarca:filterData.cliente.codigoMarca,mail:vm.mailSelected,codProducto:filterData.cuenta.codigoProducto,fechaInicio:moment(moment(filterData.fechaInicio).format("YYYY MM DD")).valueOf(),fechaFin:moment(moment(filterData.fechaFin).format("YYYY MM DD")).valueOf()};vm.mailSelected="",CuentaFactory.envioPdfSaldoMovimientos(sendObj).then(function(data){vm.chargedChecksObj={error:!0,message:data.mensaje,type:"success"}},function(err){vm.chargedChecksObj={error:!0,message:err.message,type:err.type}})}var vm=this,CuentaFactory=$injector.get("CuentaFactory");angular.extend(vm,{mail:[],chargedChecksObj:{error:!1,message:"",type:""},mailSelected:"",loading:!0,sendEmailBtn:!0,perfilUsuario:{},datosCliente:{},cancel:cancel,sendMail:sendMail}),activate()}angular.module("WebBancoChile.servSaldosMvtosCuenta").controller("SendEmailSaldoController",sendEmailSaldoController),sendEmailSaldoController.$inject=["$scope","$uibModalInstance","$timeout","$injector","filterData"]}(),function(){function formatearCuenta(){return function(srcCuentas){for(var i=0;i<srcCuentas.length;i++)esCuentaMonedaNacional(srcCuentas[i])?srcCuentas[i].glosaItem=srcCuentas[i].numProducto+" M/N":srcCuentas[i].glosaItem=srcCuentas[i].numProducto+" M/E";return srcCuentas}}function esCuentaMonedaNacional(cuenta){var CuentasNacionales=["CTD","YTD","JUV"];return"CLP"===cuenta.moneda||CuentasNacionales.indexOf(cuenta.codigoProducto)>-1||cuenta.descripcion.indexOf("Moneda Local")>-1}function concatenarCamposGlosa(){return function(items,campos){return items.forEach(function(item){item.glosaItem="",campos.forEach(function(campo,idx){item.glosaItem+=item[campo],item.glosaItem=idx<campos.length-1?item.glosaItem+" ":item.glosaItem+""})}),items}}function filtrarProductos($filter){return function(srcProductos,filtro){var obj,src,output=[];for(var nombreCampo in filtro)if(angular.isArray(filtro[nombreCampo])){output=[];for(var i=0;i<filtro[nombreCampo].length;i++)obj={},obj[nombreCampo]=filtro[nombreCampo][i],src=$filter("filter")(srcProductos,obj),output=src&&src.length>0&&!angular.equals(src,output)?output.concat(src):output;srcProductos=angular.copy(output)}return output}}function filtrarProductosExcluir($filter){return function(srcProductos,filtro){var obj,src;for(var nombreCampo in filtro)if(angular.isArray(filtro[nombreCampo]))for(var i=0;i<filtro[nombreCampo].length;i++)obj={},obj[nombreCampo]=filtro[nombreCampo][i],src=$filter("filter")(srcProductos,obj),srcProductos=angular.copy(src);return srcProductos}}function eliminarDuplicadosLista(){return function(src,nombreCampo){var output=[],keys=[];return src&&angular.forEach(src,function(item){var obj=item[nombreCampo];-1===keys.indexOf(obj)&&(keys.push(obj),output.push(item))}),output}}angular.module("WebBancoChile.listaItemsDirective").filter("formatearCuenta",formatearCuenta).filter("filtrarProductos",filtrarProductos).filter("filtrarProductosExcluir",filtrarProductosExcluir).filter("eliminarDuplicadosLista",eliminarDuplicadosLista).filter("concatenarCamposGlosa",concatenarCamposGlosa)}(),function(){function cantidadProducto(){return function(productos,idProducto){var cant=0;if(productos&&productos.length>0)for(var i=0;i<productos.length;i++)productos[i].tipo.id===idProducto&&cant++;
return cant}}function totalGrupoEstado($filter){return function(productos,grupo,estado){var cant=0,filtro=[];return grupo&&(filtro=$filter("filter")(productos,{grupo:grupo},!0)),estado&&filtro&&filtro.length>0&&(filtro=$filter("filter")(filtro,{estado:estado},!0)),cant=angular.isArray(filtro)?filtro.length:cant}}function totalGrupoPorBloquear($filter){return function(productos,grupo,textoPlural,textoSingular){var cant=0,isMarcaVerificacion=!0,filtro=[];return grupo&&(filtro=$filter("filter")(productos,{grupo:grupo,marcaVerificacion:isMarcaVerificacion},!0),cant=angular.isArray(filtro)?filtro.length:cant),textoPlural&&textoSingular?1===cant?cant+" "+textoSingular:cant+" "+textoPlural:cant}}function totalPorCampo($filter){return function(productos,nombreCampo,valor){var cant=0,objAgrupar={};if(nombreCampo){objAgrupar[nombreCampo]=valor;var filtro=[];filtro=$filter("filter")(productos,objAgrupar,!0),cant=angular.isArray(filtro)?filtro.length:cant}return cant}}function totalGrupoPropietario($filter){return function(productos,grupo,propietario,textoPlural,textoSingular){var cant=0,filtro=$filter("filter")(productos,{grupo:grupo,propietario:{descripcion:propietario}},!0);return cant=angular.isArray(filtro)?filtro.length:cant,textoSingular=textoSingular?textoSingular:"",textoPlural=textoPlural?textoPlural:"",1===cant?cant+" "+textoSingular:cant+" "+textoPlural}}function listaformatoError(){return function(productos){for(var mensajeHtml="",nuevoElemento="",len=productos.length,element='<span class="mr-20"><b>$1</b>: $2</span>',space='<span class="ml-5 mr-5"><b>-</span>',i=0;len>i;i++)nuevoElemento=element.indexOf("$1",productos[i].tipo.descripcion),nuevoElemento=element.indexOf("$2",productos[i].numero),mensajeHtml+=nuevoElemento,mensajeHtml=len-1>i?space:"";return mensajeHtml}}function existeAlgunaTarjeta(taller,$filter){return function(productos){var cantTarjetasCredito=0,cantTarjetasDebito=0;return productos&&productos.length>0&&(cantTarjetasCredito=$filter("totalGrupoPorBloquear")(productos,taller.TARJETAS_CREDITO.grupo),cantTarjetasDebito=$filter("totalGrupoPorBloquear")(productos,taller.TARJETAS_DEBITO.grupo)),cantTarjetasCredito>0||cantTarjetasDebito>0}}function existeAlgunaTarjetaBloqueada(taller,estados,$filter){return function(productos){var cantTarjetasCredito=0,cantTarjetasDebito=0;return productos&&productos.length>0&&(cantTarjetasCredito=$filter("totalGrupoPorBloquear")(productos,taller.TARJETAS_CREDITO.grupo,estados.BLOQUEADO),cantTarjetasDebito=$filter("totalGrupoPorBloquear")(productos,taller.TARJETAS_DEBITO.grupo,estados.BLOQUEADO)),cantTarjetasCredito>0||cantTarjetasDebito>0}}function esValidoPermiso(PERMISSIONS_EM){return function(permisosUsuario,permisos){for(var isAnyPermiso=!1,permiso=null,i=0;i<permisos.length;i++)for(var j=0;j<PERMISSIONS_EM[permisos[i]].length;j++)permiso=PERMISSIONS_EM[permisos[i]][j],permisosUsuario.indexOf(permiso)>-1&&(isAnyPermiso=!0);return isAnyPermiso}}function definirRangosDePublicaciones(){return function(rangos){var cantPublicaciones=0,publicaciones=[],lapsoPublicaciones=4;if(rangos&&rangos.length>0){cantPublicaciones=Math.ceil(rangos.length/4);for(var contPub=0,i=0;i<rangos.length;i+=lapsoPublicaciones)contPub+=1,publicaciones.push({id:contPub,rangos:rangos.slice(i,i+lapsoPublicaciones)})}return{cantPublicaciones:cantPublicaciones,publicaciones:publicaciones}}}function glosaRango(){return function(rango,esUltimo,esPrimero){var glosa;return rango&&rango.inicio!==rango.fin?(glosa=rango.inicio+" al "+rango.fin,glosa+=esUltimo?"":" - "):rango?(glosa=rango.inicio,glosa+=esUltimo&&esPrimero?"":" - "):" - "}}angular.module("WebBancoChile.sharesComponentes").filter("cantidadProducto",cantidadProducto).filter("totalGrupoEstado",totalGrupoEstado).filter("totalGrupoPorBloquear",totalGrupoPorBloquear).filter("totalPorCampo",totalPorCampo).filter("totalGrupoPropietario",totalGrupoPropietario).filter("existeAlgunaTarjeta",existeAlgunaTarjeta).filter("existeAlgunaTarjetaBloqueada",existeAlgunaTarjetaBloqueada).filter("listaformatoError",listaformatoError).filter("esValidoPermiso",esValidoPermiso).filter("definirRangosDePublicaciones",definirRangosDePublicaciones).filter("glosaRango",glosaRango)}(),angular.module("WebBancoChile.perfilEjecutivo").filter("movilLargo11",function(){return function(tlf){if(angular.isUndefined(tlf)||null==tlf||""===tlf)return"";var celular=angular.copy(tlf);if(11===celular.length){var prefijo="+";return celular=prefijo+celular,celular.substr(0,3)+" "+celular.substr(3,1)+" "+celular.substr(4,4)+" "+celular.substr(8,4)}return celular}}),function(){angular.module("WebBancoChile.bloqueoCuentaLinea").directive("bloqueoCuentaLinea",function(){return{transclude:!0,bindToController:!0,restrict:"E",scope:{objetoprod:"=",tipoprod:"="},templateUrl:"components/bloqueo-cuenta-linea/view/bloqueo-cuenta-linea_tpl.html",controller:"bloqueoCuentaLineaCtrl",controllerAs:"bloqCtaLin"}})}(),function(){function ngClickFocus(focus){return function(scope,elem,attr){elem.on("click",function(){focus(attr.clickFocusId)}),scope.$on("$destroy",function(){elem.off("click")})}}angular.module("WebBancoChile.clickFocus").directive("ngClickFocus",ngClickFocus),ngClickFocus.$inject=["focus"]}(),angular.module("WebBancoChile.blockView",["WebBancoChile.perfilusuario","WebBancoChile.constants"]).directive("ngBlockView",function($window,PerfilUsuarioService,$compile,$log){var vm=this;return vm.obtenerPermisos=function(){var promise=PerfilUsuarioService.getPerfilSession();return promise.then(function(){vm.perfilusuario=PerfilUsuarioService.getPerfilActual(),vm.allPermisosUsuario=vm.perfilusuario.permisos?vm.perfilusuario.permisos:[]},function(){$log.error("Sin sesion")}),promise},vm.gestionarVisibilidadVista=function($scope,$element){var html='<div class="bch-mensaje-empresas information"><article>No tiene permisos de visualización</article></div>',e=$compile(html)($scope);if($scope.role&&""!==$scope.role&&-1===vm.allPermisosUsuario.indexOf($scope.role))$scope.ocultarMessage?$element.remove():$element.replaceWith(e);else if($scope.roles&&$scope.roles.length>0){for(var tieneAlgunPermiso=!1,i=0;i<$scope.roles.length;i++)if(vm.allPermisosUsuario.indexOf($scope.roles[i])>-1)return void(tieneAlgunPermiso=!0);tieneAlgunPermiso||($scope.ocultarMessage?$element.remove():$element.replaceWith(e))}},{restrict:"A",scope:{role:"@",roles:"=",ocultarMessage:"="},controller:function($scope,$element){vm.obtenerPermisos().then(function(){vm.gestionarVisibilidadVista($scope,$element)})}}}),function(){angular.module("WebBancoChile.cajaDescargaDocumento").directive("ngCajaDescargaDocumento",function(){return{restrict:"E",scope:{config:"=config"},templateUrl:"components/caja_descarga_documento/view/caja_descarga_documento_tpl.html",controller:"cajaDescargaDocumentoCtrl",controllerAs:"vm"}})}(),function(){function descargarPdf(){function link(scope,element){function convertirImgDescargarPDF(){html2canvas(document.getElementById(scope.descargarPdf),{onrendered:function(canvas){var data=canvas.toDataURL(),docDefinition={content:[{image:data,width:500}]};pdfMake.createPdf(docDefinition).download(scope.nombrePdf,".pdf")}})}element.on("click",convertirImgDescargarPDF)}return{scope:{descargarPdf:"@",nombrePdf:"@"},link:link}}angular.module("WebBancoChile.descargarPdf").directive("descargarPdf",descargarPdf)}(),function(){function listaSucursales(){return{restrict:"AE",scope:{sucursal:"=",idPorDefecto:"@?",titulo:"@?",isDisabled:"=",region:"@?",isInvalido:"=",error:"=?"},templateUrl:"commons/lista-sucursales/lista-sucursales_tpl.html",controller:sucursalesController,controllerAs:"ctrlSucursal",bindToController:!0,replace:!0}}function sucursalesController($scope,listaSucursalesFactory,$filter,$log){function activate(){obtenerSucursales(),vm.sucursal&&vm.sucursal.nombreSucursal&&vm.sucursal.codigoSucursal&&(vm.isCargando=!1)}function obtenerSucursales(){var filtro;vm.isCargando=angular.isUndefined(vm.isCargando)?!0:vm.isCargando,listaSucursalesFactory.getListaSucursales(vm.region).then(function(data){vm.isCargando=!1,vm.sucursales=data.sucursales,vm.sucursales=$filter("orderBy")(vm.sucursales,"codigoSucursal"),vm.sucursales.length>0&&vm.idPorDefecto?(filtro=$filter("filter")(vm.sucursales,{codigoSucursal:vm.idPorDefecto}),vm.sucursal=filtro&&filtro.length>0?filtro[0]:null):vm.sucursal&&vm.sucursal.codigoSucursal?(filtro=$filter("filter")(vm.sucursales,{codigoSucursal:vm.sucursal.codigoSucursal}),vm.sucursal=filtro&&filtro.length>0?filtro[0]:null,vm.mostrarLista=!1):cambiarSucursal(),$log.info("[Invocación directiva: Sucursales] Sucursales cargadas: "+vm.sucursales.length)},function(err){vm.isCargando=!1,vm.error=err;var errorCatalogo=err&&err.catalogMessage?err.catalogMessage:err;$log.error("[Invocación directiva: Sucursales] Error al cargar las sucursales "+errorCatalogo)})}function cambiarSucursal(){vm.sucursal=null,vm.mostrarLista=!0}var vm=this;angular.extend(vm,{titulo:vm.titulo?vm.titulo:"Sucursales",region:vm.region?vm.region:0,mostrarLista:vm.idPorDefecto?!1:!0,cambiarSucursal:cambiarSucursal}),$scope.$watch("ctrlSucursal.sucursal",function(){vm.sucursal&&(vm.isInvalido=!1)},!0),activate()}angular.module("WebBancoChile.listaSucursalesDirective").directive("listaSucursales",listaSucursales),sucursalesController.$inject=["$scope","listaSucursalesFactory","$filter","$log"]}(),function(){function listaItems(){return{restrict:"AE",require:{form:"^"},scope:{name:"@",item:"=",titulo:"@?",items:"=",glosaCampos:"=",porDefecto:"=?",primeroPorDefecto:"=?",isDisabled:"=",filtro:"=?",filtroExcluir:"=?",cfg:"@",formatearCuentas:"=?",error:"=?",ngRequired:"=",funcion:"&",classUiSelect:"@?",classP:"@?",opcionalTodasCuentas:"@?"},templateUrl:"commons/lista-items/lista-items_tpl.html",controller:ItemsController,controllerAs:"ctrl",bindToController:!0,replace:!0}}function ItemsController($scope,$filter){function aplicarFitrosItems(){vm.items=vm.glosaCampos&&vm.glosaCampos.length>1&&!vm.formatearCuentas?$filter("concatenarCamposGlosa")(vm.items,vm.glosaCampos):vm.items,vm.items=vm.filtro?$filter("filtrarProductos")(vm.items,vm.filtro):vm.items,vm.items=vm.filtroExcluir?$filter("filtrarProductosExcluir")(vm.items,vm.filtroExcluir):vm.items,vm.items=vm.formatearCuentas?$filter("formatearCuenta")(vm.items):vm.items,vm.items=vm.filtro||vm.filtroExcluir?$filter("eliminarDuplicadosLista")(vm.items,"numProducto"):vm.items,opcionSeleccionarTodasCuentas()}function opcionSeleccionarTodasCuentas(){vm.items.length>0&&vm.opcionalTodasCuentas&&vm.items.unshift({numProducto:null,glosaItem:vm.opcionalTodasCuentas})}function ordenarProductos(){vm.items=vm.cfg&&vm.cfg.ordenarPor?$filter("orderBy")(vm.productos,vm.cfg.ordenarPor):vm.items}function seleccionarItem(){angular.isDefined(vm.funcion)&&(vm.error=!1,vm.funcion())}function setearItemPorDefecto(){vm.mostrarLista=!1,vm.porDefecto&&vm.porDefecto.isPrimero?vm.item=vm.items[0]:vm.item&&vm.porDefecto.filtro?vm.item=$filter("filter")(vm.items,vm.porDefecto.filtro):mostrarComponente()}function mostrarComponente(){vm.item=null,vm.mostrarLista=!0}function resetFormulario(){vm.form[vm.name].$setPristine(),vm.form[vm.name].$setUntouched()}var vm=this;angular.extend(vm,{titulo:vm.titulo?vm.titulo:"",mostrarLista:vm.porDefecto?!1:!0,seleccionarItem:seleccionarItem,resetFormulario:resetFormulario}),vm.classUiSelect=vm.classUiSelect?vm.classUiSelect:"",$scope.$watch(["ctrl.items","ctrl.filtro","ctrl.filtroExcluir"],function(){aplicarFitrosItems(),vm.items&&vm.items.length>1?(ordenarProductos(),setearItemPorDefecto()):vm.items&&1===vm.items.length?(vm.item=vm.items[0],vm.mostrarLista=!1):(vm.item=null,vm.mostrarLista=!1)},!0),$scope.$watch("ctrl.item",function(){vm.item&&(vm.isInvalido=!1)},!0)}angular.module("WebBancoChile.listaItemsDirective").directive("listaItems",listaItems),ItemsController.$inject=["$scope","$filter"]}(),function(){function listaRegComCiu(){return{bindToController:!0,transclude:!0,restrict:"A",require:["^form"],scope:{rutCliente:"=",codigoMarca:"=",regionSel:"=",ciudadSel:"=",comunaSel:"=",error:"=",regionesCargadas:"=?",nombreForm:"=",ngRequired:"="},templateUrl:"commons/lista-region-comuna-ciudad/lista-reg-com-ciu_tpl.html",controller:listaRegComCiuCtrl,controllerAs:"ctrl",replace:!0}}function listaRegComCiuCtrl(listaRegComCiuFactory){function obtieneRegionCiudadComunaEnvio(){vm.cargando=!0,getRegionCiudadComuna(vm.rutCliente,vm.codigoMarca)}function cargaComboRegion(){vm.regionSelected=null,vm.ciudadSelected=null,vm.comunaSelected=null,vm.regiones=llenaListaRegiones(vm.regionesCiudadesComunas),vm.regionesCargadas=!0}function llenaListaRegiones(listaEntrada){var listaSalida=[];return angular.forEach(listaEntrada,function(value){var input={dato:{codigo:value.entidadRegion.codigo,nombre:value.entidadRegion.nombre},ciudades:value.ciudades};listaSalida.push(input)}),listaSalida}function cargaCiudades(){vm.ciudadSelected=null,vm.comunaDisabled=!0,vm.regionSelected&&(vm.ciudades=llenaListaCiudades(vm.regionSelected.ciudades),vm.regionSel=vm.regionSelected.dato.nombre,vm.ciudadDisabled=!1),cargaComunas()}function llenaListaCiudades(listaEntrada){var listaSalida=[];return angular.forEach(listaEntrada,function(value){listaSalida.push({dato:{codigo:value.entidadCiudad.codigo,nombre:value.entidadCiudad.nombre},comunas:value.comunas})}),listaSalida}function cargaComunas(){vm.comunaSelected=null,vm.ciudadSelected&&null!==vm.ciudadSelected?(vm.ciudadSel=vm.ciudadSelected.dato.nombre,vm.comunas=llenaListaComuna(vm.ciudadSelected.comunas),vm.comunaDisabled=!1):vm.comunas=[]}function llenaListaComuna(listaEntrada){var listaSalida=[];return angular.forEach(listaEntrada,function(value){listaSalida.push({dato:value})}),listaSalida}function seteaComunaSelected(){vm.comunaSelected&&null!==vm.comunaSelected&&(vm.comunaSel=vm.comunaSelected.dato.nombre)}function getRegionCiudadComuna(rutCliente,marcaCliente){isNotNull(rutCliente)&&(existeRegionCiudadComuna()?(vm.regionesCiudadesComunas=vm.regionCiudadComuna.regiones,cargaComboRegion()):listaRegComCiuFactory.obtenerRegionCiudadComuna(rutCliente,marcaCliente).then(function(rs){vm.regionCiudadComuna=rs,vm.regionesCiudadesComunas=rs.regiones,cargaComboRegion(),vm.cargando=!1,vm.regionDisabled=!1},function(error){vm.error=error}))}function existeRegionCiudadComuna(){return angular.isDefined(vm.regionCiudadComuna)&&null!==vm.regionCiudadComuna}function isNotNull($value){return angular.isDefined($value)&&null!==$value&&""!==$value}var vm=this;angular.extend(vm,{regionSelected:null,ciudadSelected:null,comunaSelected:null,error:null,regionCiudadComuna:null,cargaCiudades:cargaCiudades,cargaComunas:cargaComunas,seteaComunaSelected:seteaComunaSelected,regionDisabled:!0,ciudadDisabled:!0,comunaDisabled:!0}),obtieneRegionCiudadComunaEnvio()}angular.module("WebBancoChile.listaRegComCiuDirective").directive("listaRegComCiu",listaRegComCiu),listaRegComCiuCtrl.$inject=["listaRegComCiuFactory"]}(),function(){function link(scope,element,attrs,ngModel){function keypress(e){var re=/[0-9]|\.|[\,]/g;return re.test(String.fromCharCode(e.keyCode))}function isEmpty(value){return angular.isUndefined(value)||""===value||null===value||value!==value}function parseNumber(n){if(!isEmpty(n)){var s=n.toString().replace(/\./g,"").split(",");return isEmpty(s[1])?isNaN(parseInt(s[0],10))?0:parseInt(s[0],10):parseFloat(s[0]+"."+truncarDecimalesNumber(s[1],scope.ngDecimales))}return n}function toString(v){if(!isEmpty(v)){var value=v.toString(),n=value.split("."),r=n[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");if(!isEmpty(n[1])){var trunk=truncarDecimalesNumber(n[1],scope.ngDecimales);r+=""!==trunk?","+trunk:trunk}return r}}function strRightPad(str,pad,length){for(var decimales="",c=str.length;length>c;c++)decimales+=pad;return str+decimales}function truncarDecimalesNumber(number,maxLength){var truncado=number;return isEmpty(maxLength)||(truncado=number.length>maxLength?number.substring(0,maxLength):strRightPad(number,"0",maxLength)),truncado}function validator(){void 0!==attrs.ngnumbermin&&(ngModel.$validators.ngNumberMin=function(value){return isEmpty(value)||parseFloat(value)>=parseFloat(attrs.ngnumbermin)}),void 0!==attrs.ngnumbermax&&(ngModel.$validators.ngNumberMax=function(value){return isEmpty(value)||parseFloat(value)<=parseFloat(attrs.ngnumbermax)})}element.on("keypress",keypress),element.on("blur",function(){ngModel.$setViewValue(toString(parseNumber(ngModel.$viewValue))),ngModel.$render()}),ngModel.$parsers.push(parseNumber),ngModel.$formatters.push(toString),scope.$watch("ngDecimales",function(){ngModel.$setViewValue(toString(parseNumber(ngModel.$viewValue))),ngModel.$render()},!0),validator()}function directive(){return{restrict:"A",require:"ngModel",link:link,scope:{ngDecimales:"=ngDecimales"}}}angular.module("WebBancoChile.ngNumber").directive("ngBchNumber",directive)}(),function(){function seleccionarTodos($log){function linkFn(scope,element,attrs){attrs.$attr.padre?element.on("change",function(){for(var isNotDisabled,elementoPadre=angular.element(element)[0].checked,elementosHijos=angular.element(document.querySelectorAll("input[seleccionar-todos][hijo]")),i=0;i<elementosHijos.length;i++)isNotDisabled=-1===elementosHijos[i].parentElement.className.indexOf("ng-hide")&&-1===elementosHijos[i].parentElement.className.indexOf("deshabilitado"),elementosHijos[i].checked!==elementoPadre&&!elementosHijos[i].disabled&&isNotDisabled&&(elementosGrupo[i].checked=elementoPadreGrupo)}):attrs.$attr.grupoPadre?($log.log("Atributos Padre: "+attrs.$attr.grupoPadre),element.on("change",function(){for(var isNotDisabled,elementoPadreGrupo=angular.element(element)[0].checked,grupo="input[grupo="+angular.element(element).attr("grupo-padre")+"]",elementosGrupo=angular.element(document.querySelectorAll(grupo)),i=0;i<elementosGrupo.length;i++)isNotDisabled=-1===elementosGrupo[i].parentElement.className.indexOf("ng-hide")&&-1===elementosGrupo[i].parentElement.className.indexOf("deshabilitado"),elementosGrupo[i].checked!==elementoPadreGrupo&&!elementosGrupo[i].disabled&&isNotDisabled&&(elementosGrupo[i].checked=elementoPadreGrupo)}),validarSeleccionTodos(element)):attrs.$attr.hijo&&element.on("click",function(){attrs.$attr.grupo&&validarSeleccionGrupo(element),validarSeleccionTodos(element)})}function validarSeleccionTodos(element){for(var isNotDisabled,elementosHijos=angular.element(document.querySelectorAll("input[seleccionar-todos][hijo]")),isMismoEstadoHijos=!0,i=0;i<elementosHijos.length;i++)isNotDisabled=-1===elementosHijos[i].parentElement.className.indexOf("ng-hide")&&-1===elementosHijos[i].parentElement.className.indexOf("deshabilitado"),elementosHijos[i].checked!==angular.element(element)[0].checked&&!elementosHijos[i].disabled&&isNotDisabled&&(isMismoEstadoHijos=!1);var elementoPadre=angular.element(document.querySelectorAll("input[seleccionar-todos][padre]"));isMismoEstadoHijos&&elementoPadre.length>0?elementoPadre[0].checked=angular.element(element)[0].checked:elementoPadre.length>0&&(elementoPadre[0].checked=!1)}function validarSeleccionGrupo(element){for(var isNotDisabled,grupoHijo="input[grupo="+angular.element(element).attr("grupo")+"]",elementosGrupo=angular.element(document.querySelectorAll(grupoHijo)),grupoPadre="input[grupo-padre="+angular.element(element).attr("grupo")+"]",elementoPadre=angular.element(document.querySelectorAll(grupoPadre)),isMismoEstadoHijos=!0,i=0;i<elementosGrupo.length;i++)isNotDisabled=-1===elementosGrupo[i].parentElement.className.indexOf("ng-hide")&&-1===elementosGrupo[i].parentElement.className.indexOf("deshabilitado"),elementosGrupo[i].checked!==angular.element(element)[0].checked&&!elementosGrupo[i].disabled&&isNotDisabled&&(isMismoEstadoHijos=!1);cambiarCheckPadre(isMismoEstadoHijos,elementoPadre,element)}function cambiarCheckPadre(isMismoEstadoHijos,elementoPadre,element){isMismoEstadoHijos&&elementoPadre&&elementoPadre.length>0?elementoPadre[0].checked=angular.element(element)[0].checked:elementoPadre&&elementoPadre.length>0&&(elementoPadre[0].checked=!1)}return{restrict:"A",link:linkFn}}angular.module("WebBancoChile.seleccionarTodos").directive("seleccionarTodos",seleccionarTodos)}(),function(){function compile($compile){return function(scope,element,attrs){scope.$watch(function(scope){return scope.$eval(attrs.compile)},function(value){element.html(value),$compile(element.contents())(scope)})}}angular.module("WebBancoChile.errorHandler").directive("compile",compile)}(),function(){function ngErrorHandler(){return{transclude:!0,restrict:"A",scope:{cargando:"=",error:"=",funcion:"&",inline:"=",tipoError:"=",template:"=",tipoButton:"@",aside:"=?"},templateUrl:function(elem,attrs){return"S"===attrs.template?"components/error-handler/templates/error-handler-servicio_tpl.html":"M"===attrs.template?"components/error-handler/templates/error-handler-mesa_tpl.html":"F"===attrs.template?"components/error-handler/templates/error-handler-fallo_tpl.html":"components/error-handler/templates/error-handler-alerta_tpl.html"},bindToController:!0,controller:"errorHandlerCtrl",controllerAs:"ehc"}}angular.module("WebBancoChile.errorHandler").directive("ngErrorHandler",ngErrorHandler)}(),angular.module("WebBancoChile.headerInput").directive("ngEnterF",function(){function link(scope,element,attrs){"submit"!==attrs.type&&element.on("keypress",function(e){13===e.keyCode?(element.data().$ngModelController.$setTouched(),scope.$digest(),scope.$apply(function(){scope.$eval(attrs.ngEnterF)})):(element.data().$ngModelController.$setUntouched(),scope.$digest())})}return{restrict:"A",priority:1,link:link}}),function(){angular.module("WebBancoChile.headerInput").directive("focusout",["$parse",function($parse){return{compile:function($element,attr){var fn=$parse(attr.focusout);return function(scope,element){element.on("focusout",function(event){scope.$apply(function(){fn(scope,{$event:event})})})}}}}])}(),function(){function controller($scope){this.$scope=$scope}function directive(){return{restrict:"E",scope:{menus:"="},controller:["$scope",controller],controllerAs:"ctrl",templateUrl:"commons/templates/header-menu/menu/bchui.menu.view_tpl.html"}}controller.prototype.open=function(menu,items){angular.forEach(items,function(i){i.open=!1}),menu.open=!menu.open},controller.prototype.closeAll=function(){angular.forEach(this.$scope.menus.items,function(value){value.open=!1,angular.forEach(value.items,function(value){value.open=!1})})},angular.module("WebBancoChile.headerMenu").directive("bchuiMenu",directive)}(),function(){function consultaOnpCheques(){return{scope:{cuenta:"=",onp:"=",checked:"=",cfg:"=",rut:"=",grupo:"@",funcion:"&",chequesSiempreDeshabilitados:"=?"},replace:!0,templateUrl:"components/view/orden-no-pago-consulta/view/orden-no-pago-cheques/orden-no-pago-cheques_tpl.html",controller:consultaOnpChequeCtrl,controllerAs:"ctrlCheque",bindToController:!0}}function consultaOnpChequeCtrl($log,$scope,CFG_ONP,ALERTA_ONP,consultaChequeONPFactory){function activate(){var isAlerta=vm.alerta&&vm.alerta.detalle;!vm.onp.cheques||0===vm.onp.cheques.length||isAlerta?obtenerCheques():vm.isCargando=!1}function obtenerCheques(){vm.onp.cheques=vm.alerta={},vm.isCargando=!0,"undefined"==typeof vm.chequesSiempreDeshabilitados&&(vm.chequesSiempreDeshabilitados=!1),consultaChequeONPFactory.getCheques(vm.rut,vm.cuenta,vm.onp).then(function(rs){vm.log.log("[obtenerCheques onp]"),vm.isCargando=!1;var cheques=[];rs&&rs.length>0&&(cheques=rs.filter(function(cheque){return cheque.estadoCheque===vm.ESTADOS_CHEQUE.ONP}),vm.onp.cheques=cheques.length>0?rs:{}),vm.alerta=0===cheques.length?vm.ALERTA_ONP[vm.cfg.nombreAlerta]:{}},function(error){vm.isCargando=!1,vm.log.log("[Error al consultar cheques onp] : "+JSON.stringify(error)),vm.alerta=vm.ALERTA_ONP.servicio_NoDisponible_Cheques})}function actualizarRangos(){vm.onp.chequesSeleccionados=vm.onp.cheques.filter(function(item){return item.checked===!0}),angular.isDefined(vm.funcion)&&vm.funcion()}function esChequeDisabled(cheque){return"undefined"!==vm.chequesSiempreDeshabilitados&&vm.chequesSiempreDeshabilitados===!0?!0:cheque.estadoCheque!==vm.ESTADOS_CHEQUE.ONP}$log.log("[consultaChequeCtrl]");var vm=this;angular.extend(vm,{log:$log,isCargando:!0,alerta:{},ALERTA_ONP:ALERTA_ONP,ESTADOS_CHEQUE:CFG_ONP.ESTADOS_CHEQUE,esChequeDisabled:esChequeDisabled,actualizarRangos:actualizarRangos}),activate()}angular.module("WebBancoChile.ordenNoPago").directive("consultaOnpCheques",consultaOnpCheques),consultaOnpChequeCtrl.$inject=["$log","$scope","CFG_ONP","ALERTA_ONP","consultaChequeONPFactory"]}(),function(){function onpConsultaMantencion(){return{scope:{titulo:"@",descripcion:"@",numeroCuenta:"=",cliente:"=",onps:"=?",filtro:"=",cfgCheques:"=",totalCheques:"=",totalOnpsConsulta:"=",alertaSinCheques:"=",mostarIcono:"=?",mostrarNumeroSolicitud:"=?",chequesSiempreDeshabilitados:"=?"},replace:!0,templateUrl:"components/view/orden-no-pago-consulta/view/orden-no-pago-consulta_tpl.html",controller:ConsultaOnpCtrl,controllerAs:"ctrlConsultaOnp",bindToController:!0}}function ConsultaOnpCtrl($scope,$timeout,$log,ALERTA_ONP,consultaOnpFactory,CFG_ONP){function setearPaginador(rs){vm.isCollapsedConsultaONP=[],vm.paginator.set(rs),vm.paginator.setRegistrosPorPagina(5),vm.paginator.paginacion.listadoRegistrosPaginacion=[5,10,20,30]}function obtenerOnps(){vm.onps=[],vm.alerta={},vm.isCargando=!0,consultaOnpFactory.getOnpByFiltro(vm.numeroCuenta,vm.filtro).then(function(rs){vm.isCargando=!1,vm.totalOnpsConsulta=rs.length,rs&&vm.totalOnpsConsulta>0?setearPaginador(rs):(vm.paginator.set(null),vm.alerta=ALERTA_ONP.cliente_sin_onps)},function(error){vm.isCargando=!1,$log.log("[Error al consultar onps] : "+JSON.stringify(error)),vm.alerta=ALERTA_ONP.servicio_NoDisponible_onps})}function calcularRangosOnp(){vm.alertaSinCheques={};var tmpInicio,tmpFin,index,rangos=[],onpsConChequesSeleccionados=vm.paginator.list.filter(function(onp){return onp.chequesSeleccionados&&onp.chequesSeleccionados.length>0}),totalCheques=0;angular.forEach(onpsConChequesSeleccionados,function(onp){tmpInicio=0,tmpFin=0,index=1;var tmpOnp=setearDatosOnp(onp);angular.forEach(onp.chequesSeleccionados,function(cheque){totalCheques++,0===tmpInicio?(tmpInicio=cheque.numeroCheque,tmpFin=cheque.numeroCheque):tmpInicio+index===cheque.numeroCheque?(tmpFin=cheque.numeroCheque,index+=1):(rangos.push(setearRangoOnp(tmpOnp,tmpInicio,tmpFin)),index=1,tmpInicio=cheque.numeroCheque,tmpFin=cheque.numeroCheque)}),rangos.push(setearRangoOnp(tmpOnp,tmpInicio,tmpFin))}),vm.onps=rangos,vm.totalCheques=totalCheques,$log.log("[calcularRangos onp rangos] : "+JSON.stringify(vm.onps)),$log.log("[calcularRangos onp totalCheques] : "+JSON.stringify(vm.totalCheques))}function setearDatosOnp(onp){var tmpOnp=angular.copy(onp);return tmpOnp.estado=!1,delete tmpOnp.cheques,delete tmpOnp.chequesSeleccionados,tmpOnp}function setearRangoOnp(onp,tmpInicio,tmpFin){var tmpOnp=angular.copy(onp);return tmpOnp.serieInicio=tmpInicio,tmpOnp.serieFin=tmpFin,tmpOnp}$log.log("[Invocación][ctrlConsultaOnp]");var vm=this;angular.extend(vm,{isCargando:!0,onps:[],alerta:{},paginator:{},$timeout:$timeout,ESTADOS_CHEQUE:CFG_ONP.ESTADOS_CHEQUE,calcularRangosOnp:calcularRangosOnp}),$scope.$watch("ctrlConsultaOnp.numeroCuenta",function(){vm.numeroCuenta&&($log.log("$watch(ctrlConsultaOnp.numeroCuenta)"),vm.paginator.set([]),obtenerOnps())},!0)}angular.module("WebBancoChile.ordenNoPago").directive("onpConsultaMantencion",onpConsultaMantencion),ConsultaOnpCtrl.$inject=["$scope","$timeout","$log","ALERTA_ONP","consultaOnpFactory","CFG_ONP"],ConsultaOnpCtrl.prototype.actualizarTodosRangosOnp=function(indx){var vm=this,ms=vm.paginator.list[indx].cheques,timeout=vm.$timeout(function(){vm.paginator.list[indx].chequesSeleccionados=vm.paginator.list[indx].cheques.filter(function(cheque){return cheque.estadoCheque===vm.ESTADOS_CHEQUE.ONP}),vm.calcularRangosOnp(),vm.$timeout.cancel(timeout)},ms)}}(),function(){function consultaCheque(){return{scope:{cuenta:"=",chequera:"=",rut:"=",grupo:"@"},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/cheque-consulta/cheque-consulta_tpl.html",controller:consultaChequeCtrl,controllerAs:"ctrlCheque",bindToController:!0}}function consultaChequeCtrl($log,$scope,CFG_ONP,ALERTA_ONP,consultaChequeFactory){$log.log("[consultaChequeCtrl]");var vm=this;vm.scope=$scope,vm.log=$log,vm.isCargando=!0,vm.alerta={},vm.ALERTA_ONP=ALERTA_ONP,vm.CFG_ONP=CFG_ONP,vm.ESTADOS_CHEQUE=CFG_ONP.ESTADOS_CHEQUE,vm.consultaChequeFactory=consultaChequeFactory,null==vm.chequera.cheques||0===vm.chequera.cheques.length?vm.activate():vm.isCargando=!1}angular.module("WebBancoChile.ordenNoPago").directive("consultaCheque",consultaCheque),consultaChequeCtrl.$inject=["$log","$scope","CFG_ONP","ALERTA_ONP","consultaChequeFactory"],consultaChequeCtrl.prototype.activate=function(){var vm=this;vm.obtenerCheques()},consultaChequeCtrl.prototype.obtenerCheques=function(){var vm=this;vm.headers={APP_DATA:'{"txId":"'+vm.CFG_ONP.JOURNAL.COD_TRX_CHEQUES+'","aplicacionOrigen":"'+vm.CFG_ONP.JOURNAL.ID_FUNCIONALIDAD+'","operacion":"'+vm.CFG_ONP.JOURNAL.OPERACION_CONSULTA_CHEQUES+'","funcionalidad":"'+vm.CFG_ONP.JOURNAL.NOMBRE_FUNCIONALIDAD+'","modo":"ASINCRONA", "moneda":"'+vm.cuenta.moneda+'"}'},vm.consultaChequeFactory.getCheques(vm.cuenta.numProducto,vm.chequera,vm.headers).then(function(rs){if(vm.log.log("[obtenerCheques]"),vm.isCargando=!1,null!=rs&&rs.length>0){var onp=rs.filter(function(cheque){return"N"===cheque.estadoCheque||"P"===cheque.estadoCheque});0===onp.length?vm.alerta=vm.ALERTA_ONP.chequera_sin_cheques_para_onp:vm.chequera.cheques=rs}else vm.alerta=vm.ALERTA_ONP.servicio_NoDisponible_Cheques},function(error){vm.isCargando=!1,vm.log.log("[Error al consultar cheques] : "+JSON.stringify(error)),vm.alerta=vm.ALERTA_ONP.servicio_NoDisponible_Cheques})},consultaChequeCtrl.prototype.actualizarRangos=function(){var vm=this;vm.chequera.chequesSeleccionados=vm.chequera.cheques.filter(function(item){return item.checked===!0}),vm.scope.$parent.calcularRangos()}}(),function(){function consultaChequeras(){return{scope:{cuenta:"=",cliente:"=",calcularRangos:"&",rangos:"=",totalCheques:"=",totalChequeras:"="},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/chequera-consulta/chequera-consulta_tpl.html",controller:consultaChequerasCtrl,controllerAs:"ctrlConsulta",bindToController:!0}}function consultaChequerasCtrl(consultaChequeraFactory,$log,$scope,CFG_ONP,ALERTA_ONP,$rootScope,$timeout){$log.log("[consultaChequerasCtrl]");var vm=this;angular.extend(vm,{log:$log,scope:$scope,estadoConsultaChequeras:CFG_ONP.ESTADOS_CHEQUERAS,consultaChequeraFactory:consultaChequeraFactory,isCargando:!0,paginator:{},filtro:{estados:["DL"],tipos:["R","E"]},alerta:{},ALERTA_ONP:ALERTA_ONP,CFG_ONP:CFG_ONP,$timeout:$timeout,ESTADOS_CHEQUE:CFG_ONP.ESTADOS_CHEQUE}),$scope.$watch("ctrlConsulta.cuenta.numProducto",function(){vm.log.log("$watch(ctrlConsulta.cuenta.numProducto)"),vm.paginator.set([]),vm.obtenerChequeras()},!0),$scope.calcularRangos=function(){$rootScope.$broadcast("cleanValidationAlert");var tmpInicio,tmpFin,index,rangos=[],chequerasConChequesSeleccionados=vm.paginator.list.filter(function(chequera){return null!=chequera.chequesSeleccionados&&chequera.chequesSeleccionados.length>0}),totalCheques=0;angular.forEach(chequerasConChequesSeleccionados,function(chequera){tmpInicio=0,tmpFin=0,index=1,angular.forEach(chequera.chequesSeleccionados,function(cheque){totalCheques++,0===tmpInicio?(tmpInicio=cheque.numeroCheque,tmpFin=cheque.numeroCheque):tmpInicio+index===cheque.numeroCheque?(tmpFin=cheque.numeroCheque,index+=1):(rangos.push({inicio:tmpInicio,fin:tmpFin,chequeraInicio:chequera.numeroChequeInicial,chequeraFinal:chequera.numeroChequeFinal}),index=1,tmpInicio=cheque.numeroCheque,tmpFin=cheque.numeroCheque)}),rangos.push({inicio:tmpInicio,fin:tmpFin,chequeraInicio:chequera.numeroChequeInicial,chequeraFinal:chequera.numeroChequeFinal})}),vm.rangos=rangos,vm.totalCheques=totalCheques,vm.log.log("[calcularRangos rangos] : "+JSON.stringify(vm.rangos)),
vm.log.log("[calcularRangos totalCheques] : "+JSON.stringify(vm.totalCheques))}}angular.module("WebBancoChile.ordenNoPago").directive("consultaChequeras",consultaChequeras),consultaChequerasCtrl.$inject=["consultaChequeraFactory","$log","$scope","CFG_ONP","ALERTA_ONP","$rootScope","$timeout"],consultaChequerasCtrl.prototype.obtenerChequeras=function(){var vm=this;vm.log.log("consultaChequerasCtrl.prototype.obtenerChequeras"),vm.isCargando=!0,vm.alerta=null,vm.totalChequeras=0,vm.headers={APP_DATA:'{"txId":"'+vm.CFG_ONP.JOURNAL.COD_TRX_CHEQUES+'","aplicacionOrigen":"'+vm.CFG_ONP.JOURNAL.ID_FUNCIONALIDAD+'","operacion":"'+vm.CFG_ONP.JOURNAL.OPERACION_CONSULTA_CHEQUERAS+'","funcionalidad":"'+vm.CFG_ONP.JOURNAL.NOMBRE_FUNCIONALIDAD+'","modo":"ASINCRONA", "moneda":"'+vm.cuenta.moneda+'"}'},vm.consultaChequeraFactory.getChequerasByFiltro(vm.cuenta.numProducto,vm.filtro,vm.headers).then(function(rs){vm.isCargando=!1,null!==rs&&rs.length>0?(vm.totalChequeras=rs.length,vm.paginator.set(rs),vm.paginator.setRegistrosPorPagina(5),vm.paginator.paginacion.listadoRegistrosPaginacion=[5,10,20,30]):(vm.paginator.set(null),vm.alerta=vm.ALERTA_ONP.cliente_sin_chequeras)},function(error){vm.isCargando=!1,vm.log.log("[Error al consultar chequeras] : "+JSON.stringify(error)),vm.alerta=vm.ALERTA_ONP.servicio_NoDisponible_Chequera})},consultaChequerasCtrl.prototype.actualizarTodosRangosChequera=function(indx){var vm=this,ms=vm.paginator.list[indx].cheques,timeout=vm.$timeout(function(){vm.paginator.list[indx].chequesSeleccionados=vm.paginator.list[indx].cheques.filter(function(cheque){return cheque.estadoCheque===vm.ESTADOS_CHEQUE.NO_USADO||cheque.estadoCheque===vm.ESTADOS_CHEQUE.PROTESTED}),vm.scope.calcularRangos(),vm.$timeout.cancel(timeout)},ms)}}(),function(){function onpComprobante(){return{scope:{onp:"=",cliente:"=",ejecutivo:"=",funcionErrorOperacion:"&",mostrarComprobante:"=",isCargando:"="},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/comprobante/comprobante_tpl.html",controller:onpComprobanteCtrl,controllerAs:"ctrlComprobanteOnp",bindToController:!0}}function onpComprobanteCtrl($log,comprobanteFactory,ALERTA_ONP,CFG_ONP,$state){$log.log("[Invocación] directiva: onpComprobante");var vm=this;angular.extend(vm,{log:$log,ALERTA_ONP:ALERTA_ONP,CFG_ONP:CFG_ONP,comprobante:{},alerta:{},comprobanteFactory:comprobanteFactory,PORTADOR:CFG_ONP.SOLICITANTES.TIPO.PORTADOR.codigo,$state:$state}),vm.activate()}angular.module("WebBancoChile.ordenNoPago").directive("onpComprobante",onpComprobante),onpComprobanteCtrl.$inject=["$log","comprobanteFactory","ALERTA_ONP","CFG_ONP","$state"],onpComprobanteCtrl.prototype.activate=function(){var vm=this;vm.cursarOnp()},onpComprobanteCtrl.prototype.cursarOnp=function(){var vm=this;vm.isCargando=!0,vm.headers={APP_DATA:'{"txId":"'+vm.CFG_ONP.JOURNAL.COD_TRX_CHEQUES+'","aplicacionOrigen":"'+vm.CFG_ONP.JOURNAL.ID_FUNCIONALIDAD+'","operacion":"'+vm.CFG_ONP.JOURNAL.OPERACION_INGONPCLI+'","funcionalidad":"'+vm.CFG_ONP.JOURNAL.NOMBRE_FUNCIONALIDAD+'","modo":"ASINCRONA", "moneda":"'+vm.onp.cuenta.moneda+'"}'},vm.comprobanteFactory.cursarOnp(vm.onp,vm.headers).then(function(rs){vm.log.log("respuesta comprobante : "+JSON.stringify(rs)),vm.comprobante=rs,vm.errorOperacion=!1,vm.isCargando=!1,vm.validacionResultadoComprobante()},function(error){vm.funcionErrorOperacion(),vm.isCargando=!1,vm.log.log("[Error al consultar chequeras] : "+JSON.stringify(error))})},onpComprobanteCtrl.prototype.validacionResultadoComprobante=function(){var vm=this;if("SUCCESS"===vm.comprobante.operacion.codResultado)vm.$state.current.data.enProceso=!1,vm.alerta.superior=vm.onp.datosSolicitante.tipo.codigo===vm.PORTADOR?vm.ALERTA_ONP.success_cursar_portador:vm.alerta.superior=vm.ALERTA_ONP.success_cursar_titular;else if("ERROR"===vm.comprobante.operacion.codResultado)vm.funcionErrorOperacion();else if("WARNING"===vm.comprobante.operacion.codResultado){vm.$state.current.data.enProceso=!1,vm.alerta.alternativo=vm.onp.datosSolicitante.tipo.codigo===vm.PORTADOR?vm.ALERTA_ONP.success_cursar_portador:vm.ALERTA_ONP.success_cursar_titular;var rangosSinONP=vm.filter("filter")(vm.comprobante.rangos,{onp:!1},!0);vm.alerta.superior={},vm.alerta.superior=rangosSinONP.length>1?rangosSinONP.length+vm.ALERTA_ONP.error_cursar_ConProblemas_plural:vm.ALERTA_ONP.error_cursar_ConProblemas_singular,angular.extend(vm.alerta.superior.detalle.aside,{rangosSinONP:rangosSinONP})}}}(),function(){function campoTouched(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){element.on("focus",function(){ngModelCtrl.$setUntouched(),ngModelCtrl.$setPristine()}),element.on("blur",function(){ngModelCtrl.$setTouched()})}}}angular.module("WebBancoChile.ordenNoPago").directive("campoTouched",campoTouched)}(),function(){function datosSolicitanteOnp(){return{scope:{solicitanteRegistrado:"=",rutSolicitante:"=",codigoMarca:"=",solicitante:"=",tipoSolicitante:"=",buscar:"=",alerta:"=",camposRequeridos:"=",formOnp:"="},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/datos-solicitante/datos-solicitante_tpl.html",controller:datosSolicitantesCtrl,controllerAs:"ctrlSolicitante",bindToController:!0,require:{form:"^"}}}function datosSolicitantesCtrl($scope,$log,CFG_ONP,ALERTA_ONP,FORMATO,datosSolicitanteFactory,$filter){function resetSolicitante(){!vm.solicitanteRegistrado||vm.solicitanteRegistrado&&!vm.solicitanteRegistrado.nombre?(vm.solicitante=datosSolicitanteFactory.resetSolicitante(vm.rutSolicitante),vm.codigoCiudadPartClienteSeleccionado=vm.TELEFONO_PREFIJOS[0]):vm.solicitante=angular.copy(vm.solicitanteRegistrado)}function transformarEmailMayuscula(){var vm=this;vm.solicitanteRegistrado.emailParticularCliente=$filter("uppercase")(vm.solicitanteRegistrado.emailParticularCliente)}function setearValoresTelefono(codigoCiudadPartCliente){vm.solicitante.codigoCiudadPartCliente=codigoCiudadPartCliente,vm.solicitante.codigoPaisFonoPartCliente="56"}$log.log("[Invocación][ctrlSolicitante]");var vm=this;angular.extend(vm,{TELEFONO_PREFIJOS:CFG_ONP.TELEFONO_PREFIJOS,FORMATO:FORMATO,transformarEmailMayuscula:transformarEmailMayuscula,setearValoresTelefono:setearValoresTelefono}),$scope.$watch("ctrlSolicitante.tipoSolicitante",function(){vm.tipoSolicitante===CFG_ONP.SOLICITANTES.TIPO.PORTADOR.codigo&&resetSolicitante()})}angular.module("WebBancoChile.ordenNoPago").directive("datosSolicitanteOnp",datosSolicitanteOnp),datosSolicitantesCtrl.$inject=["$scope","$log","CFG_ONP","ALERTA_ONP","FORMATO","datosSolicitanteFactory","$filter"]}(),function(){function publicacionOnp(){return{restrict:"EA",scope:{rangos:"=",publicacionSeleccionada:"=",esPortador:"=?",totalCheques:"="},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/publicacion/publicacion_tpl.html",controller:publicacionCtrl,controllerAs:"ctrlPublicacion",bindToController:!0}}function publicacionCtrl($scope,$log,CFG_ONP,$filter,fechaUtilService,ALERTA_ONP,$rootScope){function actualizarPublicacion(){$rootScope.$broadcast("cleanValidationAlert"),vm.publicacionesOnp=$filter("definirRangosDePublicaciones")(vm.rangos);var cantidad=vm.publicacionesOnp&&vm.publicacionesOnp.cantPublicaciones?vm.publicacionesOnp.cantPublicaciones:0;vm.publicacionSeleccionada.cantPublicaciones=0!==vm.publicacionSeleccionada.codigo?cantidad:0,vm.fechaDesde||vm.isCargandoDesde?vm.publicacionSeleccionada.fechaDesde=vm.fechaDesde:vm.obtenerFechaOnpDesde(),vm.fechaHasta||vm.isCargandoHasta?vm.publicacionSeleccionada.fechaHasta=vm.fechaHasta:vm.obtenerFechaOnpHasta()}function obtenerFechaHabil(fechaActual,numDias,tipo){vm.isCargando=!0,vm.fechaUtilService.getFechaHabil(fechaActual,numDias).then(function(rs){vm.isCargando=!1,"desde"===tipo?(vm.fechaDesde=rs,vm.publicacionSeleccionada.fechaDesde=vm.fechaDesde):(vm.fechaHasta=rs,vm.publicacionSeleccionada.fechaHasta=vm.fechaHasta)},function(error){vm.isCargando=!1,vm.log.log("[Error al consultar servicio Fecha habil] : "+JSON.stringify(error)),vm.alerta=ALERTA_ONP.servicio_NoDisponible_Fecha_habil})}function obtenerFechaOnpDesde(){vm.isCargandoDesde=!0,fechaUtilService.getFechaActual().then(function(rs){vm.isCargandoDesde=!1,vm.fechaActual=rs;var inicioPublicacion=2;vm.fechaDesde=vm.obtenerFechaHabil(vm.fechaActual,inicioPublicacion,"desde")},function(error){vm.isCargandoDesde=!1,vm.log.log("[Error al consultar servicio Fecha actual] : "+JSON.stringify(error)),vm.alerta=ALERTA_ONP.servicio_NoDisponible_Fecha_habil})}function obtenerFechaOnpHasta(){vm.isCargandoHasta=!0,fechaUtilService.getFechaActual().then(function(rs){vm.isCargandoHasta=!1,vm.fechaActual=rs;var lapsoPublicacion=4;vm.fechaDesde=vm.obtenerFechaHabil(vm.fechaActual,lapsoPublicacion,"hasta")},function(error){vm.isCargandoHasta=!1,vm.log.log("[Error al consultar servicio Fecha actual] : "+JSON.stringify(error)),vm.alerta=ALERTA_ONP.servicio_NoDisponible_Fecha_habil})}$log.log("[Invocación][ctrlPublicacion]");var vm=this;angular.extend(vm,{publicaciones:CFG_ONP.PUBLICACIONES,fechaUtilService:fechaUtilService,actualizarPublicacion:actualizarPublicacion,isCargando:!0,log:$log,fechaActual:null,fechaHabil:null,fechaDesde:null,fechaHasta:null,obtenerFechaHabil:obtenerFechaHabil,obtenerFechaOnpDesde:obtenerFechaOnpDesde,obtenerFechaOnpHasta:obtenerFechaOnpHasta,publicacionSeleccionada:{fechaDesde:null,fechaHasta:null,cantPublicaciones:null}}),$scope.$watch("ctrlPublicacion.rangos",function(){vm.log.log("[watch] actualizarPublicacion()"),actualizarPublicacion()},!0)}angular.module("WebBancoChile.ordenNoPago").directive("publicacionOnp",publicacionOnp),publicacionCtrl.$inject=["$scope","$log","CFG_ONP","$filter","fechaUtilService","ALERTA_ONP","$rootScope"]}(),function(){function onpResumen(){return{scope:{onp:"=",esPortador:"=?",cliente:"=",alerta:"="},replace:!0,templateUrl:"components/view/orden-no-pago-cursar/view/resumen/resumen_tpl.html",controller:onpResumenCtrl,controllerAs:"ctrlResumen",bindToController:!0}}function onpResumenCtrl($scope,$log,CFG_ONP,$filter){$log.log("[Invocación] directiva: Resumen");var vm=this;angular.extend(vm,{publicaciones:CFG_ONP.PUBLICACIONES}),vm.$filter=$filter,vm.isCollapsedSelectCursar=!0}angular.module("WebBancoChile.ordenNoPago").directive("onpResumen",onpResumen),onpResumenCtrl.$inject=["$scope","$log","CFG_ONP","$filter"]}(),function(){function onpComprobanteRatificar(){return{scope:{onp:"=",funcionErrorOperacion:"&",mostrarComprobante:"=",isCargando:"="},replace:!0,templateUrl:"components/view/orden-no-pago-mantencion/comprobante/comprobante_tpl.html",controller:onpComprobanteRatCtrl,controllerAs:"ctrlComprobanteOnp",bindToController:!0}}function onpComprobanteRatCtrl($log,comprobanteMantencionFactory,ALERTA_ONP,CFG_ONP,$filter,$state){function activate(){ratificarOnp()}function ratificarOnp(){vm.isCargando=!0,vm.headers={APP_DATA:'{"txId":"'+CFG_ONP.JOURNAL.COD_TRX_CHEQUES+'","aplicacionOrigen":"'+CFG_ONP.JOURNAL.ID_FUNCIONALIDAD+'","operacion":"'+CFG_ONP.JOURNAL.OPERACION_RATIFICACION_ONP+'","funcionalidad":"'+CFG_ONP.JOURNAL.NOMBRE_FUNCIONALIDAD+'","modo":"ASINCRONA", "moneda":"'+vm.onp.cuenta.moneda+'"}'},comprobanteMantencionFactory.ratificarOnp(vm.onp,vm.headers).then(function(rs){$log.log("respuesta comprobante : "+JSON.stringify(rs)),vm.comprobante=rs,vm.errorOperacion=!1,vm.isCargando=!1,validacionResultadoComprobante()},function(error){vm.funcionErrorOperacion(),vm.isCargando=!1,$log.log("[Error al revocar Onp] : "+JSON.stringify(error))})}function validacionResultadoComprobante(){if("SUCCESS"===vm.comprobante.operacion.codResultado)$state.current.data.enProceso=!1,vm.alerta.superior=ALERTA_ONP.success_ratificar;else if("ERROR"===vm.comprobante.operacion.codResultado)vm.funcionErrorOperacion();else if("WARNING"===vm.comprobante.operacion.codResultado){$state.current.data.enProceso=!1,vm.alerta.alternativo=ALERTA_ONP.success_ratificar;var rangosSinOperacionONP=$filter("filter")(vm.comprobante.rangosOnp,{estado:!1},!0);vm.alerta.superior={},vm.alerta.superior=rangosSinOperacionONP.length>1?rangosSinOperacionONP.length+ALERTA_ONP.error_ratificar_ConProblemas_plural:ALERTA_ONP.error_ratificar_ConProblemas_singular,angular.extend(vm.alerta.superior.detalle.aside,{rangosSinONP:rangosSinOperacionONP})}}$log.log("[Invocación] directiva: onpComprobanteRatificar");var vm=this;angular.extend(vm,{comprobante:{},alerta:{},tipo:"RATIFICAR"}),activate()}angular.module("WebBancoChile.ordenNoPago").directive("onpComprobanteRatificar",onpComprobanteRatificar),onpComprobanteRatCtrl.$inject=["$log","comprobanteMantencionFactory","ALERTA_ONP","CFG_ONP","$filter","$state"]}(),function(){function onpComprobanteRevocar(){return{scope:{onp:"=",funcionErrorOperacion:"&",mostrarComprobante:"=",isCargando:"="},replace:!0,templateUrl:"components/view/orden-no-pago-mantencion/comprobante/comprobante_tpl.html",controller:onpComprobanteRevCtrl,controllerAs:"ctrlComprobanteOnp",bindToController:!0}}function onpComprobanteRevCtrl($log,comprobanteMantencionFactory,ALERTA_ONP,CFG_ONP,$filter,$state){function activate(){revocarOnp()}function revocarOnp(){vm.isCargando=!0,vm.headers={APP_DATA:'{"txId":"'+CFG_ONP.JOURNAL.COD_TRX_CHEQUES+'","aplicacionOrigen":"'+CFG_ONP.JOURNAL.ID_FUNCIONALIDAD+'","operacion":"'+CFG_ONP.JOURNAL.OPERACION_REVOCACION_ONP+'","funcionalidad":"'+CFG_ONP.JOURNAL.NOMBRE_FUNCIONALIDAD+'","modo":"ASINCRONA", "moneda":"'+vm.onp.cuenta.moneda+'"}'},comprobanteMantencionFactory.revocarOnp(vm.onp,vm.headers).then(function(rs){$log.log("respuesta comprobante : "+JSON.stringify(rs)),vm.comprobante=rs,vm.errorOperacion=!1,vm.isCargando=!1,validacionResultadoComprobante()},function(error){vm.funcionErrorOperacion(),vm.isCargando=!1,$log.log("[Error al revocar Onp] : "+JSON.stringify(error))})}function validacionResultadoComprobante(){if("SUCCESS"===vm.comprobante.operacion.codResultado)$state.current.data.enProceso=!1,vm.alerta.superior=ALERTA_ONP.success_revocar;else if("ERROR"===vm.comprobante.operacion.codResultado)vm.funcionErrorOperacion();else if("WARNING"===vm.comprobante.operacion.codResultado){$state.current.data.enProceso=!1,vm.alerta.alternativo=ALERTA_ONP.success_revocar;var rangosSinOperacionONP=$filter("filter")(vm.comprobante.rangosOnp,{estado:!1},!0);vm.alerta.superior={},vm.alerta.superior=rangosSinOperacionONP.length>1?rangosSinOperacionONP.length+ALERTA_ONP.error_revocar_ConProblemas_plural:ALERTA_ONP.error_revocar_ConProblemas_singular,angular.extend(vm.alerta.superior.detalle.aside,{rangosSinONP:rangosSinOperacionONP})}}$log.log("[Invocación] directiva: onpComprobanteMantencion");var vm=this;angular.extend(vm,{comprobante:{},alerta:{},tipo:"REVOCAR"}),activate()}angular.module("WebBancoChile.ordenNoPago").directive("onpComprobanteRevocar",onpComprobanteRevocar),onpComprobanteRevCtrl.$inject=["$log","comprobanteMantencionFactory","ALERTA_ONP","CFG_ONP","$filter","$state"]}(),function(){function onpResumenMantencion(){return{scope:{tipo:"@",onp:"=",ejecutivo:"=",textoSolicitante:"@",alerta:"="},replace:!0,templateUrl:"components/view/orden-no-pago-mantencion/resumen/resumen_tpl.html",controller:onpResumenMantencionCtrl,controllerAs:"ctrlResumen",bindToController:!0}}function onpResumenMantencionCtrl($scope,$log,CFG_ONP){function setearCanal(){for(var i in CFG_ONP.CANAL)vm.canal||validarPermiso(i)}function validarPermiso(i){angular.forEach(CFG_ONP.CANAL[i].PERMISOS,function(permiso){vm.ejecutivo.permisos.indexOf(permiso)>-1&&(vm.canal=CFG_ONP.CANAL[i].NOMBRE)})}$log.log("[Invocación] directiva: Resumen");var vm=this;vm.isCollapsedSelectRevocar=!0,setearCanal()}angular.module("WebBancoChile.ordenNoPago").directive("onpResumenMantencion",onpResumenMantencion),onpResumenMantencionCtrl.$inject=["$scope","$log","CFG_ONP"]}(),function(){function onpResumenModificacionCausal(){return{scope:{glosaMotivo:"=",solicitudesModificadas:"=",ejecutivo:"="},replace:!0,templateUrl:"components/view/orden-no-pago-modificar-causal/resumen/orden-no-pago-resumen-modificar-causal_tpl.html",controller:onpResumenModificacionCausalCtrl,controllerAs:"ctrlResumen",bindToController:!0}}function onpResumenModificacionCausalCtrl($scope,$log,CFG_ONP){function setearCanal(){for(var i in CFG_ONP.CANAL)vm.canal||validarPermiso(i)}function validarPermiso(i){angular.forEach(CFG_ONP.CANAL[i].PERMISOS,function(permiso){vm.ejecutivo.permisos.indexOf(permiso)>-1&&(vm.canal=CFG_ONP.CANAL[i].NOMBRE)})}$log.log("[Invocación] directiva: Resumen");var vm=this;vm.isCollapsedSelectRevocar=!0,setearCanal()}angular.module("WebBancoChile.ordenNoPago").directive("onpResumenModificacionCausal",onpResumenModificacionCausal),onpResumenModificacionCausalCtrl.$inject=["$scope","$log","CFG_ONP"]}(),function(){function onlyLetters(){return{restrict:"A",require:"ngModel",link:link}}function link(scope,element,attrs,ngModelCtrl){function fromUser(text){return ngModelCtrl.$setValidity("onlyLetters",!0),validacion(attrs,ngModelCtrl,text)}ngModelCtrl.$parsers.push(fromUser),element.on("focus",function(){ngModelCtrl.$setUntouched()}),element.on("blur",function(){ngModelCtrl.$setUntouched(),ngModelCtrl.$setPristine()})}function isDefinedAttr(attrs1,attrs2){return angular.isDefined(attrs1)&&angular.isDefined(attrs2)}function isNotDefinedPrimerAtrr(attrs1,attrs2){return!angular.isDefined(attrs1)&&angular.isDefined(attrs2)}function validacion(attrs,ngModelCtrl,text){if(text){var transformedInput=text.replace(/[^a-zA-Z]/g,"").toUpperCase();return isNotDefinedPrimerAtrr(attrs.whiteSpaces,attrs.acentos)?transformedInput=text.replace(/[^a-zA-Z ]+$/g,"").toUpperCase():isNotDefinedPrimerAtrr(attrs.acentos,attrs.whiteSpaces)?transformedInput=text.replace(/[^a-zA-ZÁÉÍÓÚñáéíóú]/g,"").toUpperCase():isDefinedAttr(attrs.acentos,attrs.whiteSpaces)?transformedInput=text.replace(/[^a-zA-ZÁÉÍÓÚñáéíóú ]+$/g,"").toUpperCase():angular.isDefined(attrs.direccion)&&(transformedInput=text.replace(/[^0-9a-zA-ZÁÉÍÓÚñáéíóú, ]+$/g,"").toUpperCase()),transformedInput!==text&&(ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render()),transformedInput}return text}angular.module("WebBancoChile.sharesComponentes").directive("onlyLetters",onlyLetters)}(),function(){function tabsStateChild(){return{scope:{nombreEstadoTab:"=",errorEstadoTab:"@"},templateUrl:"components/view/tabs-child/tabs-child_tpl.html",controller:tabsCtrl,controllerAs:"ctrlTabs",bindToController:!0,require:"tabsState"}}function tabsCtrl(tabsFactory,radioTabService,$filter,$state,$rootScope){function activate(){iniciarEstado(),$rootScope.$on("$stateChangeStart",function(event){if($state.current.data.enProceso){var stateName=-1===$state.current.name.indexOf(".error")?$state.current.name:$state.current.name.replace(".error","");activarTab(stateName),event.preventDefault()}})}function getArray(object){var array=[];return angular.forEach(object,function(item){array.push(item)}),array}function iniciarEstado(){if($state.current.name===vm.nombreEstadoTab)validarVisualizacion();else{var stateName=-1===$state.current.name.indexOf(".error")?$state.current.name:$state.current.name.replace(".error","");activarTab(stateName)}}function activarTab(stateName){angular.forEach(vm.TABS,function(value){stateName===value.state?value.active=!0:value.active=!1})}function activarTabInterno(stateName){activarTab(stateName),$state.go(stateName)}function validarVisualizacion(){var filtro;vm.TAB_DEFECTO?(activarTab(vm.TAB_DEFECTO),$state.go(vm.TAB_DEFECTO,{},{reload:!0})):tabsFactory.getUserProfile().then(function(rs){angular.forEach(vm.TABS,function(value){filtro=$filter("esValidoPermiso")(rs.permisos,value.permisos),value.visible=filtro,!vm.TAB_DEFECTO&&value.visible?(value.active=!0,vm.TAB_DEFECTO=value.state):value.active=!1}),activarTab(vm.TAB_DEFECTO),$state.go(vm.TAB_DEFECTO,{},{reload:!1})},function(){$state.go(vm.errorEstadoTab,{},{reload:!1})})}var vm=this;vm.radioTabService=radioTabService,vm.TABS=getArray(radioTabService.TABS),angular.extend(vm,{TAB_DEFECTO:null,activarTabInterno:activarTabInterno}),activate()}angular.module("WebBancoChile.ordenNoPago").directive("tabsStateChild",tabsStateChild),tabsCtrl.$inject=["tabsFactory","radioTabService","$filter","$state","$rootScope"]}(),function(){function ngPaginatorBack(){var directive={restrict:"EA",templateUrl:"commons/directives/paginator-back/paginator_back_tpl.html",scope:{config:"="},controller:ngPaginatorBackController,controllerAs:"ngpag",bindToController:!0};return directive}function ngPaginatorBackController($scope){function checkValue(value,defaul){return value||defaul}function activate(){vm.totalItems=checkValue(vm.config.totalItems,0),vm.currentPage=checkValue(vm.config.currentPage,1),vm.itemsPerPage=checkValue(vm.config.itemsPerPage,[10,15,20]),vm.emptyMessage=checkValue(vm.config.emptyMessage,""),vm.itemsPerPage.selected=checkValue(vm.config.itemsPerPage.selected,10)}function internalListen(currentPage,itemsPerPage){_.isFunction(vm.config.listen)?vm.config.listen(currentPage,itemsPerPage):console.error('Crea la funcion "listen" en tu config')}var vm=this;angular.extend(vm,{totalItems:0,currentPage:1,itemsPerPage:[10,15,20],emptyMessage:"",internalListen:internalListen}),activate(),$scope.$watch(function(){return vm.config},function(){activate()},!0)}angular.module("WebBancoChile.ngPaginatorBack",[]).directive("ngPaginatorBack",ngPaginatorBack),ngPaginatorBackController.$inject=["$scope"]}(),angular.module("WebBancoChile.ngPaginator",[]).directive("ngPaginator",function($filter){function link(scope){scope.internalControl=angular.isDefined(scope.control)?scope.control:{},scope.internalControl.show=angular.isDefined(scope.visible)?scope.visible:!0,scope.internalControl.emptyMessage=angular.isDefined(scope.emptyMessage)?scope.emptyMessage:null,scope.internalControl.list=angular.isDefined(scope.control)&&angular.isDefined(scope.control.lista)?scope.control.lista:[],scope.internalControl.filteredList=[],scope.internalControl.paginacion={registrosPorPagina:10,paginaActual:1,primero:1,ultimo:1,totalResultados:0,numPaginas:0,listadoRegistrosPaginacion:[10,20,30]},scope.internalControl.initializePaginator=function(){angular.isDefined(scope.control)&&angular.isDefined(scope.control.lista)&&scope.internalControl.set(scope.internalControl.list)},scope.internalControl.set=function(r){scope.internalControl.list=r,scope.internalControl.filteredList=scope.internalControl.list,scope.internalControl.paginacion.totalResultados=scope.internalControl.filteredList?scope.internalControl.filteredList.length:0,scope.internalControl.calculateNumPaginas(),scope.internalControl.setPage(1)},scope.internalControl.getPage=function(){scope.internalControl.paginacion.paginaActual<=scope.internalControl.paginacion.numPaginas?(scope.internalControl.paginacion.primero=(scope.internalControl.paginacion.paginaActual-1)*scope.internalControl.paginacion.registrosPorPagina+1,scope.internalControl.paginacion.ultimo=scope.internalControl.paginacion.paginaActual*scope.internalControl.paginacion.registrosPorPagina,scope.internalControl.paginacion.ultimo>scope.internalControl.paginacion.totalResultados&&(scope.internalControl.paginacion.ultimo=scope.internalControl.paginacion.totalResultados),scope.internalControl.paginacion.pageList=scope.internalControl.filteredList.slice(scope.internalControl.paginacion.primero-1,scope.internalControl.paginacion.ultimo),scope.internalControl.empty=!1):(scope.internalControl.paginacion.primero=0,scope.internalControl.paginacion.ultimo=0,scope.internalControl.paginacion.pageList=scope.internalControl.filteredList,scope.internalControl.empty=!0)},scope.internalControl.setPage=function(numberPage){scope.internalControl.paginacion.paginaActual=numberPage,scope.internalControl.getPage()},scope.internalControl.setRegistrosPorPagina=function(records){scope.internalControl.paginacion.registrosPorPagina=records,scope.internalControl.calculateNumPaginas(),scope.internalControl.setPage(1)},scope.internalControl.filter=function(functionFilter,params){params.unshift(scope.internalControl.list),scope.internalControl.filteredList=$filter(functionFilter).apply(null,params),scope.internalControl.paginacion.totalResultados=scope.internalControl.filteredList?scope.internalControl.filteredList.length:0,scope.internalControl.calculateNumPaginas(),scope.internalControl.setPage(1)},scope.internalControl.cleanFilter=function(){scope.internalControl.filteredList=scope.internalControl.list,scope.internalControl.paginacion.totalResultados=scope.internalControl.filteredList?scope.internalControl.filteredList.length:0,scope.internalControl.calculateNumPaginas(),scope.internalControl.setPage(1)},scope.internalControl.order=function(orderFields,reverse){scope.internalControl.filteredList=$filter("orderBy")(scope.internalControl.filteredList,orderFields,reverse),scope.internalControl.setPage(1)},scope.internalControl.getPagination=function(){return scope.internalControl.paginacion},scope.internalControl.calculateNumPaginas=function(){scope.internalControl.paginacion.numPaginas=Math.ceil(scope.internalControl.paginacion.totalResultados/scope.internalControl.paginacion.registrosPorPagina)},scope.internalControl.initializePaginator()}return{restrict:"E",replace:!0,templateUrl:"commons/directives/paginator/paginator_tpl.html",scope:{control:"=",visible:"=",emptyMessage:"@"},link:link}}),function(){angular.module("WebBancoChile.perfilEjecutivo").directive("ngPerfilEjecutivo",function(){return{transclude:!0,restrict:"E",scope:{ejecutivo:"="},templateUrl:"components/perfil-ejecutivo/view/perfil-ejecutivo_tpl.html",controller:"perfilEjecutivoCtrl",controllerAs:"vm"}})}(),function(){function chequerasActivasDirective(){function chequerasActivasCtrl($scope,$uibModal){var vm=this;angular.extend(vm,{listaChequera:{},listaFiltrada:[],hide:!0}),$scope.$watch(function(){return $scope.lista},function(){vm.listaChequera.set($scope.lista),vm.hide=!0}),$scope.$watch(function(){return vm.listaFiltrada},function(){vm.listaChequera.set(vm.listaFiltrada)}),vm.openAsideCambioEstado=function(chequera){$uibModal.open({templateUrl:"components/cheques/asides/aside-cambio-estado-chequeras_tpl.html",animation:!0,scope:$scope,controller:"cambioEstadoChequeras",controllerAs:"chequeraCambioEstado",size:"",windowClass:"modal-detalle",backdrop:"static",resolve:{data:function(){return{chequera:chequera}}}})}}return{templateUrl:"components/cheques/activas/activas_tpl.html",scope:{lista:"=lista",error:"=?error"},restrict:"EA",controllerAs:"vm",controller:["$scope","$uibModal",chequerasActivasCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequerasActivasDirective",chequerasActivasDirective)}(),function(){function chequerasActivasAsideDirective(){function asideDirectiveCtrl($scope,AsideChequeraActivaFactory,chequesService,CuentaService){function detalleChequera(){vm.listaCheques.set({}),vm.showLoading=!0,vm.error={detalle:{message:"",title:""},tipo:"",show:!1};var queryObject={rut:vm.cuentaService.modeloCompartido.rutCliente,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto,numeroChequeInicial:$scope.chequera.numeroChequeInicial,numeroChequeFinal:$scope.chequera.numeroChequeFinal};AsideChequeraActivaFactory.getDetalleChequera(queryObject).then(function(data){vm.loading=!1,vm.showLoading=!1,void 0!==data.codigo?(vm.error.detalle.message=data.mensaje,vm.error.detalle.title="",vm.error.tipo="I",vm.error.show=!0):(angular.forEach(data,function(item){item.fechaCambioEstadoCheque=chequesService.stringToDate(item.fechaCambioEstadoCheque,"dd-mmm-yyyy","-")}),vm.lista=data,vm.listaFiltrada=data,vm.listaCheques.set(vm.listaFiltrada),vm.error.show=!1)},function(err){vm.loading=!1,vm.showLoading=!1,vm.error.detalle.message=err.message,vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})}var vm=this;vm.cuentaService=CuentaService,angular.extend(vm,{listaCheques:{},lista:{},listaFiltrada:{},showLoading:!1,error:{detalle:{message:"",title:""},tipo:"",show:!1},detalleChequera:detalleChequera}),$scope.$watch(function(){return $scope.chequera},function(newVal){_.isEmpty(newVal)||detalleChequera()}),$scope.$watch(function(){return vm.listaFiltrada.length},function(){vm.listaCheques.set(vm.listaFiltrada)})}return{scope:{asideSlide:"=hideSlide",chequera:"=chequera"},replace:!0,restrict:"EA",controllerAs:"vm",templateUrl:"components/cheques/activas/aside_tpl.html",controller:["$scope","AsideChequeraActivaFactory","chequesService","CuentaService",asideDirectiveCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequerasActivasAsideDirective",chequerasActivasAsideDirective)}(),function(){function chequerasActivasDetalleFiltroDirective(){function chequerasActivasDetalleFiltroCtrl($scope,$filter,CuentaFactory){function filtrar(){$scope.listaFiltrada=$scope.lista,$scope.listaFiltrada=$filter("filter")($scope.lista,{glosaEstadoCheque:vm.estado.glosaEstadoCheque}),$scope.listaFiltrada=$filter("filter")($scope.listaFiltrada,vm.palabrasClaves),$scope.listaFiltrada=$filter("filter")($scope.listaFiltrada,function(item){return void 0!==vm.rango.minAmount?0===vm.rango.minAmount&&null===item.montoCheque?!0:vm.rango.minAmount<item.montoCheque&&item.montoCheque<vm.rango.maxAmount:!0})}var vm=this;angular.extend(vm,{estado:{},rango:{},rangoList:[],listaGlosa:[{glosaEstadoCheque:""}],palabrasClaves:"",filtrar:filtrar}),$scope.$watch(function(){return $scope.lista.length},function(){$scope.listaFiltrada=$scope.lista,vm.listaGlosa=[{glosaEstadoCheque:""}].concat($filter("unique")($scope.lista,"glosaEstadoCheque")),CuentaFactory.getAmountRanges($scope.moneda).then(function(data){vm.rangoList=data},function(){vm.loading=!1})})}return{templateUrl:"components/cheques/activas/filtroCheques_tpl.html",scope:{lista:"=lista",listaFiltrada:"=listaFiltrada",moneda:"=moneda"},restrict:"EA",controllerAs:"vm",controller:["$scope","$filter","CuentaFactory",chequerasActivasDetalleFiltroCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequerasActivasDetalleFiltroDirective",chequerasActivasDetalleFiltroDirective)}(),function(){function chequerasActivasFiltroDirective(){function chequerasActivasFiltroCtrl($scope,$filter){function filtrar(){$scope.listaFiltrada=$scope.lista,$scope.listaFiltrada=$filter("filter")($scope.lista,{sucursalEntrega:vm.sucursal.sucursalEntrega,glosaEstadoChequera:vm.estado.glosaEstadoChequera}),$scope.listaFiltrada=$filter("filter")($scope.listaFiltrada,vm.palabrasClaves)}var vm=this;angular.extend(vm,{listaOptionsEstado:[],listaOptionsSucursal:[],sucursal:{},estado:{},palabrasClaves:"",filtrar:filtrar}),$scope.$watch(function(){return $scope.lista.length},function(){$scope.listaFiltrada=$scope.lista,vm.listaOptionsEstado=[{glosaEstadoChequera:"",sucursalEntrega:""}].concat($filter("unique")($scope.lista,"glosaEstadoChequera")),vm.listaOptionsSucursal=[{glosaEstadoChequera:"",sucursalEntrega:""}].concat($filter("unique")($scope.lista,"sucursalEntrega"))})}return{templateUrl:"components/cheques/activas/filtro_tpl.html",scope:{lista:"=lista",listaFiltrada:"=listaFiltrada"},restrict:"EA",controllerAs:"vm",controller:["$scope","$filter",chequerasActivasFiltroCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequerasActivasFiltroDirective",chequerasActivasFiltroDirective)}(),function(){function chequesCobradosDirective(){function chequesCobradosCtrl($scope,ChequesCobradosFactory,chequesService,CuentaService){function getChequesCobrados(){vm.lista=[],vm.listaFiltrados=[],vm.listaChequesCobrados.set({}),vm.showLoading=!0;var queryObject={rut:vm.cuentaService.modeloCompartido.rutCliente,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto};ChequesCobradosFactory.getChequesCobrados(queryObject).then(function(data){vm.loading=!1,vm.showLoading=!1,angular.forEach(data,function(item){var fechaPaso=chequesService.stringToDate(item.fechaPagoCheque,"dd-mmm-yyyy","-");item.fechaPagoCheque=moment(fechaPaso).format("DD/MM/YYYY")}),void 0!==data.codigo?(vm.error.detalle.message=data.mensaje,vm.error.detalle.title="",vm.error.tipo="I",vm.error.show=!0):(vm.lista=data,$scope.lista=data,vm.listaFiltrados=data,vm.listaChequesCobrados.set(vm.listaFiltrados),
vm.error.show=!1)},function(err){vm.loading=!1,vm.showLoading=!1,vm.error.detalle.message=err.message,vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})}var vm=this;vm.cuentaService=CuentaService,angular.extend(vm,{lista:[],listaFiltrados:[],listaChequesCobrados:{},showLoading:!1,error:{detalle:{message:"",title:""},tipo:"",show:!1},getChequesCobrados:getChequesCobrados}),$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||vm.getChequesCobrados()})}return{templateUrl:"components/cheques/cobrados/cobrados_tpl.html",restrict:"EA",controllerAs:"chc",controller:["$scope","ChequesCobradosFactory","chequesService","CuentaService",chequesCobradosCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequesCobradosDirective",chequesCobradosDirective)}(),function(){function colillasDirective(){function colillasCtrl($scope,$uibModal,colillasFactory,CuentaService,chequesService){var vm=this;vm.cuentaService=CuentaService,vm.chequesService=chequesService,vm.status={isOpen:!1},angular.extend(vm,{listaChequera:{},isCargando:!0,colillasFactory:colillasFactory,filtro:{estados:["DL"],tipos:["R","E"]},error:{detalle:{message:"",title:""},tipo:"",show:!1},obtenerChequeras:obtenerChequeras}),$scope.$watch(function(){return vm.chequesService.changeStatusBloqueoDesbloqueo},function(newVal){newVal===!0&&(vm.chequesService.changeStatusBloqueoDesbloqueo=!1,vm.obtenerChequeras())}),$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||vm.obtenerChequeras()}),vm.openAside=function(colillaOperation,colilla){$uibModal.open({templateUrl:"components/cheques/colillas/asides/aside-"+colillaOperation+"-colilla_tpl.html",animation:!0,scope:$scope,controller:"cambioEstadoColillas",controllerAs:colillaOperation,size:"",windowClass:"modal-detalle",backdrop:"static",resolve:{data:function(){return{colilla:colilla,colillaOperation:colillaOperation}}}})}}function obtenerChequeras(){var vm=this;vm.isCargando=!0,vm.alerta=null,vm.totalChequeras=0,vm.cuenta=vm.cuentaService.modeloCompartido.cuenta.numProducto,vm.listaChequera.set({}),vm.idTransaccion="CLP"===vm.cuentaService.modeloCompartido.cuenta.moneda?"CONSCOLIL1":"USD"===vm.cuentaService.modeloCompartido.cuenta.moneda?"CONSCOLIL2":"CONSCOLIL3",vm.headers={APP_DATA:'{"txId":"'+vm.idTransaccion+'","aplicacionOrigen":"CHEQUES","operacion":"'+vm.idTransaccion+'","funcionalidad":"CONSULTAR COLILLAS","modo":"ASINCRONA", "moneda":"'+vm.cuentaService.modeloCompartido.cuenta.moneda+'"}'},vm.colillasFactory.getChequerasByFiltro(vm.cuenta,vm.filtro,vm.headers).then(function(data){vm.isCargando=!1,null!==data&&data.length>0?(angular.forEach(data,function(item){item.fechaCambioEstadoColilla=vm.chequesService.stringToDate(item.fechaCambioEstadoColilla,"dd-mmm-yyyy","-"),item.cuenta=vm.cuenta}),vm.listaChequera.set(data),vm.error.show=!1):(vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="I",vm.error.show=!0)},function(){vm.isCargando=!1,vm.error.detalle.message="Servicio no disponible, intente más tarde.",vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})}return{templateUrl:"components/cheques/colillas/colillas_tpl.html",restrict:"EA",controllerAs:"vm",controller:["$scope","$uibModal","colillasFactory","CuentaService","chequesService",colillasCtrl]}}angular.module("WebBancoChile.servCheques").directive("colillasDirective",colillasDirective)}(),function(){function consultaChequesDirective(){function consultaChequesCtrl($scope,CuentaService){function updateNumero(){vm.nroCheque=vm.numeroPlaceholder}var vm=this;vm.cuentaService=CuentaService,angular.extend(vm,{numeroPlaceholder:void 0,nroCheque:"",updateNumero:updateNumero}),$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||(vm.nroCheque="")})}return{templateUrl:"components/cheques/consulta/consulta_tpl.html",restrict:"EA",controllerAs:"vm",controller:["$scope","CuentaService",consultaChequesCtrl]}}angular.module("WebBancoChile.servCheques").directive("consultaChequesDirective",consultaChequesDirective)}(),function(){function detalleChequeDirective(){function detalleChequeCtrl($scope,AsideDetalleChequeFactory,chequesService,CuentaService){function getCheque(){getDetalleCheque(),getImagenCheque()}function getDetalleCheque(){vm.loading=!0,AsideDetalleChequeFactory.getDetalleCheque({rut:vm.cuentaService.modeloCompartido.rutCliente,numeroCheque:$scope.numeroCheque,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto}).then(function(data){vm.loading=!1,vm.show=!0,void 0!==data.codigo?(vm.error.detalle.message=data.mensaje,vm.error.detalle.title="",vm.error.tipo="I",vm.error.show=!0):(vm.showUpdateColumn=!0,vm.error.show=!1,vm.cheque=data,vm.moneda=vm.cuentaService.modeloCompartido.cuenta.moneda,vm.cheque.fechaCambioEstadoCheque=chequesService.stringToDate(vm.cheque.fechaCambioEstadoCheque,"dd-mmm-yyyy","-"))},function(err){vm.loading=!1,vm.error.detalle.message=err.message,vm.error.detalle.title="",vm.error.tipo="E",vm.error.show=!0})}function getImagenCheque(){vm.loading=!0,vm.imagenLoading=!0,vm.errorImagen.show=!1,AsideDetalleChequeFactory.getImagenCheque({rut:vm.cuentaService.modeloCompartido.rutCliente,numeroCheque:$scope.numeroCheque,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto}).then(function(data){vm.loading=!1,void 0!==data.codigo?(vm.errorImagen.detalle.message=data.mensaje,vm.errorImagen.detalle.title="Imagen",vm.errorImagen.tipo="W",vm.errorImagen.show=!0,vm.imagenLoading=!1):(vm.showUpdateColumn=!0,vm.errorImagen.show=!1,vm.imagenLoading=!1,vm.imagen=data)},function(err){vm.loading=!1,vm.imagenLoading=!1,vm.errorImagen.detalle.message=err.message,vm.errorImagen.detalle.title="Imagen",vm.errorImagen.tipo="E",vm.errorImagen.show=!0})}var vm=this;vm.cuentaService=CuentaService,angular.extend(vm,{show:!1,cheque:{},imagen:{},error:{detalle:{message:"",title:""},tipo:"",show:!1},errorImagen:{detalle:{message:"",title:""},tipo:"",show:!1},imagenLoading:!1,getCheque:getCheque,getDetalleCheque:getDetalleCheque,getImagenCheque:getImagenCheque}),$scope.$watch(function(){return $scope.numeroCheque},function(newVal){_.isEmpty(newVal)||vm.getCheque()}),$scope.$watch(function(){return vm.cuentaService.modeloCompartido.cuenta.numProducto},function(newVal){_.isEmpty(newVal)||(vm.show=!1)})}return{scope:{numeroCheque:"=?numeroCheque"},replace:!0,restrict:"EA",controllerAs:"vm",templateUrl:"components/cheques/consulta/resultados/cheque_tpl.html",controller:["$scope","AsideDetalleChequeFactory","chequesService","CuentaService",detalleChequeCtrl]}}angular.module("WebBancoChile.servCheques").directive("detalleChequeDirective",detalleChequeDirective)}(),function(){function asideDetalleChequeDirective(){function asideDetalleChequeCtrl($scope,$uibModal,chequesService,CuentaService){function compare(cheque){return"U"!==cheque.estadoCheque&&"P"!==cheque.estadoCheque&&cheque.estadoCheque?!1:!0}function open(){vm.numChequeBusqueda=$scope.cheque.numeroCheque,$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"components/cheques/detalleCheque/aside-detalleCheque-modal_tpl.html",windowClass:"modal-detalle",controller:["$scope","$modalInstance","AsideDetalleChequeFactory","CuentaService",vm.modalController],controllerAs:"cheCtrl",backdrop:!0})}function modalController($scope,$modalInstance,AsideDetalleChequeFactory,CuentaService){function dismiss(){$modalInstance.close()}function getDetalleCheque(){vm.loading=!0,AsideDetalleChequeFactory.getDetalleCheque({rut:vm.cuentaService.modeloCompartido.rutCliente,numeroCheque:vm.numChequeBusqueda,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto}).then(function(data){vm.loading=!1,void 0!==data.codigo?(cheCtrl.error.detalle.message=data.mensaje,cheCtrl.error.detalle.title="",cheCtrl.error.tipo="I",cheCtrl.error.show=!0):(cheCtrl.error.show=!1,cheCtrl.cheque=data,cheCtrl.cheque.fechaCambioEstadoCheque=chequesService.stringToDate(cheCtrl.cheque.fechaCambioEstadoCheque,"dd-mmm-yyyy","-"))},function(err){vm.loading=!1,cheCtrl.error.show=!0,cheCtrl.error.detalle.message=err.message,cheCtrl.error.detalle.title="",cheCtrl.error.tipo="E"})}function getImagenCheque(){vm.loading=!0,AsideDetalleChequeFactory.getImagenCheque({rut:vm.cuentaService.modeloCompartido.rutCliente,numeroCheque:vm.numChequeBusqueda,cuenta:vm.cuentaService.modeloCompartido.cuenta.numProducto}).then(function(data){vm.loading=!1,"CHEQ-100101"===data.codigo?(cheCtrl.errorImagen.detalle.message=data.mensaje,cheCtrl.errorImagen.detalle.title="Imagen",cheCtrl.errorImagen.tipo="I",cheCtrl.errorImagen.show=!0):(cheCtrl.chequeImagen=data,cheCtrl.errorImagen.show=!1)},function(err){vm.loading=!1,cheCtrl.errorImagen.show=!0,cheCtrl.errorImagen.detalle.message=err.message,cheCtrl.errorImagen.detalle.title="Imagen",cheCtrl.errorImagen.tipo="E"})}var cheCtrl=this;cheCtrl.cuentaService=CuentaService,angular.extend(cheCtrl,{cheque:{},chequeImagen:{},dismiss:dismiss,getDetalleCheque:getDetalleCheque,getImagenCheque:getImagenCheque,storageImagen:[],error:{detalle:{message:"",title:""},tipo:"",show:!1},errorImagen:{detalle:{message:"",title:""},tipo:"",show:!1}}),getDetalleCheque(),getImagenCheque()}var vm=this;vm.cuentaService=CuentaService,angular.extend(vm,{open:open,numChequeBusqueda:0,modalController:modalController,compare:compare})}return{scope:{cheque:"=?cheque"},replace:!0,restrict:"EA",controllerAs:"vm",templateUrl:"components/cheques/detalleCheque/aside-detalleCheque_tpl.html",controller:["$scope","$uibModal","chequesService","CuentaService",asideDetalleChequeCtrl]}}angular.module("WebBancoChile.servCheques").directive("asideDetalleChequeDirective",asideDetalleChequeDirective)}(),function(){function chequerasInactivasDirective(){function chequerasInactivasCtrl($scope,$uibModal){var vm=this;angular.extend(vm,{listaChequera:{}}),$scope.$watch(function(){return $scope.lista},function(){vm.listaChequera.set($scope.lista)}),vm.openAsideCambioEstado=function(chequera){$uibModal.open({templateUrl:"components/cheques/asides/aside-cambio-estado-chequeras_tpl.html",animation:!0,scope:$scope,controller:"cambioEstadoChequeras",controllerAs:"chequeraCambioEstado",size:"",windowClass:"modal-detalle",backdrop:"static",resolve:{data:function(){return{chequera:chequera}}}})}}return{templateUrl:"components/cheques/inactivas/inactivas_tpl.html",scope:{lista:"=lista",error:"=?error"},restrict:"EA",controllerAs:"vm",controller:["$scope","$uibModal",chequerasInactivasCtrl]}}angular.module("WebBancoChile.servCheques").directive("chequerasInactivasDirective",chequerasInactivasDirective)}(),function(){angular.module("WebBancoChile.bloqueoCuentaLinea").constant("CONTEXT_SERVICIOS_CREDITO_LINEA_CONSULTA","/servicios-linea-credito/consulta").constant("CONTEXT_SERVICIOS_MOVIMIENTOS_CUENTA_CONSULTA","/servicios-movimientos-cuenta/consulta").constant("CONTEXT_SERVICIOS_CUENTA_LINEA","/servicios-cuenta-linea").constant("TIPO_BLOQUEO",{INTERNO:{subEstado:"NRNJ"},JUDICIAL:{subEstado:"NRJB"},CLIENTE:{subEstado:"NORM"}})}(),function(){angular.module("WebBancoChile.errorHandler").constant("TIPOS_ERROR",{ERROR:{value:1,name:"ERROR",alerta:"error",servicio:"error",tipo:"E"},WARNING:{value:2,name:"WARNING",alerta:"warning",servicio:"errorTwo",tipo:"W"},INFO:{value:3,name:"INFO",alerta:"information",servicio:"",tipo:"I"},SUCCESS:{value:4,name:"SUCCESS",alerta:"success",servicio:"",tipo:"S"}}).constant("URL_ASIDE",{informacion:"components/asides/templates/aside-info_tpl.html",listaDatos:"components/asides/templates/aside-info-required_tpl.html"})}(),function(){"use strict";var ESTADOS_CENTRO_NEGOCIOS={ESCRITORIO_EJECUTIVO:"escritorio-ejecutivo",VISTA360_PERSONAS:"vista-360",VISTA360_EMPRESAS:"vista-360-e",ENROLAMIENTO_BASICO:"enrolamiento-basico"};angular.module("WebBancoChile.headerInput").constant("CONSTANTES_ESTADOS",{ESCRITORIO_EJECUTIVO:{state:ESTADOS_CENTRO_NEGOCIOS.ESCRITORIO_EJECUTIVO,url:"/miplataforma-web/centro-de-negocios/#/escritorio-ejecutivo"},VISTA360_PERSONAS:{state:"tab-resumen",url:"/miplataforma-web/centro-de-negocios/#/vista-360/resumen"},VISTA360_EMPRESAS:{state:"tab-resumen-e",url:"/miplataforma-web/centro-de-negocios/#/vista-360-e/resumen"},ENROLAMIENTO_BASICO:{state:ESTADOS_CENTRO_NEGOCIOS.ENROLAMIENTO_BASICO,url:"/miplataforma-web/centro-de-negocios/#/enrolamiento-basico"}}).constant("ESTADOS_CENTRO_NEGOCIOS",[ESTADOS_CENTRO_NEGOCIOS.ESCRITORIO_EJECUTIVO,ESTADOS_CENTRO_NEGOCIOS.VISTA360_PERSONAS,ESTADOS_CENTRO_NEGOCIOS.VISTA360_EMPRESAS,ESTADOS_CENTRO_NEGOCIOS.ENROLAMIENTO_BASICO])}(),function(){angular.module("WebBancoChile.infoCliente").constant("CLIENTE_CONSTANT",{TIPO_CLIENTE:{persona:"P",empresa:"E",naturalConGiro:"G"},ACTIVIDAD_ECONOMICA:{socioEmpresario:"09300",sociedadInversion:"09200"}})}(),function(){angular.module("WebBancoChile.ordenNoPago.constant").constant("ERRORES_CAMPOS",{cuenta:{message:"Debe seleccionar una Cuenta Corriente",showMessage:!1},motivo:{message:"Debe seleccionar un motivo",showMessage:!1},campoObligatorio:{message:"Campo Obligatorio",showMessage:!1},sinRut:{message:"Dato requerido",showMessage:!1},rutInvalido:{message:"Rut inválido",showMessage:!1}}).constant("ALERTA_ONP",{sin_Seleccion:{tipo:"W",detalle:{title:"Datos insuficientes",message:"Debe seleccionar al menos un cheque"},flag:"datosInsuficientes"},campos_Incompletos:{tipo:"W",detalle:{title:"Campos incompletos",message:"Verifique elementos en rojo"},flag:"camposIncompletos"},camposIncompletos_rut_portador:{tipo:"W",detalle:{message:"Debe completar el rut del portador"},flag:"camposIncompletos"},success_cursar_portador:{tipo:"S",detalle:{title:"Orden de No Pago de Cheques realizada",message:"Importante: Esta Orden de No Pago <b>tendrá una validez de 1 día</b> y deberá ser <b>ratificada</b> por mesón el día hábil siguiente hasta las 10:00 hrs.",isHtml:!0}},success_cursar_titular:{tipo:"S",detalle:{message:"Orden de No Pago de Cheques realizada"}},success_ratificar:{tipo:"S",detalle:{message:"Ratificación Orden de No Pago de Cheques realizada"}},success_revocar:{tipo:"S",detalle:{message:"Revocación de Orden de No Pago realizada"}},success_cursar_ConProblemas:{tipo:"S",detalle:{message:" productos bloqueados",singular:" producto bloqueado"}},error_cursar_ConProblemas_plural:{tipo:"E",detalle:{title:" rangos de cheques sin Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Fallas en Orden de no pago",size:"xs",template:"components/view/orden-no-pago-cursar/view/comprobante/onp-error-aside/onp-error-aside_tpl.html"}}},error_cursar_ConProblemas_singular:{tipo:"E",detalle:{title:"1 rango de cheques sin Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Falla en Orden de no pago",size:"xs",template:"components/view/orden-no-pago-cursar/view/comprobante/onp-error-aside/onp-error-aside_tpl.html"}}},error_revocar_ConProblemas_plural:{tipo:"E",detalle:{title:" rangos de cheques sin Revocación Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Falla en Revocación Orden de no pago",size:"xs",template:"components/view/orden-no-pago-mantencion/comprobante/onp-error-aside/onp-error-aside_tpl.html",textType:"revocación"}}},error_revocar_ConProblemas_singular:{tipo:"E",detalle:{title:"1 rango de cheques sin Revocación Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Falla en Revocación Orden de no pago",size:"xs",template:"components/view/orden-no-pago-mantencion/comprobante/onp-error-aside/onp-error-aside_tpl.html",textType:"revocación"}}},error_ratificar_ConProblemas_plural:{tipo:"E",detalle:{title:" rangos de cheques sin Ratificación Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Falla en Ratificar Orden de no pago",size:"xs",template:"components/view/orden-no-pago-mantencion/comprobante/onp-error-aside/onp-error-aside_tpl.html",textType:"ratificación"}}},error_ratificar_ConProblemas_singular:{tipo:"E",detalle:{title:"1 rango de cheques sin Ratificación Orden de no pago",message:'<a href="" ng-click="ehc.abrirAside()">Ver detalle fallas</a>',isHtml:!0,aside:{title:"Falla en Ratificación Orden de no pago",size:"xs",template:"components/view/orden-no-pago-mantencion/comprobante/onp-error-aside/onp-error-aside_tpl.html",textType:"ratificación"}}},error_ingresar:{tipo:"E",detalle:{message:"Error en el servicio de ingreso Orden de no Pago , reintente"}},error_revocar:{tipo:"E",detalle:{message:"Error en el servicio revocar Orden de no Pago , reintente"}},error_ratificar:{tipo:"E",detalle:{message:"Error en el servicio ratificar Orden de no Pago , reintente"}},cliente_sin_cuenta:{tipo:"W",detalle:{message:"Cliente sin Cuentas asociadas"}},cliente_sin_chequeras:{tipo:"W",detalle:{message:"Cuenta sin Chequeras Entregadas"}},chequera_sin_cheques_para_onp:{tipo:"W",detalle:{message:"El cliente no tiene cheques para dar orden de no pago"}},onp_sin_cheques_para_revocar:{tipo:"I",detalle:{message:"No existen cheques disponibles para revocación"}},onp_sin_cheques_para_ratificar:{tipo:"I",detalle:{message:"No existen cheques disponibles para ratificación"}},servicio_NoDisponible_Cuenta:{tipo:"E",detalle:{title:"Servicio no disponible",message:"Falla de servicio de consulta de cuentas corriente. Intente recargar la página."}},servicio_NoDisponible_Chequera:{tipo:"E",detalle:{title:"Servicio no disponible",message:"Falla de servicio de consulta de Chequera. Intente recargar la página."}},servicio_NoDisponible_Cheques:{tipo:"E",detalle:{title:"Servicio no disponible",message:"Falla de servicio de consulta de cheques. Intente recargar la página."}},servicio_NoDisponible_InfoCliente:{tipo:"E",detalle:{title:"Servicio no disponible.",message:"Falla de servicio de consulta de datos del portador. Intente recargar la página."}},servicio_NoDisponible_Fecha_habil:{tipo:"E",detalle:{title:"Servicio no disponible.",message:"Falla de servicio de calcular fecha publicación. Intente recargar la página."}},servicio_NoDisponible_onps:{tipo:"E",detalle:{title:"Servicio no disponible",message:"Falla de servicio de consulta de Orden de no pago. Intente recargar la página."}},ingrese_datos_portador:{tipo:"I",detalle:{message:"Por favor ingrese los datos del portador"}},no_resultado_portador:{tipo:"I",detalle:{title:"Los datos del R.U.T. ingresado no se encuentran en nuestros registros",message:"Por favor ingrese los datos del portador"}},seleccionar_cheque_onp:{tipo:"W",detalle:{message:"Seleccione un Cheque o un rango de Cheques de una o más Chequeras."}},seleccionar_cheque_onp_mantencion:{tipo:"W",detalle:{message:"Seleccione un Cheque o un rango de Cheques de una o más Orden de no pago."}},seleccionar_publicacion:{tipo:"W",detalle:{message:"Seleccione una opción de publicación."}},cliente_sin_onps:{tipo:"W",detalle:{message:"Cuenta corriente sin orden de no pago asociada"}},Seleccionar_on_cambio_de_motivo:{tipo:"W",detalle:{message:"Seleccione una o más Ordenes de No Pago a modificar motivo de bloqueo."}},onp_sin_cheques_para_modificar_causal:{tipo:"I",detalle:{message:"No existen cheques disponibles para modificar causal."}}})}(),function(){angular.module("WebBancoChile.perfilEjecutivo").constant("CONTEXT_V360_CONSULTA","/v360-consulta")}(),function(){angular.module("WebBancoChile.servCheques").constant("TABS_CHEQUES",{CHEQUERAS_ACTIVAS:{value:51,name:"CHEQUERAS_ACTIVAS",label:"Chequeras activas",ref:"chequeras-activas"},CHEQUERAS_INACTIVAS:{value:52,name:"CHEQUERAS_INACTIVAS",label:"Chequeras inactivas",ref:"chequeras-inactivas"},CHEQUES_COBRADOS:{value:53,name:"CHEQUES_COBRADOS",label:"Cheques cobrados",ref:"cheques-cobrados"},CONSULTA_CHEQUES:{value:54,name:"CONSULTA_CHEQUES",label:"Consulta de cheques",ref:"consulta-cheques"},ONP:{value:55,name:"ONP",label:"ONP",ref:"ordenNoPago"},COLILLAS:{value:56,name:"COLILLAS",label:"Colillas",ref:"colillas"}})}(),function(){function calcularEdad(){return function(fechaNacimiento){if(fechaNacimiento){var now=new Date,nowYear=now.getFullYear(),nowMonth=now.getMonth(),nowDay=now.getDate(),birthdate=new Date(fechaNacimiento);birthdate.setHours(0,0,0,0);var bornDay=birthdate.getDate(),bornMonth=birthdate.getMonth(),bornYear=birthdate.getFullYear(),nextBirthDate=new Date(nowYear,bornMonth,bornDay);now.setHours(0,0,0,0);var ages=nowYear-bornYear;(nowMonth===bornMonth&&bornDay>nowDay||bornMonth>nowMonth)&&ages--,now>nextBirthDate&&nextBirthDate.setFullYear(nowYear+1);var daysUntilNext=Math.round((nextBirthDate-now)/864e5);return{edad:ages,proximoCumpleanos:daysUntilNext}}return{edad:null,proximoCumpleanos:null}}}angular.module("WebBancoChile.filters").filter("calcularEdad",calcularEdad)}(),function(){function cambiarGlosa(){return function(input,oldValue,newValue){return input===oldValue&&(input=newValue),input}}angular.module("WebBancoChile.filters").filter("cambiarGlosa",cambiarGlosa)}(),angular.module("WebBancoChile.filters").filter("datelong",function($filter){return function(fecha){return formatearFecha($filter,fecha,"EEE dd/MM/yyyy")}}).filter("datelonghour",function($filter){return function(fecha){return formatearFecha($filter,fecha,"EEE dd/MM/yyyy | HH:mm:ss")}}).filter("dateshort",function($filter){return function(fecha){return formatearFecha($filter,fecha,"dd/MM/yyyy")}}).filter("stringToDate",function(){return function(strDate){if(!strDate||""===strDate)return null;if(strDate=strDate.replace(/\//g,""),8!==strDate.length)return null;var anio=strDate.substring(0,4),mes=strDate.substring(4,6)-1,dia=strDate.substring(6,8);return new Date(anio,mes,dia)}}).filter("normalizarFecha",function(){return function(fn){if(angular.isUndefined(fn)||null==fn||""===fn)return null;var fecha=angular.copy(fn);if(angular.isString(fecha)){var splitFn=fn.split("/"),anio=4===splitFn[0].length?splitFn[0]:splitFn[2],dia=4===splitFn[0].length?splitFn[2]:splitFn[0];fecha=new Date(anio,parseInt(splitFn[1],10)-1,dia)}return!fecha instanceof Date?null:fecha}}).filter("edad",function($filter){return function(fn){var fechaNacimiento=$filter("normalizarFecha")(fn);if(null==fechaNacimiento)return"";var hoy=new Date,ahora_ano=hoy.getFullYear(),ahora_mes=hoy.getMonth(),ahora_dia=hoy.getDate(),fn_ano=fechaNacimiento.getFullYear(),fn_mes=fechaNacimiento.getMonth(),fn_dia=fechaNacimiento.getDate(),edad=ahora_ano-fn_ano;return fn_mes>ahora_mes&&edad--,fn_mes===ahora_mes&&fn_dia>ahora_dia&&edad--,edad+(edad>1?" años":" año")}}).filter("formatFechaDate",function(fechaUtilService){return function(fecha){return angular.isDefined(fecha)&&null!==fecha&&""!==fecha.dia?fechaUtilService.parseFecha(fecha):null}}),function(){function dirCompleta(){return function(obj){var direccion="";return obj?(direccion=obj.direccion?obj.direccion:"",direccion+=obj.numeroDireccion?", "+obj.numeroDireccion:"",direccion+=obj.complementoDireccion?", "+obj.complementoDireccion:"",direccion+=obj.comuna?", "+obj.comuna:"",direccion+=obj.ciudad?" "+obj.ciudad:""):direccion}}function dirObjeto($filter){return function(obj){var direccionParticular={};if(obj){var direccion=["direccion","departamento","region","ciudad","comuna"];for(var j in direccion)obj[direccion[j]]?direccionParticular[direccion[j]]=obj[direccion[j]]:direccionParticular[direccion[j]]=null;direccionParticular.numero=obj.numeroDireccion,direccionParticular.complemento=obj.complementoDireccion,direccionParticular.dirCompleta=$filter("dirCompleta")(obj)}return direccionParticular}}angular.module("WebBancoChile.filters").filter("dirCompleta",dirCompleta).filter("dirObjeto",dirObjeto)}(),function(){function esCampoVacio(){return function(campo,valorReemplazar){return campo||(campo=valorReemplazar?valorReemplazar:"-"),campo}}angular.module("WebBancoChile.filters").filter("esCampoVacio",esCampoVacio)}(),function(){function fechaFormato($filter,$locale){return function(fecha,formato){if(fecha){if($locale.DATETIME_FORMATS.SHORTDAY=["DOM","LUN","MAR","MIÉ","JUE","VIE","SÁB"],"string"==typeof fecha){var isYearFirst=fecha.match(/\d{2}\/\d{2}\/\d{4}/);isYearFirst&&(fecha=fecha.split("/"),fecha=new Date(fecha[2],fecha[1]-1,fecha[0]))}return fecha=angular.isDefined(formato)?$filter("date")(fecha,formato):$filter("date")(fecha,"EEE dd/MM/yyyy")}return""}}angular.module("WebBancoChile.filters").filter("fechaFormato",fechaFormato),fechaFormato.$inject=["$filter","$locale"]}(),function(){function query($filter){return function(list,query,aliases,c){return c=c||{caseSensitive:!1},aliases?withQuery(list,query,aliases,c):$filter("filter")(list,query)}}function withQuery(list,query,aliases,c){if(query){var r=[];return angular.forEach(list,function(e){for(var queries=getQueries(query,aliases),i=0;i<queries.length;i++){var q=queries[i];if(cs(get(e,aliases[q.key]).toString(),c.caseSensitive).indexOf(cs(q.value,c.caseSensitive))>-1){r.push(e);break}}}),r}return list}function cs(s,c){return c?s:s.toUpperCase()}function get(o,s){for(var a=s.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),i=0,n=a.length;n>i;++i){var k=a[i];if(!(k in o))return;o=o[k]}return o}function getQueries(query,aliases){var r=[];return/("(\\"|[^"])+")/g.test(query)?(query=query.replace(/['"]+/g,""),angular.forEach(aliases,function(v,k){r.push({key:k,value:query})})):(query=query.replace(/\s+/g," ").split(" "),angular.forEach(query,function(e){var qq=e.split(":");qq.length>1?r.push({key:qq[0],value:qq[1]}):angular.forEach(aliases,function(v,k){r.push({key:k,value:qq[0]})})})),r}angular.module("WebBancoChile.filters").filter("query",["$filter",query])}(),angular.module("WebBancoChile.filters").filter("searchByFields",function(){return function(items,expect,fields){var filtered=[];if(checkEmptyValues(items,expect,fields))return items;for(var i=0;i<items.length;i++)for(var item=items[i],keysFields=getAllKeys(fields,null),pushed=!1,j=0;j<keysFields.length&&!pushed;j++){var keys=keysFields[j],value=getValue(item,keys);value&&(null===value&&""===expect||(""+value).toLowerCase().indexOf(expect.toLowerCase())>=0)&&(filtered.push(item),pushed=!0)}return filtered}}).filter("propsFilter",function(){return function(items,props){var out=[];return angular.isArray(items)?items.forEach(function(item){for(var itemMatches=!1,keys=Object.keys(props),i=0;i<keys.length;i++){var prop=keys[i],text=props[prop].toLowerCase();if(-1!==item[prop].toString().toLowerCase().indexOf(text)){itemMatches=!0;break}}itemMatches&&out.push(item)}):out=items,out}}),function(){function telefonoCompleto($filter){return function(obj,darFormato){var telefono="";return obj?(telefono=obj.codigoPaisFonoPartCliente?obj.codigoPaisFonoPartCliente:"",telefono+=obj.codigoCiudadPartCliente?obj.codigoCiudadPartCliente:"",telefono+=obj.fonoParticularCliente?obj.fonoParticularCliente:"",telefono=telefono?"+"+telefono:telefono,darFormato?$filter("telefono")(telefono):telefono):telefono}}function celularCompleto($filter){return function(obj,darFormato){var celular="";return obj?(celular=obj.codigoPaisCelularCliente?obj.codigoPaisCelularCliente:"",celular+=obj.codigoCiudadCelularCliente?obj.codigoCiudadCelularCliente:"",celular+=obj.celularParticularCliente?obj.celularParticularCliente:"",celular=celular?"+"+celular:celular,darFormato?$filter("telefono")(celular):celular):celular}}angular.module("WebBancoChile.filters").filter("telefonoCompleto",telefonoCompleto).filter("celularCompleto",celularCompleto)}(),angular.module("WebBancoChile.filters").filter("datoVacio",function(){return function(input,mensaje){return angular.isUndefined(input)||null===input||""===input?mensaje:input}}).filter("numCuentaNacional",function(){return function(cta){if(angular.isUndefined(cta)||null==cta||""===cta)return null;var ctaFormateada=cta;if(cta.length<10)for(var i=cta.length;10>i;i++)ctaFormateada="0"+ctaFormateada;ctaFormateada=ctaFormateada.toString();var inicio=ctaFormateada.substring(0,2),medio=ctaFormateada.substring(2,7),fin=ctaFormateada.substring(7,9),ctaCteFormateada=inicio+"-"+medio+"-"+fin;return ctaCteFormateada}}).filter("numCuentaInternacional",function(){return function(cta){if(angular.isUndefined(cta)||null==cta||""===cta)return null;var ctaFormateada=cta;if(cta.length<11)for(var i=cta.length;11>i;i++)ctaFormateada="0"+ctaFormateada;ctaFormateada=ctaFormateada.toString();var inicio=ctaFormateada.substring(0,1),medio=ctaFormateada.substring(1,4),fin=ctaFormateada.substring(4,9),termino=ctaFormateada.substring(9,11),ctaCteFormateada=inicio+"-"+medio+"-"+fin+"-"+termino;return ctaCteFormateada}}).filter("rut",function(){return function(rut){if(angular.isUndefined(rut)||null===rut)return"";var sRut,sRutFormateado="",strRut=rut.replace(/^0+/,"");strRut=strRut.replace(/[-|\.]/g,""),sRut=strRut;var sDV=sRut.charAt(sRut.length-1);for(sRut=sRut.substring(0,sRut.length-1);sRut.length>3;)sRutFormateado="."+sRut.substr(sRut.length-3)+sRutFormateado,sRut=sRut.substring(0,sRut.length-3);return sRutFormateado=sRut+sRutFormateado,sRutFormateado+="-"+sDV}}).filter("multiCurrency",function($filter,$locale){$filter("number");var formats=$locale.NUMBER_FORMATS,pattern=formats.PATTERNS[1];formats.DEFAULT_PRECISION=angular.isUndefined(formats.DEFAULT_PRECISION)?2:formats.DEFAULT_PRECISION;var moneys={USD:{fraction:2,name:"USD ",b:!1},EURO:{fraction:2,name:" €",b:!0},CLP:{fraction:0,name:"$ ",b:!1},CLF:{fraction:2,name:"UF ",b:!1},UTM:{fraction:2,name:"UTM ",b:!1},CLF3:{fraction:3,name:"UF ",b:!1}};return function(amount,type){if(angular.isString(amount)&&amount.length>0){var numero=parseInt(amount,10);amount=Number.isNaN(numero)?amount:numero}var typeUpper=type?type.toUpperCase():"";return(amount||0===amount)&&type?processAmount(amount,moneys[typeUpper].name,moneys[typeUpper].fraction,moneys[typeUpper].b,pattern,$filter,$locale):""}}).filter("camelcase",function(){return function(input){if(angular.isUndefined(input)||null==input||""===input)return"";for(var words=input.replace(/ +/g," ").split(" "),i=0;i<words.length;i++)words[i]=words[i].charAt(0).toUpperCase()+words[i].substr(1).toLowerCase();return words.join(" ")}}).filter("telefono",function(){return function(input){var formatTelefono="";if(angular.isUndefined(input)||null==input||""===input)return formatTelefono;var telefono=input.replace(/\s/g,"");if(telefono.length>8){var idxIniCodArea=telefono.length-9,sizeCodArea=1,codArea=telefono.substr(idxIniCodArea,sizeCodArea);"2"!==codArea&&"9"!==codArea&&(sizeCodArea=2,codArea=telefono.substr(idxIniCodArea,sizeCodArea));var idxFinCodArea=idxIniCodArea+sizeCodArea;formatTelefono=idxIniCodArea>0?telefono.substr(0,idxIniCodArea)+" ":"",formatTelefono=formatTelefono+codArea+" "+telefono.substr(idxFinCodArea,telefono.length-idxFinCodArea-4)+" "+telefono.substr(telefono.length-4)}else formatTelefono=telefono.length>4?telefono.substr(0,telefono.length-4)+" "+telefono.substr(telefono.length-4):telefono;return formatTelefono}}).filter("upperlower",function(){return function(input){if(angular.isUndefined(input)||null==input||""===input)return"";for(var result="",i=0;i<input.length;i++)result+=i%2===0?input[i].toUpperCase():input[i].toLowerCase();return result}}).filter("firstWord",function(){return function(cadena){if(angular.isUndefined(cadena)||null==cadena||""===cadena)return"";var sep=cadena.split(" ");return sep[0]}}).filter("formatearProductos",function(){return function(input,tipo){var producto=null,format="",largoCuenta=10,largoLinea=11,largoTarjeta=16,largotarjetaEspacios=12;return angular.isUndefined(input)||null==input||""===input?input:(producto=input.replace(/\s/g,"").trim(),"cuenta"===tipo&&producto.length<largoCuenta&&(producto=pad(producto,largoCuenta)),"linea"===tipo&&producto.length<largoLinea&&(producto=pad(producto,largoLinea)),producto.length===largoCuenta&&"cuenta"===tipo?format=producto.substring(0,3)+"-"+producto.substring(3,8)+"-"+producto.substring(8,10):producto.length===largoTarjeta&&"tarjeta"===tipo?format=producto.substring(0,4)+"-"+producto.substring(4,8)+"-"+producto.substring(8,12)+"-"+producto.substring(12,16):producto.length===largotarjetaEspacios&&"tarjetaEspacios"===tipo?format=producto.substring(0,4)+" "+producto.substring(4,8)+" "+producto.substring(8,12):producto.length===largoLinea&&"linea"===tipo?format=producto.substring(0,1)+"-"+producto.substring(1,4)+"-"+producto.substring(4,9)+"-"+producto.substring(9,11):input);
}}).filter("formatearSaldos",function($filter){var monedas={USD:"USD ",CLP:"$ "};return function(monto,moneda){if(angular.isUndefined(monto)||null==monto||""===monto)return"";var numero=monto;moneda=angular.isUndefined(moneda)?"CLP":moneda;var numeroStr=monedas[moneda];if(numero>=1e6)for(numeroStr=" "+numeroStr;numero>=1e5;)numero/=1e3,numeroStr="M"+numeroStr;var number=$filter("number")(numero,0);return numeroStr+=number}}).filter("cuentasOrden",function(){return function(input){if(angular.isUndefined(input)||null==input||0===input.length)return[];for(var cuentasCtes=[],cuentasVtas=[],cc=0,cv=0,i=0;i<input.length;i++)1===input[i].tipoCuenta?(cuentasCtes[cc]=input[i],cc++):(cuentasVtas[cv]=input[i],cv++);var aux;aux=0===cuentasCtes.length?0:cuentasCtes.length;for(var j=0;j<cuentasVtas.length;j++)cuentasCtes[aux]=cuentasVtas[j],aux++;return cuentasCtes}}).filter("caracteresRestantes",function(){return function(text,size){return text?size-text.length:size}}).filter("valueNumber",function(){return function(input){return angular.isUndefined(input)||!angular.isNumber(input)?0:Number(input)}}).filter("jsonToList",function(){return function(json){if(angular.isUndefined(json)||!json)return null;var lista=[],keys=Object.keys(json);return angular.forEach(keys,function(value){lista.push(json[value])}),lista}}).filter("percentageValue",function(){return function(input){return angular.isUndefined(input)||null===input||""===input?"":input.concat("%")}}).filter("multiCurrencyFormatWithoutSymbol",function($filter,$locale){var formats=$locale.NUMBER_FORMATS,pattern=formats.PATTERNS[1];formats.DEFAULT_PRECISION=angular.isUndefined(formats.DEFAULT_PRECISION)?2:formats.DEFAULT_PRECISION;var moneys={USD:{fraction:2,name:"USD ",b:!1},EUR:{fraction:2,name:" €",b:!0},CLP:{fraction:0,name:"$ ",b:!1},CLF:{fraction:2,name:"UF ",b:!1},UTM:{fraction:2,name:"UTM ",b:!1},CLF3:{fraction:3,name:"UF ",b:!1}};return function(amount,type){if(angular.isString(amount)&&amount.length>0){var numero=parseInt(amount,10);amount=Number.isNaN(numero)?amount:numero}var typeUpper=type?type.toUpperCase():"";return(amount||0===amount)&&type?processAmount(amount,"",moneys[typeUpper].fraction,moneys[typeUpper].b,pattern,$filter,$locale):""}});
//# sourceMappingURL=bin/assets/taurus-serv-cuenta-1.8.0-build.12_taurus.js.map